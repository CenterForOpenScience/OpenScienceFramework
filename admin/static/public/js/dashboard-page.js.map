{"version":3,"sources":["webpack:///../website/static/js/pages/dashboard-page.js","webpack:///../~/knockout.punches/index.js?2063**","webpack:///../~/jstimezonedetect/jstz.js","webpack:///../website/static/js/onboarder.js","webpack:///../website/static/css/onboarding.css?f072","webpack:///../website/static/css/onboarding.css","webpack:///../website/static/css/typeahead.css?2e54","webpack:///../website/static/css/typeahead.css","webpack:///../~/typeahead.js/dist/typeahead.bundle.js","webpack:///(webpack)/~/node-libs-browser/~/timers-browserify/main.js","webpack:///(webpack)/~/node-libs-browser/~/process/browser.js","webpack:///../website/static/js/projectCreator.js","webpack:///../website/static/built/nodeCategories.json","webpack:///../website/static/js/logFeed.js","webpack:///../website/static/js/paginator.js","webpack:///../website/static/js/projectorganizer.js","webpack:///../website/static/css/projectorganizer.css?b910","webpack:///../website/static/css/projectorganizer.css","webpack:///../~/typeahead.js/dist/typeahead.bundle.js?1ee4","webpack:///../website/static/js/components/legend.js","webpack:///../website/static/css/legend.css?65b4","webpack:///../website/static/css/legend.css"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL,wBAAwB,gBAAgB;AACxC,wBAAwB,qDAAqD;AAC7E,wBAAwB,uBAAuB;AAC/C,wBAAwB,gBAAgB;AACxC,CAAC;AACD;AACA;AACA;AACA,KAAK;AACL,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;;AAEA;AACA,yCAAyC,kCAAkC;;AAE3E;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,CAAC;;AAED;AACA;;;;;;;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,mGAAmG;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,sDAAsD;AACtD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B;AAC9B;;AAEA,wDAAwD,WAAW;AACnE;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,+BAA+B;AAClE,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,aAAa,gCAAgC;AAC7C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,qBAAqB;AACxD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,YAAY,EAAE;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,qDAAqD,EAAE,WAAW;AAClE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2EAA2E,mCAAmC;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2EAA2E,OAAO;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA,KAAK;AACL;AACA,KAAK,0BAA0B,oBAAoB;AACnD;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,6FAA6F,OAAO;AACpG;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;ACrkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,KAAK;AAC1B,uBAAuB;AACvB;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA,WAAW;;AAEX;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,YAAY;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;;;;;;;;ACrWD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,aAAa;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,2CAA2C;AACpD;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,CAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kDAAkD;AAClD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,4CAA4C,UAAU,sBAAsB,aAAa;AACzF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,sCAAsC;AACtC;AACA,aAAa;AACb;AACA;AACA;AACA,wCAAwC;AACxC;AACA;;AAEA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA,0CAA0C;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,eAAe;AACf,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,CAAC,E;;;;;;;ACvrBD;;AAEA;AACA;AACA;AACA;AACA,gDAA6G;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;ACjBA;AACA,wDAAwD,mBAAmB,GAAG,eAAe,sBAAsB,GAAG,oBAAoB,mBAAmB,iBAAiB,GAAG,uBAAuB,iBAAiB,GAAG,gBAAgB,kBAAkB,GAAG,oBAAoB,iBAAiB,gBAAgB,GAAG,sBAAsB,sBAAsB,kBAAkB,gBAAgB,oBAAoB,uBAAuB,oBAAoB,GAAG,qBAAqB,uBAAuB,eAAe,cAAc,iBAAiB,GAAG,eAAe,yBAAyB,GAAG,6BAA6B,uBAAuB,eAAe,gBAAgB,iBAAiB,GAAG,qBAAqB,8BAA8B,+CAA+C,wCAAwC,4FAA4F,sBAAsB,GAAG,2BAA2B,oBAAoB,GAAG,mHAAmH,8BAA8B,GAAG,iBAAiB,sDAAsD,gCAAgC,+BAA+B,iCAAiC,GAAG,6BAA6B,8BAA8B,+BAA+B,GAAG,yBAAyB,gBAAgB,qBAAqB,sBAAsB,GAAG,yBAAyB,uBAAuB,GAAG,qBAAqB,sBAAsB,GAAG,Q;;;;;;;ACD5jD;;AAEA;AACA;AACA;AACA;AACA,gDAA6G;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;ACjBA;AACA,wFAAwF,kBAAkB,mBAAmB,GAAG,uDAAuD,kBAAkB,KAAK,iFAAiF,uBAAuB,GAAG,yFAAyF,kBAAkB,mBAAmB,wBAAwB,sBAAsB,6BAA6B,iCAAiC,8BAA8B,yBAAyB,oBAAoB,GAAG,gBAAgB,6BAA6B,GAAG,eAAe,+DAA+D,4DAA4D,uDAAuD,GAAG,cAAc,kBAAkB,sBAAsB,GAAG,uBAAuB,6BAA6B,mBAAmB,qBAAqB,uBAAuB,6BAA6B,6BAA6B,2CAA2C,iCAAiC,8BAA8B,yBAAyB,uDAAuD,oDAAoD,+CAA+C,qBAAqB,oBAAoB,GAAG,qCAAqC,mBAAmB,GAAG,oBAAoB,wBAAwB,sBAAsB,wBAAwB,GAAG,8BAA8B,kBAAkB,gCAAgC,KAAK,sBAAsB,gBAAgB,GAAG,WAAW,sBAAsB,GAAG,Q;;;;;;;ACD9sD;AACA;AACA;AACA,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,+CAA+C,EAAE;AACjD,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,+BAA+B,SAAS;AACxC;AACA;AACA;AACA;AACA,yCAAyC,KAAK;AAC9C;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,uBAAuB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,0BAA0B;AACzD;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,SAAS;AAC3D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,gEAAgE,GAAG;AACnE;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,iB;;;;;;;;ACrvDD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,iBAAiB;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,E;;;;;;;;AC3EA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;AC1FtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,mBAAmB,MAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA,gBAAgB,iBAAiB;AACjC,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,eAAe;AACf,CAAC;;;;;;;;AC3MD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAoC;AACpC;;AAEA,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,2BAA2B,8BAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA,4DAA4D;AAC5D;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA,CAAC;;;AAGD;AACA;AACA,aAAa,SAAS;AACtB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,8BAA8B;AAC9B;AACA,KAAK,OAAO;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,aAAa,EAAE;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,2BAA2B,8BAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;AACA;AACA,aAAa,iEAAiE;AAC9E,2BAA2B,iCAAiC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa,oFAAoF;AACjG;AACA;AACA;AACA;AACA,iBAAiB;AACjB,4EAA4E,8BAA8B;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;;AAEA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,gDAAgD,6BAA6B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B;AAC3B,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;;AAGD;;;;;;;;AC5JA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;;AAED;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kCAAkC;AAC7D,KAAK;AACL,qCAAqC,qEAAqE;AAC1G,KAAK;AACL,2BAA2B,eAAe;AAC1C;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA,aAAa,eAAe;AAC5B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,uBAAuB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qCAAqC;AACvE;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA,aAAa;AACb,8GAA8G,yBAAyB;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E;AAC9E;AACA,qBAAqB,gCAAgC;AACrD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qCAAqC;AACrC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mEAAmE;AACnG;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,kDAAkD;AAClD;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oBAAoB,EAAE,EAAE;;AAE3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qDAAqD,4CAA4C;AACjG;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,uBAAuB,oBAAoB,EAAE,EAAE;AACtF,sCAAsC,uBAAuB,mBAAmB,EAAE,GAAG;AACrF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,+BAA+B;AAC/B,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,qBAAqB;AACrB;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;ACp6CA;;AAEA;AACA;AACA;AACA;AACA,gDAA6G;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;ACjBA;AACA,iDAAiD,wCAAwC,GAAG,oHAAoH,yBAAyB,GAAG,uEAAuE,4BAA4B,kBAAkB,mBAAmB,6BAA6B,4DAA4D,mCAAmC,GAAG,8CAA8C,4BAA4B,kBAAkB,mBAAmB,6BAA6B,kEAAkE,mCAAmC,GAAG,yCAAyC,4BAA4B,kBAAkB,mBAAmB,6BAA6B,6DAA6D,mCAAmC,GAAG,+CAA+C,4BAA4B,kBAAkB,mBAAmB,6BAA6B,mEAAmE,mCAAmC,GAAG,2CAA2C,4BAA4B,kBAAkB,mBAAmB,6BAA6B,+DAA+D,mCAAmC,GAAG,iDAAiD,4BAA4B,kBAAkB,mBAAmB,6BAA6B,qEAAqE,mCAAmC,GAAG,yCAAyC,4BAA4B,kBAAkB,mBAAmB,6BAA6B,6DAA6D,mCAAmC,GAAG,6CAA6C,4BAA4B,kBAAkB,mBAAmB,6BAA6B,iEAAiE,mCAAmC,GAAG,qDAAqD,mEAAmE,mCAAmC,GAAG,+CAA+C,4BAA4B,kBAAkB,mBAAmB,6BAA6B,mEAAmE,mCAAmC,GAAG,6CAA6C,4BAA4B,kBAAkB,mBAAmB,6BAA6B,iEAAiE,mCAAmC,GAAG,mDAAmD,4BAA4B,kBAAkB,mBAAmB,6BAA6B,uEAAuE,mCAAmC,GAAG,+CAA+C,4BAA4B,kBAAkB,mBAAmB,6BAA6B,mEAAmE,mCAAmC,GAAG,qDAAqD,4BAA4B,kBAAkB,mBAAmB,6BAA6B,yEAAyE,mCAAmC,GAAG,wCAAwC,kBAAkB,mBAAmB,0DAA0D,mCAAmC,GAAG,yCAAyC,kBAAkB,mBAAmB,2DAA2D,mCAAmC,GAAG,mBAAmB,oCAAoC,kBAAkB,GAAG,yHAAyH,uCAAuC,GAAG,yBAAyB,4BAA4B,GAAG,yBAAyB,uCAAuC,sBAAsB,GAAG,6DAA6D,wBAAwB,wBAAwB,GAAG,8CAA8C,qBAAqB,iCAAiC,sBAAsB,yBAAyB,GAAG,gDAAgD,qBAAqB,iCAAiC,sBAAsB,wBAAwB,GAAG,uBAAuB,wBAAwB,GAAG,sDAAsD,yBAAyB,GAAG,6BAA6B,qBAAqB,GAAG,8BAA8B,oBAAoB,KAAK,0BAA0B,oBAAoB,GAAG,oCAAoC,sBAAsB,yBAAyB,sBAAsB,yBAAyB,GAAG,iCAAiC,wBAAwB,qBAAqB,cAAc,yBAAyB,4BAA4B,kBAAkB,6BAA6B,mBAAmB,0BAA0B,GAAG,sBAAsB,yBAAyB,GAAG,gCAAgC,kBAAkB,GAAG,mCAAmC,qBAAqB,yBAAyB,gBAAgB,kBAAkB,wBAAwB,GAAG,6DAA6D,qBAAqB,yBAAyB,kBAAkB,0BAA0B,GAAG,+FAA+F,kBAAkB,GAAG,iFAAiF,uBAAuB,yBAAyB,GAAG,8EAA8E,kBAAkB,mBAAmB,sBAAsB,2CAA2C,iCAAiC,8BAA8B,yBAAyB,oBAAoB,GAAG,4BAA4B,gBAAgB,GAAG,gBAAgB,6BAA6B,GAAG,eAAe,+DAA+D,4DAA4D,uDAAuD,GAAG,yDAAyD,wBAAwB,GAAG,cAAc,kBAAkB,kCAAkC,eAAe,sBAAsB,sBAAsB,uBAAuB,GAAG,qBAAqB,mBAAmB,qBAAqB,6BAA6B,6BAA6B,2CAA2C,iCAAiC,8BAA8B,yBAAyB,uDAAuD,oDAAoD,+CAA+C,sBAAsB,GAAG,oBAAoB,uBAAuB,sBAAsB,wBAAwB,GAAG,8BAA8B,kBAAkB,gCAAgC,KAAK,wBAAwB,gBAAgB,GAAG,aAAa,sBAAsB,GAAG,WAAW,sBAAsB,wBAAwB,GAAG,eAAe,2BAA2B,GAAG,YAAY,sBAAsB,uBAAuB,GAAG,wEAAwE,wBAAwB,GAAG,mBAAmB,yBAAyB,GAAG,uBAAuB,sBAAsB,wBAAwB,GAAG,2BAA2B,6BAA6B,wBAAwB,GAAG,iBAAiB,0BAA0B,GAAG,uBAAuB,qBAAqB,GAAG,YAAY,qBAAqB,GAAG,yCAAyC,qBAAqB,GAAG,8BAA8B,qBAAqB,GAAG,aAAa,kBAAkB,GAAG,YAAY,qBAAqB,GAAG,6BAA6B,sBAAsB,GAAG,Q;;;;;;;ACDnsQ;AACA;AACA;AACA,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,+CAA+C,EAAE;AACjD,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,+BAA+B,SAAS;AACxC;AACA;AACA;AACA;AACA,yCAAyC,KAAK;AAC9C;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,uBAAuB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,0BAA0B;AACzD;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,SAAS;AAC3D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,gEAAgE,GAAG;AACnE;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;;AAED;AACA,2B;;;;;;;;ACxvDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,uBAAuB,uBAAuB;AAC9C;AACA;AACA;;;;;;;;ACrBA;;AAEA;AACA;AACA;AACA;AACA,gDAA6G;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;ACjBA;AACA,wCAAwC,8BAA8B,uDAAuD,oCAAoC,yBAAyB,GAAG,uBAAuB,kBAAkB,wBAAwB,yBAAyB,yBAAyB,yBAAyB,4BAA4B,GAAG,Y","file":"dashboard-page.js","sourcesContent":["/**\n * Initialization code for the dashboard pages. Starts up the Project Organizer\n * and binds the onboarder Knockout components.\n */\n\n'use strict';\n\nvar Raven = require('raven-js');\nvar ko = require('knockout');\nvar $ = require('jquery');\nvar jstz = require('jstimezonedetect').jstz;\n\n// Knockout components for the onboarder\nrequire('js/onboarder.js');\nvar $osf = require('js/osfHelpers');\nvar LogFeed = require('js/logFeed');\nvar ProjectOrganizer = require('js/projectorganizer').ProjectOrganizer;\n\nvar url = '/api/v1/dashboard/get_nodes/';\nvar request = $.getJSON(url, function(response) {\n    var allNodes = response.nodes;\n    //  For uploads, only show nodes for which user has write or admin permissions\n    var uploadSelection = ko.utils.arrayFilter(allNodes, function(node) {\n        return $.inArray(node.permissions, ['write', 'admin']) !== -1;\n    });\n\n    // If we need to change what nodes can be registered, filter here\n    var registrationSelection = ko.utils.arrayFilter(allNodes, function(node) {\n        return $.inArray(node.permissions, ['admin']) !== -1;\n    });\n\n    $osf.applyBindings({nodes: allNodes}, '#obGoToProject');\n    $osf.applyBindings({nodes: registrationSelection, enableComponents: true}, '#obRegisterProject');\n    $osf.applyBindings({nodes: uploadSelection}, '#obUploader');\n    $osf.applyBindings({nodes: allNodes}, '#obCreateProject');\n});\nrequest.fail(function(xhr, textStatus, error) {\n    Raven.captureMessage('Could not fetch dashboard nodes.', {\n        url: url, textStatus: textStatus, error: error\n    });\n});\n\nvar ensureUserTimezone = function(savedTimezone, savedLocale, id) {\n    var clientTimezone = jstz.determine().name();\n    var clientLocale = window.navigator.userLanguage || window.navigator.language;\n\n    if (savedTimezone !== clientTimezone || savedLocale !== clientLocale) {\n        var url = '/api/v1/profile/';\n\n        var request = $osf.putJSON(\n            url,\n            {\n                'timezone': clientTimezone,\n                'locale': clientLocale,\n                'id': id\n            }\n        );\n        request.fail(function(xhr, textStatus, error) {\n            Raven.captureMessage('Could not set user timezone or locale', {\n                url: url,\n                textStatus: textStatus,\n                error: error\n            });\n        });\n    }\n};\n\n$(document).ready(function() {\n    $('#projectOrganizerScope').tooltip({selector: '[data-toggle=tooltip]'});\n\n    var request = $.ajax({\n        url:  '/api/v1/dashboard/'\n    });\n    request.done(function(data) {\n        var po = new ProjectOrganizer({\n            placement : 'dashboard',\n            divID: 'project-grid',\n            filesData: data.data,\n            multiselect : true\n        });\n\n        ensureUserTimezone(data.timezone, data.locale, data.id);\n    });\n    request.fail(function(xhr, textStatus, error) {\n        Raven.captureMessage('Failed to populate user dashboard', {\n            url: url,\n            textStatus: textStatus,\n            error: error\n        });\n    });\n\n});\n\n// Initialize logfeed\nnew LogFeed('#logScope', '/api/v1/watched/logs/');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/pages/dashboard-page.js\n ** module id = 0\n ** module chunks = 4\n **/","/**\n * @license Knockout.Punches\n * Enhanced binding syntaxes for Knockout 3+\n * (c) Michael Best\n * License: MIT (http://www.opensource.org/licenses/mit-license.php)\n * Version 0.5.1\n */\nvar ko = require('knockout');\n\n// Add a preprocess function to a binding handler.\nfunction addBindingPreprocessor(bindingKeyOrHandler, preprocessFn) {\n    return chainPreprocessor(getOrCreateHandler(bindingKeyOrHandler), 'preprocess', preprocessFn);\n}\n\n// These utility functions are separated out because they're also used by\n// preprocessBindingProperty\n\n// Get the binding handler or create a new, empty one\nfunction getOrCreateHandler(bindingKeyOrHandler) {\n    return typeof bindingKeyOrHandler === 'object' ? bindingKeyOrHandler :\n        (ko.getBindingHandler(bindingKeyOrHandler) || (ko.bindingHandlers[bindingKeyOrHandler] = {}));\n}\n// Add a preprocess function\nfunction chainPreprocessor(obj, prop, fn) {\n    if (obj[prop]) {\n        // If the handler already has a preprocess function, chain the new\n        // one after the existing one. If the previous function in the chain\n        // returns a falsy value (to remove the binding), the chain ends. This\n        // method allows each function to modify and return the binding value.\n        var previousFn = obj[prop];\n        obj[prop] = function(value, binding, addBinding) {\n            value = previousFn.call(this, value, binding, addBinding);\n            if (value)\n                return fn.call(this, value, binding, addBinding);\n        };\n    } else {\n        obj[prop] = fn;\n    }\n    return obj;\n}\n\n// Add a preprocessNode function to the binding provider. If a\n// function already exists, chain the new one after it. This calls\n// each function in the chain until one modifies the node. This\n// method allows only one function to modify the node.\nfunction addNodePreprocessor(preprocessFn) {\n    var provider = ko.bindingProvider.instance;\n    if (provider.preprocessNode) {\n        var previousPreprocessFn = provider.preprocessNode;\n        provider.preprocessNode = function(node) {\n            var newNodes = previousPreprocessFn.call(this, node);\n            if (!newNodes)\n                newNodes = preprocessFn.call(this, node);\n            return newNodes;\n        };\n    } else {\n        provider.preprocessNode = preprocessFn;\n    }\n}\n\nfunction addBindingHandlerCreator(matchRegex, callbackFn) {\n    var oldGetHandler = ko.getBindingHandler;\n    ko.getBindingHandler = function(bindingKey) {\n        var match;\n        return oldGetHandler(bindingKey) || ((match = bindingKey.match(matchRegex)) && callbackFn(match, bindingKey));\n    };\n}\n\n// Create shortcuts to commonly used ko functions\nvar ko_unwrap = ko.unwrap;\n\n// Create \"punches\" object and export utility functions\nvar ko_punches = ko.punches = {\n    utils: {\n        addBindingPreprocessor: addBindingPreprocessor,\n        addNodePreprocessor: addNodePreprocessor,\n        addBindingHandlerCreator: addBindingHandlerCreator,\n\n        // previous names retained for backwards compitibility\n        setBindingPreprocessor: addBindingPreprocessor,\n        setNodePreprocessor: addNodePreprocessor\n    }\n};\n\nko_punches.enableAll = function () {\n    // Enable interpolation markup\n    enableInterpolationMarkup();\n    enableAttributeInterpolationMarkup();\n\n    // Enable auto-namspacing of attr, css, event, and style\n    enableAutoNamespacedSyntax('attr');\n    enableAutoNamespacedSyntax('css');\n    enableAutoNamespacedSyntax('event');\n    enableAutoNamespacedSyntax('style');\n\n    // Make sure that Knockout knows to bind checked after attr.value (see #40)\n    ko.bindingHandlers.checked.after.push('attr.value');\n\n    // Enable filter syntax for text, html, and attr\n    enableTextFilter('text');\n    enableTextFilter('html');\n    addDefaultNamespacedBindingPreprocessor('attr', filterPreprocessor);\n\n    // Enable wrapped callbacks for click, submit, event, optionsAfterRender, and template options\n    enableWrappedCallback('click');\n    enableWrappedCallback('submit');\n    enableWrappedCallback('optionsAfterRender');\n    addDefaultNamespacedBindingPreprocessor('event', wrappedCallbackPreprocessor);\n    addBindingPropertyPreprocessor('template', 'beforeRemove', wrappedCallbackPreprocessor);\n    addBindingPropertyPreprocessor('template', 'afterAdd', wrappedCallbackPreprocessor);\n    addBindingPropertyPreprocessor('template', 'afterRender', wrappedCallbackPreprocessor);\n};\n// Convert input in the form of `expression | filter1 | filter2:arg1:arg2` to a function call format\n// with filters accessed as ko.filters.filter1, etc.\nfunction filterPreprocessor(input) {\n    // Check if the input contains any | characters; if not, just return\n    if (input.indexOf('|') === -1)\n        return input;\n\n    // Split the input into tokens, in which | and : are individual tokens, quoted strings are ignored, and all tokens are space-trimmed\n    var tokens = input.match(/\"([^\"\\\\]|\\\\.)*\"|'([^'\\\\]|\\\\.)*'|\\|\\||[|:]|[^\\s|:\"'][^|:\"']*[^\\s|:\"']|[^\\s|:\"']/g);\n    if (tokens && tokens.length > 1) {\n        // Append a line so that we don't need a separate code block to deal with the last item\n        tokens.push('|');\n        input = tokens[0];\n        var lastToken, token, inFilters = false, nextIsFilter = false;\n        for (var i = 1, token; token = tokens[i]; ++i) {\n            if (token === '|') {\n                if (inFilters) {\n                    if (lastToken === ':')\n                        input += \"undefined\";\n                    input += ')';\n                }\n                nextIsFilter = true;\n                inFilters = true;\n            } else {\n                if (nextIsFilter) {\n                    input = \"ko.filters['\" + token + \"'](\" + input;\n                } else if (inFilters && token === ':') {\n                    if (lastToken === ':')\n                        input += \"undefined\";\n                    input += \",\";\n                } else {\n                    input += token;\n                }\n                nextIsFilter = false;\n            }\n            lastToken = token;\n        }\n    }\n    return input;\n}\n\n// Set the filter preprocessor for a specific binding\nfunction enableTextFilter(bindingKeyOrHandler) {\n    addBindingPreprocessor(bindingKeyOrHandler, filterPreprocessor);\n}\n\nvar filters = {};\n\n// Convert value to uppercase\nfilters.uppercase = function(value) {\n    return String.prototype.toUpperCase.call(ko_unwrap(value));\n};\n\n// Convert value to lowercase\nfilters.lowercase = function(value) {\n    return String.prototype.toLowerCase.call(ko_unwrap(value));\n};\n\n// Return default value if the input value is empty or null\nfilters['default'] = function (value, defaultValue) {\n    value = ko_unwrap(value);\n    if (typeof value === \"function\") {\n        return value;\n    }\n    if (typeof value === \"string\") {\n        return trim(value) === '' ? defaultValue : value;\n    }\n    return value == null || value.length == 0 ? defaultValue : value;\n};\n\n// Return the value with the search string replaced with the replacement string\nfilters.replace = function(value, search, replace) {\n    return String.prototype.replace.call(ko_unwrap(value), search, replace);\n};\n\nfilters.fit = function(value, length, replacement, trimWhere) {\n    value = ko_unwrap(value);\n    if (length && ('' + value).length > length) {\n        replacement = '' + (replacement || '...');\n        length = length - replacement.length;\n        value = '' + value;\n        switch (trimWhere) {\n            case 'left':\n                return replacement + value.slice(-length);\n            case 'middle':\n                var leftLen = Math.ceil(length / 2);\n                return value.substr(0, leftLen) + replacement + value.slice(leftLen-length);\n            default:\n                return value.substr(0, length) + replacement;\n        }\n    } else {\n        return value;\n    }\n};\n\n// Convert a model object to JSON\nfilters.json = function(rootObject, space, replacer) {     // replacer and space are optional\n    return ko.toJSON(rootObject, replacer, space);\n};\n\n// Format a number using the browser's toLocaleString\nfilters.number = function(value) {\n    return (+ko_unwrap(value)).toLocaleString();\n};\n\n// Export the filters object for general access\nko.filters = filters;\n\n// Export the preprocessor functions\nko_punches.textFilter = {\n    preprocessor: filterPreprocessor,\n    enableForBinding: enableTextFilter\n};\n// Support dynamically-created, namespaced bindings. The binding key syntax is\n// \"namespace.binding\". Within a certain namespace, we can dynamically create the\n// handler for any binding. This is particularly useful for bindings that work\n// the same way, but just set a different named value, such as for element\n// attributes or CSS classes.\nvar namespacedBindingMatch = /([^\\.]+)\\.(.+)/, namespaceDivider = '.';\naddBindingHandlerCreator(namespacedBindingMatch, function (match, bindingKey) {\n    var namespace = match[1],\n        namespaceHandler = ko.bindingHandlers[namespace];\n    if (namespaceHandler) {\n        var bindingName = match[2],\n            handlerFn = namespaceHandler.getNamespacedHandler || defaultGetNamespacedHandler,\n            handler = handlerFn.call(namespaceHandler, bindingName, namespace, bindingKey);\n        ko.bindingHandlers[bindingKey] = handler;\n        return handler;\n    }\n});\n\n// Knockout's built-in bindings \"attr\", \"event\", \"css\" and \"style\" include the idea of\n// namespaces, representing it using a single binding that takes an object map of names\n// to values. This default handler translates a binding of \"namespacedName: value\"\n// to \"namespace: {name: value}\" to automatically support those built-in bindings.\nfunction defaultGetNamespacedHandler(name, namespace, namespacedName) {\n    var handler = ko.utils.extend({}, this);\n    function setHandlerFunction(funcName) {\n        if (handler[funcName]) {\n            handler[funcName] = function(element, valueAccessor) {\n                function subValueAccessor() {\n                    var result = {};\n                    result[name] = valueAccessor();\n                    return result;\n                }\n                var args = Array.prototype.slice.call(arguments, 0);\n                args[1] = subValueAccessor;\n                return ko.bindingHandlers[namespace][funcName].apply(this, args);\n            };\n        }\n    }\n    // Set new init and update functions that wrap the originals\n    setHandlerFunction('init');\n    setHandlerFunction('update');\n    // Clear any preprocess function since preprocessing of the new binding would need to be different\n    if (handler.preprocess)\n        handler.preprocess = null;\n    if (ko.virtualElements.allowedBindings[namespace])\n        ko.virtualElements.allowedBindings[namespacedName] = true;\n    return handler;\n}\n\n// Adds a preprocess function for every generated namespace.x binding. This can\n// be called multiple times for the same binding, and the preprocess functions will\n// be chained. If the binding has a custom getNamespacedHandler method, make sure that\n// it's set before this function is used.\nfunction addDefaultNamespacedBindingPreprocessor(namespace, preprocessFn) {\n    var handler = ko.getBindingHandler(namespace);\n    if (handler) {\n        var previousHandlerFn = handler.getNamespacedHandler || defaultGetNamespacedHandler;\n        handler.getNamespacedHandler = function() {\n            return addBindingPreprocessor(previousHandlerFn.apply(this, arguments), preprocessFn);\n        };\n    }\n}\n\nfunction autoNamespacedPreprocessor(value, binding, addBinding) {\n    if (value.charAt(0) !== \"{\")\n        return value;\n\n    // Handle two-level binding specified as \"binding: {key: value}\" by parsing inner\n    // object and converting to \"binding.key: value\"\n    var subBindings = ko.expressionRewriting.parseObjectLiteral(value);\n    ko.utils.arrayForEach(subBindings, function(keyValue) {\n        addBinding(binding + namespaceDivider + keyValue.key, keyValue.value);\n    });\n}\n\n// Set the namespaced preprocessor for a specific binding\nfunction enableAutoNamespacedSyntax(bindingKeyOrHandler) {\n    addBindingPreprocessor(bindingKeyOrHandler, autoNamespacedPreprocessor);\n}\n\n// Export the preprocessor functions\nko_punches.namespacedBinding = {\n    defaultGetHandler: defaultGetNamespacedHandler,\n    setDefaultBindingPreprocessor: addDefaultNamespacedBindingPreprocessor,    // for backwards compat.\n    addDefaultBindingPreprocessor: addDefaultNamespacedBindingPreprocessor,\n    preprocessor: autoNamespacedPreprocessor,\n    enableForBinding: enableAutoNamespacedSyntax\n};\n// Wrap a callback function in an anonymous function so that it is called with the appropriate\n// \"this\" value.\nfunction wrappedCallbackPreprocessor(val) {\n    // Matches either an isolated identifier or something ending with a property accessor\n    if (/^([$_a-z][$\\w]*|.+(\\.\\s*[$_a-z][$\\w]*|\\[.+\\]))$/i.test(val)) {\n        return 'function(_x,_y,_z){return(' + val + ')(_x,_y,_z);}';\n    } else {\n        return val;\n    }\n}\n\n// Set the wrappedCallback preprocessor for a specific binding\nfunction enableWrappedCallback(bindingKeyOrHandler) {\n    addBindingPreprocessor(bindingKeyOrHandler, wrappedCallbackPreprocessor);\n}\n\n// Export the preprocessor functions\nko_punches.wrappedCallback = {\n    preprocessor: wrappedCallbackPreprocessor,\n    enableForBinding: enableWrappedCallback\n};\n// Attach a preprocess function to a specific property of a binding. This allows you to\n// preprocess binding \"options\" using the same preprocess functions that work for bindings.\nfunction addBindingPropertyPreprocessor(bindingKeyOrHandler, property, preprocessFn) {\n    var handler = getOrCreateHandler(bindingKeyOrHandler);\n    if (!handler._propertyPreprocessors) {\n        // Initialize the binding preprocessor\n        chainPreprocessor(handler, 'preprocess', propertyPreprocessor);\n        handler._propertyPreprocessors = {};\n    }\n    // Add the property preprocess function\n    chainPreprocessor(handler._propertyPreprocessors, property, preprocessFn);\n}\n\n// In order to preprocess a binding property, we have to preprocess the binding itself.\n// This preprocess function splits up the binding value and runs each property's preprocess\n// function if it's set.\nfunction propertyPreprocessor(value, binding, addBinding) {\n    if (value.charAt(0) !== \"{\")\n        return value;\n\n    var subBindings = ko.expressionRewriting.parseObjectLiteral(value),\n        resultStrings = [],\n        propertyPreprocessors = this._propertyPreprocessors || {};\n    ko.utils.arrayForEach(subBindings, function(keyValue) {\n        var prop = keyValue.key, propVal = keyValue.value;\n        if (propertyPreprocessors[prop]) {\n            propVal = propertyPreprocessors[prop](propVal, prop, addBinding);\n        }\n        if (propVal) {\n            resultStrings.push(\"'\" + prop + \"':\" + propVal);\n        }\n    });\n    return \"{\" + resultStrings.join(\",\") + \"}\";\n}\n\n// Export the preprocessor functions\nko_punches.preprocessBindingProperty = {\n    setPreprocessor: addBindingPropertyPreprocessor,     // for backwards compat.\n    addPreprocessor: addBindingPropertyPreprocessor\n};\n// Wrap an expression in an anonymous function so that it is called when the event happens\nfunction makeExpressionCallbackPreprocessor(args) {\n    return function expressionCallbackPreprocessor(val) {\n        return 'function('+args+'){return(' + val + ');}';\n    };\n}\n\nvar eventExpressionPreprocessor = makeExpressionCallbackPreprocessor(\"$data,$event\");\n\n// Set the expressionCallback preprocessor for a specific binding\nfunction enableExpressionCallback(bindingKeyOrHandler, args) {\n    var args = Array.prototype.slice.call(arguments, 1).join();\n    addBindingPreprocessor(bindingKeyOrHandler, makeExpressionCallbackPreprocessor(args));\n}\n\n// Export the preprocessor functions\nko_punches.expressionCallback = {\n    makePreprocessor: makeExpressionCallbackPreprocessor,\n    eventPreprocessor: eventExpressionPreprocessor,\n    enableForBinding: enableExpressionCallback\n};\n\n// Create an \"on\" namespace for events to use the expression method\nko.bindingHandlers.on = {\n    getNamespacedHandler: function(eventName) {\n        var handler = ko.getBindingHandler('event' + namespaceDivider + eventName);\n        return addBindingPreprocessor(handler, eventExpressionPreprocessor);\n    }\n};\n// Performance comparison at http://jsperf.com/markup-interpolation-comparison\nfunction parseInterpolationMarkup(textToParse, outerTextCallback, expressionCallback) {\n    function innerParse(text) {\n        var innerMatch = text.match(/^([\\s\\S]*)}}([\\s\\S]*?)\\{\\{([\\s\\S]*)$/);\n        if (innerMatch) {\n            innerParse(innerMatch[1]);\n            outerTextCallback(innerMatch[2]);\n            expressionCallback(innerMatch[3]);\n        } else {\n            expressionCallback(text);\n        }\n    }\n    var outerMatch = textToParse.match(/^([\\s\\S]*?)\\{\\{([\\s\\S]*)}}([\\s\\S]*)$/);\n    if (outerMatch) {\n        outerTextCallback(outerMatch[1]);\n        innerParse(outerMatch[2]);\n        outerTextCallback(outerMatch[3]);\n    }\n}\n\nfunction trim(string) {\n    return string == null ? '' :\n        string.trim ?\n            string.trim() :\n            string.toString().replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g, '');\n}\n\nfunction interpolationMarkupPreprocessor(node) {\n    // only needs to work with text nodes\n    if (node.nodeType === 3 && node.nodeValue && node.nodeValue.indexOf('{{') !== -1 && (node.parentNode || {}).nodeName != \"TEXTAREA\") {\n        var nodes = [];\n        function addTextNode(text) {\n            if (text)\n                nodes.push(document.createTextNode(text));\n        }\n        function wrapExpr(expressionText) {\n            if (expressionText)\n                nodes.push.apply(nodes, ko_punches_interpolationMarkup.wrapExpression(expressionText, node));\n        }\n        parseInterpolationMarkup(node.nodeValue, addTextNode, wrapExpr)\n\n        if (nodes.length) {\n            if (node.parentNode) {\n                for (var i = 0, n = nodes.length, parent = node.parentNode; i < n; ++i) {\n                    parent.insertBefore(nodes[i], node);\n                }\n                parent.removeChild(node);\n            }\n            return nodes;\n        }\n    }\n}\n\nif (!ko.virtualElements.allowedBindings.html) {\n    // Virtual html binding\n    // SO Question: http://stackoverflow.com/a/15348139\n    var overridden = ko.bindingHandlers.html.update;\n    ko.bindingHandlers.html.update = function (element, valueAccessor) {\n        if (element.nodeType === 8) {\n            var html = ko_unwrap(valueAccessor());\n            if (html != null) {\n                var parsedNodes = ko.utils.parseHtmlFragment('' + html);\n                ko.virtualElements.setDomNodeChildren(element, parsedNodes);\n            } else {\n                ko.virtualElements.emptyNode(element);\n            }\n        } else {\n            overridden(element, valueAccessor);\n        }\n    };\n    ko.virtualElements.allowedBindings.html = true;\n}\n\nfunction wrapExpression(expressionText, node) {\n    var ownerDocument = node ? node.ownerDocument : document,\n        closeComment = true,\n        binding,\n        expressionText = trim(expressionText),\n        firstChar = expressionText[0],\n        lastChar = expressionText[expressionText.length - 1],\n        result = [],\n        matches;\n\n    if (firstChar === '#') {\n        if (lastChar === '/') {\n            binding = expressionText.slice(1, -1);\n        } else {\n            binding = expressionText.slice(1);\n            closeComment = false;\n        }\n        if (matches = binding.match(/^([^,\"'{}()\\/:[\\]\\s]+)\\s+([^\\s:].*)/)) {\n            binding = matches[1] + ':' + matches[2];\n        }\n    } else if (firstChar === '/') {\n        // replace only with a closing comment\n    } else if (firstChar === '{' && lastChar === '}') {\n        binding = \"html:\" + trim(expressionText.slice(1, -1));\n    } else {\n        binding = \"text:\" + trim(expressionText);\n    }\n\n    if (binding)\n        result.push(ownerDocument.createComment(\"ko \" + binding));\n    if (closeComment)\n        result.push(ownerDocument.createComment(\"/ko\"));\n    return result;\n};\n\nfunction enableInterpolationMarkup() {\n    addNodePreprocessor(interpolationMarkupPreprocessor);\n}\n\n// Export the preprocessor functions\nvar ko_punches_interpolationMarkup = ko_punches.interpolationMarkup = {\n    preprocessor: interpolationMarkupPreprocessor,\n    enable: enableInterpolationMarkup,\n    wrapExpression: wrapExpression\n};\n\n\nvar dataBind = 'data-bind';\nfunction attributeInterpolationMarkerPreprocessor(node) {\n    if (node.nodeType === 1 && node.attributes.length) {\n        var dataBindAttribute = node.getAttribute(dataBind);\n        for (var attrs = ko.utils.arrayPushAll([], node.attributes), n = attrs.length, i = 0; i < n; ++i) {\n            var attr = attrs[i];\n            if (attr.specified && attr.name != dataBind && attr.value.indexOf('{{') !== -1) {\n                var parts = [], attrValue = '';\n                function addText(text) {\n                    if (text)\n                        parts.push('\"' + text.replace(/\"/g, '\\\\\"') + '\"');\n                }\n                function addExpr(expressionText) {\n                    if (expressionText) {\n                        attrValue = expressionText;\n                        parts.push('ko.unwrap(' + expressionText + ')');\n                    }\n                }\n                parseInterpolationMarkup(attr.value, addText, addExpr);\n\n                if (parts.length > 1) {\n                    attrValue = '\"\"+' + parts.join('+');\n                }\n\n                if (attrValue) {\n                    var attrName = attr.name.toLowerCase();\n                    var attrBinding = ko_punches_attributeInterpolationMarkup.attributeBinding(attrName, attrValue, node) || attributeBinding(attrName, attrValue, node);\n                    if (!dataBindAttribute) {\n                        dataBindAttribute = attrBinding\n                    } else {\n                        dataBindAttribute += ',' + attrBinding;\n                    }\n                    node.setAttribute(dataBind, dataBindAttribute);\n                    // Using removeAttribute instead of removeAttributeNode because IE clears the\n                    // class if you use removeAttributeNode to remove the id.\n                    node.removeAttribute(attr.name);\n                }\n            }\n        }\n    }\n}\n\nfunction attributeBinding(name, value, node) {\n    if (ko.getBindingHandler(name)) {\n        return name + ':' + value;\n    } else {\n        return 'attr.' + name + ':' + value;\n    }\n}\n\nfunction enableAttributeInterpolationMarkup() {\n    addNodePreprocessor(attributeInterpolationMarkerPreprocessor);\n}\n\nvar ko_punches_attributeInterpolationMarkup = ko_punches.attributeInterpolationMarkup = {\n    preprocessor: attributeInterpolationMarkerPreprocessor,\n    enable: enableAttributeInterpolationMarkup,\n    attributeBinding: attributeBinding\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/knockout.punches/index.js\n ** module id = 152\n ** module chunks = 1 2 4 6 7 8 9 10 12 17 18 22 23 24 27 29 30 31 35 36 37 42 53\n **/","/**\n * This script gives you the zone info key representing your device's time zone setting.\n *\n * @name jsTimezoneDetect\n * @version 1.0.5\n * @author Jon Nylander\n * @license MIT License - http://www.opensource.org/licenses/mit-license.php\n *\n * For usage and examples, visit:\n * http://pellepim.bitbucket.org/jstz/\n *\n * Copyright (c) Jon Nylander\n */\n\n/*jslint undef: true */\n/*global console, exports*/\n\n(function(root) {\n  /**\n   * Namespace to hold all the code for timezone detection.\n   */\n  var jstz = (function () {\n      'use strict';\n      var HEMISPHERE_SOUTH = 's',\n          \n          /**\n           * Gets the offset in minutes from UTC for a certain date.\n           * @param {Date} date\n           * @returns {Number}\n           */\n          get_date_offset = function (date) {\n              var offset = -date.getTimezoneOffset();\n              return (offset !== null ? offset : 0);\n          },\n\n          get_date = function (year, month, date) {\n              var d = new Date();\n              if (year !== undefined) {\n                d.setFullYear(year);\n              }\n              d.setMonth(month);\n              d.setDate(date);\n              return d;\n          },\n\n          get_january_offset = function (year) {\n              return get_date_offset(get_date(year, 0 ,2));\n          },\n\n          get_june_offset = function (year) {\n              return get_date_offset(get_date(year, 5, 2));\n          },\n\n          /**\n           * Private method.\n           * Checks whether a given date is in daylight saving time.\n           * If the date supplied is after august, we assume that we're checking\n           * for southern hemisphere DST.\n           * @param {Date} date\n           * @returns {Boolean}\n           */\n          date_is_dst = function (date) {\n              var is_southern = date.getMonth() > 7,\n                  base_offset = is_southern ? get_june_offset(date.getFullYear()) : \n                                              get_january_offset(date.getFullYear()),\n                  date_offset = get_date_offset(date),\n                  is_west = base_offset < 0,\n                  dst_offset = base_offset - date_offset;\n                  \n              if (!is_west && !is_southern) {\n                  return dst_offset < 0;\n              }\n\n              return dst_offset !== 0;\n          },\n\n          /**\n           * This function does some basic calculations to create information about\n           * the user's timezone. It uses REFERENCE_YEAR as a solid year for which\n           * the script has been tested rather than depend on the year set by the\n           * client device.\n           *\n           * Returns a key that can be used to do lookups in jstz.olson.timezones.\n           * eg: \"720,1,2\". \n           *\n           * @returns {String}\n           */\n\n          lookup_key = function () {\n              var january_offset = get_january_offset(),\n                  june_offset = get_june_offset(),\n                  diff = january_offset - june_offset;\n\n              if (diff < 0) {\n                  return january_offset + \",1\";\n              } else if (diff > 0) {\n                  return june_offset + \",1,\" + HEMISPHERE_SOUTH;\n              }\n\n              return january_offset + \",0\";\n          },\n\n          /**\n           * Uses get_timezone_info() to formulate a key to use in the olson.timezones dictionary.\n           *\n           * Returns a primitive object on the format:\n           * {'timezone': TimeZone, 'key' : 'the key used to find the TimeZone object'}\n           *\n           * @returns Object\n           */\n          determine = function () {\n              var key = lookup_key();\n              return new jstz.TimeZone(jstz.olson.timezones[key]);\n          },\n\n          /**\n           * This object contains information on when daylight savings starts for\n           * different timezones.\n           *\n           * The list is short for a reason. Often we do not have to be very specific\n           * to single out the correct timezone. But when we do, this list comes in\n           * handy.\n           *\n           * Each value is a date denoting when daylight savings starts for that timezone.\n           */\n          dst_start_for = function (tz_name) {\n\n            var ru_pre_dst_change = new Date(2010, 6, 15, 1, 0, 0, 0), // In 2010 Russia had DST, this allows us to detect Russia :)\n                dst_starts = {\n                    'America/Denver': new Date(2011, 2, 13, 3, 0, 0, 0),\n                    'America/Mazatlan': new Date(2011, 3, 3, 3, 0, 0, 0),\n                    'America/Chicago': new Date(2011, 2, 13, 3, 0, 0, 0),\n                    'America/Mexico_City': new Date(2011, 3, 3, 3, 0, 0, 0),\n                    'America/Asuncion': new Date(2012, 9, 7, 3, 0, 0, 0),\n                    'America/Santiago': new Date(2012, 9, 3, 3, 0, 0, 0),\n                    'America/Campo_Grande': new Date(2012, 9, 21, 5, 0, 0, 0),\n                    'America/Montevideo': new Date(2011, 9, 2, 3, 0, 0, 0),\n                    'America/Sao_Paulo': new Date(2011, 9, 16, 5, 0, 0, 0),\n                    'America/Los_Angeles': new Date(2011, 2, 13, 8, 0, 0, 0),\n                    'America/Santa_Isabel': new Date(2011, 3, 5, 8, 0, 0, 0),\n                    'America/Havana': new Date(2012, 2, 10, 2, 0, 0, 0),\n                    'America/New_York': new Date(2012, 2, 10, 7, 0, 0, 0),\n                    'Europe/Helsinki': new Date(2013, 2, 31, 5, 0, 0, 0),\n                    'Pacific/Auckland': new Date(2011, 8, 26, 7, 0, 0, 0),\n                    'America/Halifax': new Date(2011, 2, 13, 6, 0, 0, 0),\n                    'America/Goose_Bay': new Date(2011, 2, 13, 2, 1, 0, 0),\n                    'America/Miquelon': new Date(2011, 2, 13, 5, 0, 0, 0),\n                    'America/Godthab': new Date(2011, 2, 27, 1, 0, 0, 0),\n                    'Europe/Moscow': ru_pre_dst_change,\n                    'Asia/Amman': new Date(2013, 2, 29, 1, 0, 0, 0),\n                    'Asia/Beirut': new Date(2013, 2, 31, 2, 0, 0, 0),\n                    'Asia/Damascus': new Date(2013, 3, 6, 2, 0, 0, 0),\n                    'Asia/Jerusalem': new Date(2013, 2, 29, 5, 0, 0, 0),\n                    'Asia/Yekaterinburg': ru_pre_dst_change,\n                    'Asia/Omsk': ru_pre_dst_change,\n                    'Asia/Krasnoyarsk': ru_pre_dst_change,\n                    'Asia/Irkutsk': ru_pre_dst_change,\n                    'Asia/Yakutsk': ru_pre_dst_change,\n                    'Asia/Vladivostok': ru_pre_dst_change,\n                    'Asia/Baku': new Date(2013, 2, 31, 4, 0, 0),\n                    'Asia/Yerevan': new Date(2013, 2, 31, 3, 0, 0),\n                    'Asia/Kamchatka': ru_pre_dst_change,\n                    'Asia/Gaza': new Date(2010, 2, 27, 4, 0, 0),\n                    'Africa/Cairo': new Date(2010, 4, 1, 3, 0, 0),\n                    'Europe/Minsk': ru_pre_dst_change,\n                    'Pacific/Apia': new Date(2010, 10, 1, 1, 0, 0, 0),\n                    'Pacific/Fiji': new Date(2010, 11, 1, 0, 0, 0),\n                    'Australia/Perth': new Date(2008, 10, 1, 1, 0, 0, 0)\n                };\n\n              return dst_starts[tz_name];\n          };\n\n      return {\n          determine: determine,\n          date_is_dst: date_is_dst,\n          dst_start_for: dst_start_for \n      };\n  }());\n\n  /**\n   * Simple object to perform ambiguity check and to return name of time zone.\n   */\n  jstz.TimeZone = function (tz_name) {\n      'use strict';\n        /**\n         * The keys in this object are timezones that we know may be ambiguous after\n         * a preliminary scan through the olson_tz object.\n         *\n         * The array of timezones to compare must be in the order that daylight savings\n         * starts for the regions.\n         */\n      var AMBIGUITIES = {\n              'America/Denver':       ['America/Denver', 'America/Mazatlan'],\n              'America/Chicago':      ['America/Chicago', 'America/Mexico_City'],\n              'America/Santiago':     ['America/Santiago', 'America/Asuncion', 'America/Campo_Grande'],\n              'America/Montevideo':   ['America/Montevideo', 'America/Sao_Paulo'],\n              'Asia/Beirut':          ['Asia/Amman', 'Asia/Jerusalem', 'Asia/Beirut', 'Europe/Helsinki','Asia/Damascus'],\n              'Pacific/Auckland':     ['Pacific/Auckland', 'Pacific/Fiji'],\n              'America/Los_Angeles':  ['America/Los_Angeles', 'America/Santa_Isabel'],\n              'America/New_York':     ['America/Havana', 'America/New_York'],\n              'America/Halifax':      ['America/Goose_Bay', 'America/Halifax'],\n              'America/Godthab':      ['America/Miquelon', 'America/Godthab'],\n              'Asia/Dubai':           ['Europe/Moscow'],\n              'Asia/Dhaka':           ['Asia/Yekaterinburg'],\n              'Asia/Jakarta':         ['Asia/Omsk'],\n              'Asia/Shanghai':        ['Asia/Krasnoyarsk', 'Australia/Perth'],\n              'Asia/Tokyo':           ['Asia/Irkutsk'],\n              'Australia/Brisbane':   ['Asia/Yakutsk'],\n              'Pacific/Noumea':       ['Asia/Vladivostok'],\n              'Pacific/Tarawa':       ['Asia/Kamchatka', 'Pacific/Fiji'],\n              'Pacific/Tongatapu':    ['Pacific/Apia'],\n              'Asia/Baghdad':         ['Europe/Minsk'],\n              'Asia/Baku':            ['Asia/Yerevan','Asia/Baku'],\n              'Africa/Johannesburg':  ['Asia/Gaza', 'Africa/Cairo']\n          },\n\n          timezone_name = tz_name,\n          \n          /**\n           * Checks if a timezone has possible ambiguities. I.e timezones that are similar.\n           *\n           * For example, if the preliminary scan determines that we're in America/Denver.\n           * We double check here that we're really there and not in America/Mazatlan.\n           *\n           * This is done by checking known dates for when daylight savings start for different\n           * timezones during 2010 and 2011.\n           */\n          ambiguity_check = function () {\n              var ambiguity_list = AMBIGUITIES[timezone_name],\n                  length = ambiguity_list.length,\n                  i = 0,\n                  tz = ambiguity_list[0];\n\n              for (; i < length; i += 1) {\n                  tz = ambiguity_list[i];\n\n                  if (jstz.date_is_dst(jstz.dst_start_for(tz))) {\n                      timezone_name = tz;\n                      return;\n                  }\n              }\n          },\n\n          /**\n           * Checks if it is possible that the timezone is ambiguous.\n           */\n          is_ambiguous = function () {\n              return typeof (AMBIGUITIES[timezone_name]) !== 'undefined';\n          };\n\n      if (is_ambiguous()) {\n          ambiguity_check();\n      }\n\n      return {\n          name: function () {\n              return timezone_name;\n          }\n      };\n  };\n\n  jstz.olson = {};\n\n  /*\n   * The keys in this dictionary are comma separated as such:\n   *\n   * First the offset compared to UTC time in minutes.\n   *\n   * Then a flag which is 0 if the timezone does not take daylight savings into account and 1 if it\n   * does.\n   *\n   * Thirdly an optional 's' signifies that the timezone is in the southern hemisphere,\n   * only interesting for timezones with DST.\n   *\n   * The mapped arrays is used for constructing the jstz.TimeZone object from within\n   * jstz.determine_timezone();\n   */\n  jstz.olson.timezones = {\n      '-720,0'   : 'Pacific/Majuro',\n      '-660,0'   : 'Pacific/Pago_Pago',\n      '-600,1'   : 'America/Adak',\n      '-600,0'   : 'Pacific/Honolulu',\n      '-570,0'   : 'Pacific/Marquesas',\n      '-540,0'   : 'Pacific/Gambier',\n      '-540,1'   : 'America/Anchorage',\n      '-480,1'   : 'America/Los_Angeles',\n      '-480,0'   : 'Pacific/Pitcairn',\n      '-420,0'   : 'America/Phoenix',\n      '-420,1'   : 'America/Denver',\n      '-360,0'   : 'America/Guatemala',\n      '-360,1'   : 'America/Chicago',\n      '-360,1,s' : 'Pacific/Easter',\n      '-300,0'   : 'America/Bogota',\n      '-300,1'   : 'America/New_York',\n      '-270,0'   : 'America/Caracas',\n      '-240,1'   : 'America/Halifax',\n      '-240,0'   : 'America/Santo_Domingo',\n      '-240,1,s' : 'America/Santiago',\n      '-210,1'   : 'America/St_Johns',\n      '-180,1'   : 'America/Godthab',\n      '-180,0'   : 'America/Argentina/Buenos_Aires',\n      '-180,1,s' : 'America/Montevideo',\n      '-120,0'   : 'America/Noronha',\n      '-120,1'   : 'America/Noronha',\n      '-60,1'    : 'Atlantic/Azores',\n      '-60,0'    : 'Atlantic/Cape_Verde',\n      '0,0'      : 'UTC',\n      '0,1'      : 'Europe/London',\n      '60,1'     : 'Europe/Berlin',\n      '60,0'     : 'Africa/Lagos',\n      '60,1,s'   : 'Africa/Windhoek',\n      '120,1'    : 'Asia/Beirut',\n      '120,0'    : 'Africa/Johannesburg',\n      '180,0'    : 'Asia/Baghdad',\n      '180,1'    : 'Europe/Moscow',\n      '210,1'    : 'Asia/Tehran',\n      '240,0'    : 'Asia/Dubai',\n      '240,1'    : 'Asia/Baku',\n      '270,0'    : 'Asia/Kabul',\n      '300,1'    : 'Asia/Yekaterinburg',\n      '300,0'    : 'Asia/Karachi',\n      '330,0'    : 'Asia/Kolkata',\n      '345,0'    : 'Asia/Kathmandu',\n      '360,0'    : 'Asia/Dhaka',\n      '360,1'    : 'Asia/Omsk',\n      '390,0'    : 'Asia/Rangoon',\n      '420,1'    : 'Asia/Krasnoyarsk',\n      '420,0'    : 'Asia/Jakarta',\n      '480,0'    : 'Asia/Shanghai',\n      '480,1'    : 'Asia/Irkutsk',\n      '525,0'    : 'Australia/Eucla',\n      '525,1,s'  : 'Australia/Eucla',\n      '540,1'    : 'Asia/Yakutsk',\n      '540,0'    : 'Asia/Tokyo',\n      '570,0'    : 'Australia/Darwin',\n      '570,1,s'  : 'Australia/Adelaide',\n      '600,0'    : 'Australia/Brisbane',\n      '600,1'    : 'Asia/Vladivostok',\n      '600,1,s'  : 'Australia/Sydney',\n      '630,1,s'  : 'Australia/Lord_Howe',\n      '660,1'    : 'Asia/Kamchatka',\n      '660,0'    : 'Pacific/Noumea',\n      '690,0'    : 'Pacific/Norfolk',\n      '720,1,s'  : 'Pacific/Auckland',\n      '720,0'    : 'Pacific/Tarawa',\n      '765,1,s'  : 'Pacific/Chatham',\n      '780,0'    : 'Pacific/Tongatapu',\n      '780,1,s'  : 'Pacific/Apia',\n      '840,0'    : 'Pacific/Kiritimati'\n  };\n\n  if (typeof exports !== 'undefined') {\n    exports.jstz = jstz;\n  } else {\n    root.jstz = jstz;\n  }\n})(this);\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/jstimezonedetect/jstz.js\n ** module id = 166\n ** module chunks = 4\n **/","/**\n* Components and binding handlers for the dashboard \"onboarding\" interface.\n* Includes a custom component for OSF project typeahead search, as well\n* the viewmodels for each of the individual onboarding widgets.\n*/\n'use strict';\n\n// CSS\nrequire('css/onboarding.css');\nrequire('css/typeahead.css');\n\nvar Dropzone = require('dropzone');\nvar Raven = require('raven-js');\nvar ko = require('knockout');\nvar $ = require('jquery');\nrequire('typeahead.js');\n\n\nrequire('js/projectCreator.js');\nvar waterbutler = require('js/waterbutler');\nvar $osf = require('js/osfHelpers');\n\nfunction noop() {}\nvar MAX_RESULTS = 14;\nvar DEFAULT_FETCH_URL = '/api/v1/dashboard/get_nodes/';\nvar CREATE_URL = '/api/v1/project/new/';\n\n\nvar substringMatcher = function(strs) {\n    return function findMatches(q, cb) {\n\n        // an array that will be populated with substring matches\n        var matches = [];\n\n        // regex used to determine if a string contains the substring `q`\n\n        var substrRegex = new RegExp(q, 'i');\n        var count = 0;\n        // iterate through the pool of strings and for any string that\n        // contains the substring `q`, add it to the `matches` array\n        $.each(strs, function(i, str) {\n            if (substrRegex.test(str.name)) {\n                count += 1;\n                // the typeahead jQuery plugin expects suggestions to a\n                // JavaScript object, refer to typeahead docs for more info\n                matches.push({ value: str });\n\n                //alex's hack to limit number of results\n                if(count > MAX_RESULTS){\n                    return false;\n                }\n                // above you can return name or a dict of name/node id,\n            }\n            // add an event to the input box -- listens for keystrokes and if there is a keystroke then it should clearrr\n            //\n        });\n\n        cb(matches);\n    };\n};\n\nfunction initTypeahead(element, nodes, viewModel, params){\n    var $inputElem = $(element);\n    var myProjects = nodes.map(serializeNode);\n    $inputElem.typeahead({\n        hint: false,\n        highlight: true,\n        minLength: 0\n    },\n    {\n        // name: 'projectSearch' + nodeType + namespace,\n        displayKey: function(data) {\n            return data.value.name;\n        },\n        templates: {\n            suggestion: function(data) {\n                return '<p>' + data.value.name + '</p> ' +\n                        '<p><small class=\"m-l-md text-muted\">'+\n                                        'modified ' + data.value.dateModified.local + '</small></p>';\n            }\n        },\n        source: substringMatcher(myProjects)\n    });\n\n    $inputElem.bind('typeahead:selected', function(obj, datum) {\n        // Call the parent viewModel's onSelected\n        var onSelected = params.onSelected || viewModel.onSelected;\n        onSelected(datum.value);\n    });\n    var onFetched = ko.unwrap(params.onFetched);\n    if (onFetched) {\n        onFetched(myProjects);\n    }\n    return $inputElem;\n}\n\n// Defines the format of items in the typeahead data source\nfunction serializeNode(node) {\n    var dateModified = new $osf.FormattableDate(node.date_modified);\n    return {\n        name: $osf.htmlDecode(node.title),\n        id: node.id,\n        dateModified: dateModified,\n        urls: {\n            web: node.url,\n            api: node.api_url,\n            register: node.url + 'register',\n            files: node.url + 'files/',\n            children: node.api_url + 'get_children/?permissions=write'\n        }\n    };\n}\n\n/**\n    * Binding handler for attaching an OSF typeahead search input.\n    * Takes an optional parameter onSelected, which is called when a project\n    * is selected.\n    *\n    * Params:\n    *  data: An Array of data or a URL where to fetch nodes. Defaults to the dashboard node endpoint.\n    *  onSelected: Callback for when a node is selected.\n    *  onFetched: Callback for when nodes are fetched from server.\n    *\n    * Example:\n    *\n    *  <div data-bind=\"projectSearch: {url: '/api/v1/dashboard/get_nodes/',\n    *                                     onSelected: onSelected}></div>\n    */\nko.bindingHandlers.projectSearch = {\n    update: function(element, valueAccessor, allBindings, viewModel) {\n        var params = valueAccessor() || {};\n        // Either an Array of nodes or a URL\n        var nodesOrURL = ko.unwrap(params.data);\n        if (params.clearOn && params.clearOn()) {\n            $(element).typeahead('destroy');\n            return;\n        }\n        if (Array.isArray(nodesOrURL)) {\n            var nodes = params.data;\n            // Compute relevant URLs for each search result.\n            initTypeahead(element, nodes, viewModel, params);\n        } else if (typeof nodesOrURL === 'string') { // params.data is a URL\n            var url = nodesOrURL;\n            var request = $.getJSON(url, function (response) {\n                // Compute relevant URLs for each search result\n                initTypeahead(element, response.nodes, viewModel, params);\n            });\n            request.fail(function(xhr, textStatus, error) {\n                Raven.captureMessage('Could not fetch dashboard nodes.', {\n                    url: url, textStatus: textStatus, error: error\n                });\n            });\n        }\n    }\n};\n\n/**\n    * ViewModel for the OSF project typeahead search widget.\n    *\n    * Template: osf-project-search element in components/dashboard_templates.mako\n    *\n    * Params:\n    *  onSubmit: Function to call on submit. Receives the selected item.\n    *  onSelected: Function to call when a typeahead selection is made.\n    *  onFetchedComponents: Function to call when components for the selected project\n    *      are fetched.\n    *  onClear: Function to call when the clear button is clicked.\n    */\nfunction ProjectSearchViewModel(params) {\n    var self = this;\n    self.params = params || {};\n    self.heading = params.heading;\n    // Data passed to the project typehead\n    self.data = params.data  || DEFAULT_FETCH_URL;\n    self.submitText = params.submitText || 'Submit';\n    self.projectPlaceholder = params.projectPlaceholder || 'Type to search for a project';\n    self.componentPlaceholder = params.componentPlaceholder || 'Optional: Type to search for a component';\n\n    /* Observables */\n    // If params.enableComponents is passed in, use that value, otherwise default to true\n    var enableComps = params.enableComponents;\n    self.enableComponents = typeof enableComps !== 'undefined' ? enableComps : true;\n    self.showComponents = ko.observable(self.enableComponents);\n    self.selectedProject = ko.observable(null);\n    self.selectedComponent = ko.observable(null);\n    self.btnClass = params.btnClass || 'btn btn-primary pull-right';\n    // The current user input. we store these so that we can show an error message\n    // if the user clicks \"Submit\" when their selection isn't complete\n    self.projectInput = ko.observable('');\n    self.componentInput = ko.observable('');\n\n    /* Computeds */\n    self.hasSelectedProject = ko.computed(function() {\n        return self.selectedProject() !== null;\n    });\n    self.hasSelectedComponent = ko.computed(function() {\n        return self.selectedComponent() !== null;\n    });\n\n    self.showSubmit = ko.computed(function() {\n        return self.hasSelectedProject();\n    });\n\n    // Used by the projectSearch binding to trigger teardown of the component typeahead\n    // when the clear button is clicked\n    self.cleared = ko.computed(function() {\n        return self.selectedProject() == null;\n    });\n\n    // Project name to display in the text input\n    self.selectedProjectName = ko.computed(function() {\n        return self.selectedProject() ? self.selectedProject().name : '';\n    });\n    // Component name to display in the text input\n    self.selectedComponentName = ko.computed(function() {\n        return self.selectedComponent() ? self.selectedComponent().name : self.componentInput();\n    });\n\n    self.componentURL = ko.computed(function() {\n        return self.selectedProject() ? self.selectedProject().urls.children : null;\n    });\n\n    /* Functions */\n    self.onSubmit = function() {\n        var func = params.onSubmit || noop;\n        func(self.selectedProject(), self.selectedComponent(), self.projectInput(), self.componentInput());\n    };\n    self.onSelectedProject = function(selected) {\n        self.selectedProject(selected);\n        self.projectInput(selected.name);\n        var func = params.onSelected || noop;\n        func(selected);\n    };\n    self.onSelectedComponent = function(selected) {\n        self.selectedComponent(selected);\n        self.componentInput(selected.name);\n        var func = params.onSelected || noop;\n        func(selected);\n    };\n    self.onFetchedComponents = function(components) {\n        // Show component search only if selected project has components\n        self.showComponents(Boolean(components.length));\n        var func = params.onFetchedComponents || noop;\n        func(components);\n    };\n    self.clearSearch = function() {\n        self.selectedComponent(null);\n        self.componentInput('');\n        self.selectedProject(null);\n        self.projectInput('');\n        // This must be set after clearing selectedProject\n        // to avoid sending extra request in the projectSearch\n        // binding handler\n        self.showComponents(true);\n        var func = params.onClear || noop;\n        func();\n    };\n    self.clearComponentSearch = function() {\n        self.selectedComponent(null);\n        self.componentInput('');\n        self.showComponents(true);\n    };\n}\n\nko.components.register('osf-project-search', {\n    viewModel: ProjectSearchViewModel,\n    template: {element: 'osf-project-search'}\n});\n\n\n///// Register /////\n\n/**\n    * ViewModel for the onboarding project registration component.\n    *\n    * Template: osf-ob-register element in components/dashboard_templates.mako\n    */\nfunction OBRegisterViewModel(params) {\n    var self = this;\n    self.params = params || {};\n    self.data = params.data || DEFAULT_FETCH_URL;\n    /* Observables */\n    self.isOpen = ko.observable(false);\n    /* Functions */\n    self.open = function() {\n        self.isOpen(true);\n    };\n    self.close = function() {\n        self.isOpen(false);\n    };\n    self.toggle = function() {\n        if (!self.isOpen()) {\n            self.open();\n        } else {\n            self.close();\n        }\n    };\n    /* On submit, redirect to the selected page's registration page */\n    self.onRegisterSubmit = function(selected) {\n        window.location = selected.urls.register;\n    };\n}\n\nko.components.register('osf-ob-register', {\n    viewModel: OBRegisterViewModel,\n    template: {element: 'osf-ob-register'}\n});\n\n///// UPLOADER //////\nvar iconList = [\n'_blank',\n'_page',\n'aac',\n'ai',\n'aiff',\n'avi',\n'bmp',\n'c',\n'cpp',\n'css',\n'dat',\n'dmg',\n'doc',\n'dotx',\n'dwg',\n'dxf',\n'eps',\n'exe',\n'flv',\n'gif',\n'h',\n'hpp',\n'html',\n'ics',\n'iso',\n'java',\n'jpg',\n'js',\n'key',\n'less',\n'mid',\n'mp3',\n'mp4',\n'mpg',\n'odf',\n'ods',\n'odt',\n'otp',\n'ots',\n'ott',\n'pdf',\n'php',\n'png',\n'ppt',\n'psd',\n'py',\n'qt',\n'rar',\n'rb',\n'rtf',\n'sass',\n'scss',\n'sql',\n'tga',\n'tgz',\n'tiff',\n'txt',\n'wav',\n'xls',\n'xlsx',\n'xml',\n'yml',\n'zip'\n];\n\n// this takes a filename and finds the icon for it\nfunction getFiletypeIcon(file_name){\n    var baseUrl ='/static/img/upload_icons/';\n    var ext = file_name.split('.').pop().toLowerCase();\n    if(iconList.indexOf(ext)  !== -1){\n        return baseUrl + ext + '.png';\n    }else{\n        return baseUrl + '_blank.png';\n    }\n}\n\n// if has an extention return it, else return the last three chars\nfunction getExtension(string){\n    if(string.indexOf('.') !== -1){\n        return string.split('.').pop().toLowerCase();\n    }else{\n        return string.substring(string.length - 3);\n    }\n}\n\n// truncate long file names\nfunction truncateFilename(string){\n    var ext = getExtension(string);\n    if (string.length > 40){\n        return string.substring(0, 40-ext.length-3) + '...' + ext;\n    } else{\n        return string;\n    }\n}\n\n/**\n    * ViewModel for the onboarding uploader\n    */\nfunction OBUploaderViewModel(params) {\n    var self = this;\n    self.params = params || {};\n    self.selector = self.params.selector || '#obDropzone';\n    self.data = params.data || DEFAULT_FETCH_URL;\n    /* Observables */\n    self.isOpen = ko.observable(true);\n    self.progress = ko.observable(0);\n    self.showProgress = ko.observable(false);\n    self.errorMessage = ko.observable('');\n    self.enableUpload = ko.observable(true);\n    self.filename = ko.observable('');\n    self.iconSrc = ko.observable('');\n    self.newProjectName = ko.observable(null);\n    self.uploadCount = ko.observable(1);\n    self.disableComponents = ko.observable(false);\n    self.createAndUpload = ko.observable(true);\n    // Flashed messages\n    self.message = ko.observable('');\n    self.messageClass = ko.observable('text-info');\n    // The target node to upload to to\n    self.target = ko.observable(null);\n    //Boolean to track if upload was successful\n    self.success = false;\n    /* Functions */\n    self.toggle = function() {\n        self.isOpen(!self.isOpen());\n    };\n    self.startUpload = function(selectedProject, selectedComponent, projectInput, componentInput) {\n        if (!selectedComponent && componentInput.length) {\n            var msg = 'Not a valid component selection. Clear your search or select a component from the dropdown.';\n            self.changeMessage(msg, 'text-warning');\n            return false;\n        }\n        if (self.dropzone.getUploadingFiles().length) {\n            self.changeMessage('Please wait until the pending uploads are finished.');\n            return false;\n        }\n        if (!self.dropzone.getQueuedFiles().length) {\n            self.changeMessage('Please select at least one file to upload.', 'text-danger');\n            return false;\n        }\n        var selected = selectedComponent || selectedProject;\n        self.target(selected);\n        self.clearMessages();\n        self.showProgress(true);\n        self.dropzone.options.url = function(files) {\n            //Files is always an array but we only support uploading a single file at once\n            var file = files[0];\n            return waterbutler.buildUploadUrl('/', 'osfstorage', selected.id, file);\n        };\n        self.dropzone.processQueue(); // Tell Dropzone to process all queued files.\n    };\n    self.clearMessages = function() {\n        self.message('');\n        self.messageClass('text-info');\n    };\n\n    self.showCreateAndUpload = function() {\n        self.clearMessages();\n        self.createAndUpload(true);\n    };\n\n    self.hideCreateAndUpload = function(selected) {\n        self.clearMessages();\n        self.createAndUpload(false);\n    };\n\n    self.clearDropzone = function() {\n        if (self.dropzone.getUploadingFiles().length) {\n            self.changeMessage('Upload canceled.', 'text-info');\n        } else {\n            self.clearMessages();\n        }\n        self.enableUpload(true);\n        // Pass true so that pending uploads are canceled\n        self.dropzone.removeAllFiles(true);\n        self.filename('');\n        self.iconSrc('');\n        self.progress = ko.observable(0);\n        self.showProgress(false);\n        self.uploadCount(1);\n    };\n    self.onFetchedComponents = function(components) {\n        if (!components.length) {\n            self.disableComponents(true);\n        }\n    };\n    /** Change the flashed message. */\n    self.changeMessage = function(text, css, timeout) {\n        self.message(text);\n        var cssClass = css || 'text-info';\n        self.messageClass(cssClass);\n        if (timeout) {\n            // Reset message after timeout period\n            setTimeout(function() {\n                self.clearMessages();\n            }, timeout);\n        }\n    };\n\n    var dropzoneOpts = {\n\n        sending: function(file, xhr) {\n            //Inject Bearer token\n            xhr = $osf.setXHRAuthorization(xhr);\n            //Hack to remove webkitheaders\n            var _send = xhr.send;\n            xhr.send = function() {\n                _send.call(xhr, file);\n            };\n        },\n\n        clickable: '#obDropzone',\n        url: '/', // specified per upload\n        autoProcessQueue: false,\n        createImageThumbnails: false,\n        //over\n        maxFiles: 9001,\n        uploadMultiple: false,\n        //in mib\n        maxFilesize: 128,\n\n        acceptDirectories: false,\n\n        method: 'PUT',\n        uploadprogress: function(file, progress) { // progress bar update\n            self.progress(progress);\n        },\n        parallelUploads: 1,\n        // Don't use dropzone's default preview\n        previewsContainer: false,\n        // Custom error messages\n        dictFileTooBig: 'File is too big ({{filesize}} MB). Max filesize: {{maxFilesize}} MB.',\n        // Set up listeners on initialization\n        init: function() {\n            var dropzone = this;\n\n            // file add error logic\n            this.on('error', function(file, message){\n                dropzone.removeFile(file);\n                if (dropzone.files.length === 0){\n                    self.enableUpload(true);\n                    dropzone.removeAllFiles(true);\n                }\n\n                if(message.message) {\n                    message = JSON.parse(message.message);\n                }\n\n                // Use OSF-provided error message if possible\n                // Otherwise, use generic message\n                var msg = message.message_long || message;\n                if (msg === 'Server responded with 0 code.' || msg.indexOf('409') !== -1) {\n                    msg = 'Could not upload file. The file may be invalid.';\n                }\n                self.changeMessage(msg, 'text-danger');\n            });\n            this.on('drop',function(){ // clear errors on drop or click\n                self.clearMessages();\n            });\n            // upload and process queue logic\n            this.on('success',function(){\n                self.filename(self.uploadCount() + ' / ' + dropzone.files.length + ' files');\n                dropzone.processQueue(); // this is a bit hackish -- it fails to process full queue but this ensures it runs the process again after each success.\n                var oldCount = self.uploadCount();\n                self.uploadCount(oldCount + 1);\n\n                if(self.uploadCount() > dropzone.files.length){ // when finished redirect to project/component page where uploaded.\n                    self.success = true;\n                    self.changeMessage('Success!', 'text-success');\n                    window.location = self.target().urls.files;\n                }\n            });\n\n            // add file logic and dropzone to file display swap\n            this.on('addedfile', function(file) {\n                if(dropzone.files.length > 1){\n                    self.iconSrc('/static/img/upload_icons/multiple_blank.png');\n                    self.filename(dropzone.files.length + ' files');\n                }else{\n                    var fileName = truncateFilename(dropzone.files[0].name);\n                    self.iconSrc(getFiletypeIcon(fileName));\n                    self.filename(fileName);\n                }\n                self.enableUpload(false);\n            });\n        }\n    };\n    self.dropzone = new Dropzone(self.selector, dropzoneOpts);\n\n    //Drag & drop is non-functional in IE; change instructional header to indicate this to the user.\n    if($osf.isIE()){\n        $('#obDropzone-header').replaceWith('<h4 id=\\'obDropzone-header\\'>1. Click below to select file</h4>');\n    }\n\n    //stop user from leaving if file is staged for upload\n    $(window).on('beforeunload', function() {\n        if(!self.enableUpload() && !self.success) {\n            return 'You have a pending upload. If you leave ' +\n                'the page now, your file will not be stored.';\n        }\n    });\n\n    self.submitCreateAndUpload = function() {\n        if (!self.dropzone.getQueuedFiles().length) {\n            self.changeMessage('Please select at least one file to upload.', 'text-danger');\n            return false;\n        }\n        if (self.newProjectName() === null || self.newProjectName().trim() === '') {\n            self.changeMessage('Please select a project.', 'text-danger');\n            return false;\n        }\n        if (self.newProjectName() && self.dropzone.getQueuedFiles().length !== 0) {\n            var request = $osf.postJSON(\n                CREATE_URL,\n                {\n                    title: self.newProjectName()\n                }\n            );\n            request.done(self.createSuccess);\n            request.fail(self.createFailure);\n        }\n    };\n\n    self.createSuccess = function(response) {\n        var node = serializeNode(response.newNode);\n        self.startUpload(node, self.selectedComponent, node.title, '');\n    };\n\n    self.createFailure = function(xhr, textStatus, error) {\n         Raven.captureMessage('Could not create a new project.', {\n            textStatus: textStatus,\n            error: error\n         });\n    };\n}\nko.components.register('osf-ob-uploader', {\n    viewModel: OBUploaderViewModel,\n    template: {element: 'osf-ob-uploader'}\n});\n\n\nfunction OBGoToViewModel(params) {\n    var self = this;\n    self.params = params;\n    self.data = params.data || DEFAULT_FETCH_URL;\n    /* Observables */\n    self.isOpen = ko.observable(true);\n    self.hasFocus = ko.observable(true);\n        self.submitText = '<i class=\"fa fa-angle-double-right\"></i> Go';\n    /* Functions */\n    self.toggle = function() {\n        if (!self.isOpen()) {\n            self.isOpen(true);\n            self.hasFocus = ko.observable(true);\n        } else {\n            self.isOpen(false);\n            self.hasFocus = ko.observable(false);\n        }\n    };\n    self.onSubmit = function(selectedProject, selectedComponent) {\n        var node = selectedComponent || selectedProject;\n        window.location = node.urls.web;\n    };\n}\n\nko.components.register('osf-ob-goto', {\n    viewModel: OBGoToViewModel,\n    template: {element: 'osf-ob-goto'}\n});\n\n\nfunction ProjectCreateViewModel(response) {\n    var self = this;\n    self.isOpen = ko.observable(false);\n    self.focus = ko.observable(false);\n    self.toggle = function() {\n        self.isOpen(!self.isOpen());\n        self.focus(self.isOpen());\n    };\n    self.nodes = response.data;\n}\n\nko.components.register('osf-ob-create', {\n    viewModel: ProjectCreateViewModel,\n    template: {element: 'osf-ob-create'}\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/onboarder.js\n ** module id = 167\n ** module chunks = 4\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/onboarding.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!/Users/laurenbarker/GitHub/osf.io/node_modules/style-loader/addStyles.js\")(content, {});\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tmodule.hot.accept(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/onboarding.css\", function() {\n\t\tvar newContent = require(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/onboarding.css\");\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\tupdate(newContent);\n\t});\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/css/onboarding.css\n ** module id = 168\n ** module chunks = 4\n **/","exports = module.exports = require(\"/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/cssToString.js\")();\nexports.push([module.id, \"/* class css */\\n.ob-heading {\\n\\tdisplay:inline;\\n}\\n\\n.ob-search{\\n\\tposition:relative;\\n}\\n\\n.ob-expand-icon{\\n\\tmargin-top:6px;\\n\\theight: 14px;\\n}\\n\\nul.ob-widget-list {\\n    padding: 0;\\n}\\n\\n.ob-reveal {\\n\\tdisplay: none;\\n}\\n\\n.ob-reveal-btn {\\n\\theight: 100%;\\n\\twidth: 100%;\\n}\\n\\n.ob-dropzone-box {\\n\\tposition:relative;\\n\\theight: 150px;\\n\\twidth: 100%;\\n\\tfont-size: 12px;\\n\\ttext-align: center;\\n\\tcursor: pointer;\\n}\\n\\n.ob-clear-button{\\n\\tposition: absolute;\\n\\tz-index: 1;\\n\\ttop: -5px;\\n\\tright: -12px;\\n}\\n\\n.ob-input {\\n    position: relative;\\n}\\n\\n.ob-clear-uploads-button{\\n\\tposition: relative;\\n\\tz-index: 1;\\n\\ttop: -140px;\\n\\tright: -12px;\\n}\\n\\n.ob-unselectable{\\n\\t-webkit-user-select: none; /* Chrome/Safari */\\n\\t-moz-user-select: none; /* Firefox */\\n\\t-ms-user-select: none; /* IE10+ */\\n\\n\\t/* Rules below not implemented in browsers yet */\\n\\t-o-user-select: none;\\n\\tuser-select: none;\\n}\\n\\n.ob-clear-button:hover{\\n\\tcursor: pointer;\\n}\\n\\n/*this exists to force sizing properly as typeahead tries desperately to overwrite it...*/\\n.twitter-typeahead{\\n\\tdisplay: block !important;\\n}\\n\\n.ob-dropzone{\\n\\tbackground-image: url(\\\"/static/img/upload.png\\\");\\n\\tbackground-repeat:no-repeat;\\n\\tbackground-size: 60px 60px;\\n\\n\\tbackground-position:center;\\n}\\n\\ndiv.ob-dropzone-selected{\\n\\tborder: solid 2px #3C763D;\\n\\tbackground-color:  #f5f5f5;\\n}\\n\\nimg.ob-dropzone-icon{\\n\\theight:90px;\\n\\tmargin-left:auto;\\n\\tmargin-right:auto;\\n}\\n\\n.ob-upload-progress {\\n\\ttext-align: center;\\n}\\n\\n.resize-vertical{\\n    resize:vertical;\\n}\", \"\"]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/css-loader!../website/static/css/onboarding.css\n ** module id = 169\n ** module chunks = 4\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/typeahead.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!/Users/laurenbarker/GitHub/osf.io/node_modules/style-loader/addStyles.js\")(content, {});\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tmodule.hot.accept(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/typeahead.css\", function() {\n\t\tvar newContent = require(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/typeahead.css\");\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\tupdate(newContent);\n\t});\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/css/typeahead.css\n ** module id = 170\n ** module chunks = 4\n **/","exports = module.exports = require(\"/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/cssToString.js\")();\nexports.push([module.id, \"/* Typeahead autocomplete box */\\n\\ninput.typeahead.tt-input {\\n    width: 100%;\\n    height: 110%;\\n}\\n\\n.organize-project-controls span.twitter-typeahead {\\n    width: 100%;\\n\\n}\\n\\n/* Typeahead scaffolding */\\n/* ----------- */\\n\\n.tt-dropdown-menu,\\n.gist {\\n    text-align: left;\\n}\\n\\n/* Typeahead base styles */\\n/* ----------- */\\n\\n.typeahead,\\n.tt-query,\\n.tt-hint {\\n    width: 100%;\\n    height: 30px;\\n    padding: 8px 12px;\\n    font-size: 14px;\\n    border: 2px solid #ccc;\\n    -webkit-border-radius: 8px;\\n    -moz-border-radius: 8px;\\n    border-radius: 8px;\\n    outline: none;\\n}\\n\\n.typeahead {\\n    background-color: #fff;\\n}\\n\\n.tt-query {\\n    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\\n    -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\\n}\\n\\n.tt-hint {\\n    color: #999;\\n\\tpadding-top: 21px;\\n}\\n\\n.tt-dropdown-menu {\\n    /*display:inline-block;*/\\n    width:100%;\\n    /*width: 422px;*/\\n    padding: 8px 0;\\n    background-color: #fff;\\n    border: 1px solid #ccc;\\n    border: 1px solid rgba(0, 0, 0, 0.2);\\n    -webkit-border-radius: 8px;\\n    -moz-border-radius: 8px;\\n    border-radius: 8px;\\n    -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, .2);\\n    -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, .2);\\n    box-shadow: 0 5px 10px rgba(0, 0, 0, .2);\\n\\tmargin-top: 12px;\\n\\tcursor: pointer;\\n}\\n\\n.tt-suggestion:hover .text-muted{\\n    color: white;\\n}\\n\\n.tt-suggestion {\\n    padding: 3px 20px;\\n    font-size: 14px;\\n    line-height: 24px;\\n}\\n\\n.tt-suggestion.tt-cursor {\\n    color: #fff;\\n    background-color: #0097cf;\\n\\n}\\n\\n.tt-suggestion p {\\n    margin: 0;\\n}\\n\\n.gist {\\n    font-size: 14px;\\n}\", \"\"]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/css-loader!../website/static/css/typeahead.css\n ** module id = 171\n ** module chunks = 4\n **/","/*!\n * typeahead.js 0.10.5\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            getUniqueId: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            }(),\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            noop: function() {}\n        };\n    }();\n    var VERSION = \"0.10.5\";\n    var tokenizers = function() {\n        \"use strict\";\n        return {\n            nonword: nonword,\n            whitespace: whitespace,\n            obj: {\n                nonword: getObjTokenizer(nonword),\n                whitespace: getObjTokenizer(whitespace)\n            }\n        };\n        function whitespace(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\s+/) : [];\n        }\n        function nonword(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\W+/) : [];\n        }\n        function getObjTokenizer(tokenizer) {\n            return function setKey() {\n                var args = [].slice.call(arguments, 0);\n                return function tokenize(o) {\n                    var tokens = [];\n                    _.each(args, function(k) {\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n                    });\n                    return tokens;\n                };\n            };\n        }\n    }();\n    var LruCache = function() {\n        \"use strict\";\n        function LruCache(maxSize) {\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n            this.reset();\n            if (this.maxSize <= 0) {\n                this.set = this.get = $.noop;\n            }\n        }\n        _.mixin(LruCache.prototype, {\n            set: function set(key, val) {\n                var tailItem = this.list.tail, node;\n                if (this.size >= this.maxSize) {\n                    this.list.remove(tailItem);\n                    delete this.hash[tailItem.key];\n                }\n                if (node = this.hash[key]) {\n                    node.val = val;\n                    this.list.moveToFront(node);\n                } else {\n                    node = new Node(key, val);\n                    this.list.add(node);\n                    this.hash[key] = node;\n                    this.size++;\n                }\n            },\n            get: function get(key) {\n                var node = this.hash[key];\n                if (node) {\n                    this.list.moveToFront(node);\n                    return node.val;\n                }\n            },\n            reset: function reset() {\n                this.size = 0;\n                this.hash = {};\n                this.list = new List();\n            }\n        });\n        function List() {\n            this.head = this.tail = null;\n        }\n        _.mixin(List.prototype, {\n            add: function add(node) {\n                if (this.head) {\n                    node.next = this.head;\n                    this.head.prev = node;\n                }\n                this.head = node;\n                this.tail = this.tail || node;\n            },\n            remove: function remove(node) {\n                node.prev ? node.prev.next = node.next : this.head = node.next;\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;\n            },\n            moveToFront: function(node) {\n                this.remove(node);\n                this.add(node);\n            }\n        });\n        function Node(key, val) {\n            this.key = key;\n            this.val = val;\n            this.prev = this.next = null;\n        }\n        return LruCache;\n    }();\n    var PersistentStorage = function() {\n        \"use strict\";\n        var ls, methods;\n        try {\n            ls = window.localStorage;\n            ls.setItem(\"~~~\", \"!\");\n            ls.removeItem(\"~~~\");\n        } catch (err) {\n            ls = null;\n        }\n        function PersistentStorage(namespace) {\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");\n            this.ttlKey = \"__ttl__\";\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n        }\n        if (ls && window.JSON) {\n            methods = {\n                _prefix: function(key) {\n                    return this.prefix + key;\n                },\n                _ttlKey: function(key) {\n                    return this._prefix(key) + this.ttlKey;\n                },\n                get: function(key) {\n                    if (this.isExpired(key)) {\n                        this.remove(key);\n                    }\n                    return decode(ls.getItem(this._prefix(key)));\n                },\n                set: function(key, val, ttl) {\n                    if (_.isNumber(ttl)) {\n                        ls.setItem(this._ttlKey(key), encode(now() + ttl));\n                    } else {\n                        ls.removeItem(this._ttlKey(key));\n                    }\n                    return ls.setItem(this._prefix(key), encode(val));\n                },\n                remove: function(key) {\n                    ls.removeItem(this._ttlKey(key));\n                    ls.removeItem(this._prefix(key));\n                    return this;\n                },\n                clear: function() {\n                    var i, key, keys = [], len = ls.length;\n                    for (i = 0; i < len; i++) {\n                        if ((key = ls.key(i)).match(this.keyMatcher)) {\n                            keys.push(key.replace(this.keyMatcher, \"\"));\n                        }\n                    }\n                    for (i = keys.length; i--; ) {\n                        this.remove(keys[i]);\n                    }\n                    return this;\n                },\n                isExpired: function(key) {\n                    var ttl = decode(ls.getItem(this._ttlKey(key)));\n                    return _.isNumber(ttl) && now() > ttl ? true : false;\n                }\n            };\n        } else {\n            methods = {\n                get: _.noop,\n                set: _.noop,\n                remove: _.noop,\n                clear: _.noop,\n                isExpired: _.noop\n            };\n        }\n        _.mixin(PersistentStorage.prototype, methods);\n        return PersistentStorage;\n        function now() {\n            return new Date().getTime();\n        }\n        function encode(val) {\n            return JSON.stringify(_.isUndefined(val) ? null : val);\n        }\n        function decode(val) {\n            return JSON.parse(val);\n        }\n    }();\n    var Transport = function() {\n        \"use strict\";\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);\n        function Transport(o) {\n            o = o || {};\n            this.cancelled = false;\n            this.lastUrl = null;\n            this._send = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            this._get = o.rateLimiter ? o.rateLimiter(this._get) : this._get;\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n        }\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n            maxPendingRequests = num;\n        };\n        Transport.resetCache = function resetCache() {\n            sharedCache.reset();\n        };\n        _.mixin(Transport.prototype, {\n            _get: function(url, o, cb) {\n                var that = this, jqXhr;\n                if (this.cancelled || url !== this.lastUrl) {\n                    return;\n                }\n                if (jqXhr = pendingRequests[url]) {\n                    jqXhr.done(done).fail(fail);\n                } else if (pendingRequestsCount < maxPendingRequests) {\n                    pendingRequestsCount++;\n                    pendingRequests[url] = this._send(url, o).done(done).fail(fail).always(always);\n                } else {\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);\n                }\n                function done(resp) {\n                    cb && cb(null, resp);\n                    that._cache.set(url, resp);\n                }\n                function fail() {\n                    cb && cb(true);\n                }\n                function always() {\n                    pendingRequestsCount--;\n                    delete pendingRequests[url];\n                    if (that.onDeckRequestArgs) {\n                        that._get.apply(that, that.onDeckRequestArgs);\n                        that.onDeckRequestArgs = null;\n                    }\n                }\n            },\n            get: function(url, o, cb) {\n                var resp;\n                if (_.isFunction(o)) {\n                    cb = o;\n                    o = {};\n                }\n                this.cancelled = false;\n                this.lastUrl = url;\n                if (resp = this._cache.get(url)) {\n                    _.defer(function() {\n                        cb && cb(null, resp);\n                    });\n                } else {\n                    this._get(url, o, cb);\n                }\n                return !!resp;\n            },\n            cancel: function() {\n                this.cancelled = true;\n            }\n        });\n        return Transport;\n        function callbackToDeferred(fn) {\n            return function customSendWrapper(url, o) {\n                var deferred = $.Deferred();\n                fn(url, o, onSuccess, onError);\n                return deferred;\n                function onSuccess(resp) {\n                    _.defer(function() {\n                        deferred.resolve(resp);\n                    });\n                }\n                function onError(err) {\n                    _.defer(function() {\n                        deferred.reject(err);\n                    });\n                }\n            };\n        }\n    }();\n    var SearchIndex = function() {\n        \"use strict\";\n        function SearchIndex(o) {\n            o = o || {};\n            if (!o.datumTokenizer || !o.queryTokenizer) {\n                $.error(\"datumTokenizer and queryTokenizer are both required\");\n            }\n            this.datumTokenizer = o.datumTokenizer;\n            this.queryTokenizer = o.queryTokenizer;\n            this.reset();\n        }\n        _.mixin(SearchIndex.prototype, {\n            bootstrap: function bootstrap(o) {\n                this.datums = o.datums;\n                this.trie = o.trie;\n            },\n            add: function(data) {\n                var that = this;\n                data = _.isArray(data) ? data : [ data ];\n                _.each(data, function(datum) {\n                    var id, tokens;\n                    id = that.datums.push(datum) - 1;\n                    tokens = normalizeTokens(that.datumTokenizer(datum));\n                    _.each(tokens, function(token) {\n                        var node, chars, ch;\n                        node = that.trie;\n                        chars = token.split(\"\");\n                        while (ch = chars.shift()) {\n                            node = node.children[ch] || (node.children[ch] = newNode());\n                            node.ids.push(id);\n                        }\n                    });\n                });\n            },\n            get: function get(query) {\n                var that = this, tokens, matches;\n                tokens = normalizeTokens(this.queryTokenizer(query));\n                _.each(tokens, function(token) {\n                    var node, chars, ch, ids;\n                    if (matches && matches.length === 0) {\n                        return false;\n                    }\n                    node = that.trie;\n                    chars = token.split(\"\");\n                    while (node && (ch = chars.shift())) {\n                        node = node.children[ch];\n                    }\n                    if (node && chars.length === 0) {\n                        ids = node.ids.slice(0);\n                        matches = matches ? getIntersection(matches, ids) : ids;\n                    } else {\n                        matches = [];\n                        return false;\n                    }\n                });\n                return matches ? _.map(unique(matches), function(id) {\n                    return that.datums[id];\n                }) : [];\n            },\n            reset: function reset() {\n                this.datums = [];\n                this.trie = newNode();\n            },\n            serialize: function serialize() {\n                return {\n                    datums: this.datums,\n                    trie: this.trie\n                };\n            }\n        });\n        return SearchIndex;\n        function normalizeTokens(tokens) {\n            tokens = _.filter(tokens, function(token) {\n                return !!token;\n            });\n            tokens = _.map(tokens, function(token) {\n                return token.toLowerCase();\n            });\n            return tokens;\n        }\n        function newNode() {\n            return {\n                ids: [],\n                children: {}\n            };\n        }\n        function unique(array) {\n            var seen = {}, uniques = [];\n            for (var i = 0, len = array.length; i < len; i++) {\n                if (!seen[array[i]]) {\n                    seen[array[i]] = true;\n                    uniques.push(array[i]);\n                }\n            }\n            return uniques;\n        }\n        function getIntersection(arrayA, arrayB) {\n            var ai = 0, bi = 0, intersection = [];\n            arrayA = arrayA.sort(compare);\n            arrayB = arrayB.sort(compare);\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;\n            while (ai < lenArrayA && bi < lenArrayB) {\n                if (arrayA[ai] < arrayB[bi]) {\n                    ai++;\n                } else if (arrayA[ai] > arrayB[bi]) {\n                    bi++;\n                } else {\n                    intersection.push(arrayA[ai]);\n                    ai++;\n                    bi++;\n                }\n            }\n            return intersection;\n            function compare(a, b) {\n                return a - b;\n            }\n        }\n    }();\n    var oParser = function() {\n        \"use strict\";\n        return {\n            local: getLocal,\n            prefetch: getPrefetch,\n            remote: getRemote\n        };\n        function getLocal(o) {\n            return o.local || null;\n        }\n        function getPrefetch(o) {\n            var prefetch, defaults;\n            defaults = {\n                url: null,\n                thumbprint: \"\",\n                ttl: 24 * 60 * 60 * 1e3,\n                filter: null,\n                ajax: {}\n            };\n            if (prefetch = o.prefetch || null) {\n                prefetch = _.isString(prefetch) ? {\n                    url: prefetch\n                } : prefetch;\n                prefetch = _.mixin(defaults, prefetch);\n                prefetch.thumbprint = VERSION + prefetch.thumbprint;\n                prefetch.ajax.type = prefetch.ajax.type || \"GET\";\n                prefetch.ajax.dataType = prefetch.ajax.dataType || \"json\";\n                !prefetch.url && $.error(\"prefetch requires url to be set\");\n            }\n            return prefetch;\n        }\n        function getRemote(o) {\n            var remote, defaults;\n            defaults = {\n                url: null,\n                cache: true,\n                wildcard: \"%QUERY\",\n                replace: null,\n                rateLimitBy: \"debounce\",\n                rateLimitWait: 300,\n                send: null,\n                filter: null,\n                ajax: {}\n            };\n            if (remote = o.remote || null) {\n                remote = _.isString(remote) ? {\n                    url: remote\n                } : remote;\n                remote = _.mixin(defaults, remote);\n                remote.rateLimiter = /^throttle$/i.test(remote.rateLimitBy) ? byThrottle(remote.rateLimitWait) : byDebounce(remote.rateLimitWait);\n                remote.ajax.type = remote.ajax.type || \"GET\";\n                remote.ajax.dataType = remote.ajax.dataType || \"json\";\n                delete remote.rateLimitBy;\n                delete remote.rateLimitWait;\n                !remote.url && $.error(\"remote requires url to be set\");\n            }\n            return remote;\n            function byDebounce(wait) {\n                return function(fn) {\n                    return _.debounce(fn, wait);\n                };\n            }\n            function byThrottle(wait) {\n                return function(fn) {\n                    return _.throttle(fn, wait);\n                };\n            }\n        }\n    }();\n    (function(root) {\n        \"use strict\";\n        var old, keys;\n        old = root.Bloodhound;\n        keys = {\n            data: \"data\",\n            protocol: \"protocol\",\n            thumbprint: \"thumbprint\"\n        };\n        root.Bloodhound = Bloodhound;\n        function Bloodhound(o) {\n            if (!o || !o.local && !o.prefetch && !o.remote) {\n                $.error(\"one of local, prefetch, or remote is required\");\n            }\n            this.limit = o.limit || 5;\n            this.sorter = getSorter(o.sorter);\n            this.dupDetector = o.dupDetector || ignoreDuplicates;\n            this.local = oParser.local(o);\n            this.prefetch = oParser.prefetch(o);\n            this.remote = oParser.remote(o);\n            this.cacheKey = this.prefetch ? this.prefetch.cacheKey || this.prefetch.url : null;\n            this.index = new SearchIndex({\n                datumTokenizer: o.datumTokenizer,\n                queryTokenizer: o.queryTokenizer\n            });\n            this.storage = this.cacheKey ? new PersistentStorage(this.cacheKey) : null;\n        }\n        Bloodhound.noConflict = function noConflict() {\n            root.Bloodhound = old;\n            return Bloodhound;\n        };\n        Bloodhound.tokenizers = tokenizers;\n        _.mixin(Bloodhound.prototype, {\n            _loadPrefetch: function loadPrefetch(o) {\n                var that = this, serialized, deferred;\n                if (serialized = this._readFromStorage(o.thumbprint)) {\n                    this.index.bootstrap(serialized);\n                    deferred = $.Deferred().resolve();\n                } else {\n                    deferred = $.ajax(o.url, o.ajax).done(handlePrefetchResponse);\n                }\n                return deferred;\n                function handlePrefetchResponse(resp) {\n                    that.clear();\n                    that.add(o.filter ? o.filter(resp) : resp);\n                    that._saveToStorage(that.index.serialize(), o.thumbprint, o.ttl);\n                }\n            },\n            _getFromRemote: function getFromRemote(query, cb) {\n                var that = this, url, uriEncodedQuery;\n                if (!this.transport) {\n                    return;\n                }\n                query = query || \"\";\n                uriEncodedQuery = encodeURIComponent(query);\n                url = this.remote.replace ? this.remote.replace(this.remote.url, query) : this.remote.url.replace(this.remote.wildcard, uriEncodedQuery);\n                return this.transport.get(url, this.remote.ajax, handleRemoteResponse);\n                function handleRemoteResponse(err, resp) {\n                    err ? cb([]) : cb(that.remote.filter ? that.remote.filter(resp) : resp);\n                }\n            },\n            _cancelLastRemoteRequest: function cancelLastRemoteRequest() {\n                this.transport && this.transport.cancel();\n            },\n            _saveToStorage: function saveToStorage(data, thumbprint, ttl) {\n                if (this.storage) {\n                    this.storage.set(keys.data, data, ttl);\n                    this.storage.set(keys.protocol, location.protocol, ttl);\n                    this.storage.set(keys.thumbprint, thumbprint, ttl);\n                }\n            },\n            _readFromStorage: function readFromStorage(thumbprint) {\n                var stored = {}, isExpired;\n                if (this.storage) {\n                    stored.data = this.storage.get(keys.data);\n                    stored.protocol = this.storage.get(keys.protocol);\n                    stored.thumbprint = this.storage.get(keys.thumbprint);\n                }\n                isExpired = stored.thumbprint !== thumbprint || stored.protocol !== location.protocol;\n                return stored.data && !isExpired ? stored.data : null;\n            },\n            _initialize: function initialize() {\n                var that = this, local = this.local, deferred;\n                deferred = this.prefetch ? this._loadPrefetch(this.prefetch) : $.Deferred().resolve();\n                local && deferred.done(addLocalToIndex);\n                this.transport = this.remote ? new Transport(this.remote) : null;\n                return this.initPromise = deferred.promise();\n                function addLocalToIndex() {\n                    that.add(_.isFunction(local) ? local() : local);\n                }\n            },\n            initialize: function initialize(force) {\n                return !this.initPromise || force ? this._initialize() : this.initPromise;\n            },\n            add: function add(data) {\n                this.index.add(data);\n            },\n            get: function get(query, cb) {\n                var that = this, matches = [], cacheHit = false;\n                matches = this.index.get(query);\n                matches = this.sorter(matches).slice(0, this.limit);\n                matches.length < this.limit ? cacheHit = this._getFromRemote(query, returnRemoteMatches) : this._cancelLastRemoteRequest();\n                if (!cacheHit) {\n                    (matches.length > 0 || !this.transport) && cb && cb(matches);\n                }\n                function returnRemoteMatches(remoteMatches) {\n                    var matchesWithBackfill = matches.slice(0);\n                    _.each(remoteMatches, function(remoteMatch) {\n                        var isDuplicate;\n                        isDuplicate = _.some(matchesWithBackfill, function(match) {\n                            return that.dupDetector(remoteMatch, match);\n                        });\n                        !isDuplicate && matchesWithBackfill.push(remoteMatch);\n                        return matchesWithBackfill.length < that.limit;\n                    });\n                    cb && cb(that.sorter(matchesWithBackfill));\n                }\n            },\n            clear: function clear() {\n                this.index.reset();\n            },\n            clearPrefetchCache: function clearPrefetchCache() {\n                this.storage && this.storage.clear();\n            },\n            clearRemoteCache: function clearRemoteCache() {\n                this.transport && Transport.resetCache();\n            },\n            ttAdapter: function ttAdapter() {\n                return _.bind(this.get, this);\n            }\n        });\n        return Bloodhound;\n        function getSorter(sortFn) {\n            return _.isFunction(sortFn) ? sort : noSort;\n            function sort(array) {\n                return array.sort(sortFn);\n            }\n            function noSort(array) {\n                return array;\n            }\n        }\n        function ignoreDuplicates() {\n            return false;\n        }\n    })(this);\n    var html = function() {\n        return {\n            wrapper: '<span class=\"twitter-typeahead\"></span>',\n            dropdown: '<span class=\"tt-dropdown-menu\"></span>',\n            dataset: '<div class=\"tt-dataset-%CLASS%\"></div>',\n            suggestions: '<span class=\"tt-suggestions\"></span>',\n            suggestion: '<div class=\"tt-suggestion\"></div>'\n        };\n    }();\n    var css = function() {\n        \"use strict\";\n        var css = {\n            wrapper: {\n                position: \"relative\",\n                display: \"inline-block\"\n            },\n            hint: {\n                position: \"absolute\",\n                top: \"0\",\n                left: \"0\",\n                borderColor: \"transparent\",\n                boxShadow: \"none\",\n                opacity: \"1\"\n            },\n            input: {\n                position: \"relative\",\n                verticalAlign: \"top\",\n                backgroundColor: \"transparent\"\n            },\n            inputWithNoHint: {\n                position: \"relative\",\n                verticalAlign: \"top\"\n            },\n            dropdown: {\n                position: \"absolute\",\n                top: \"100%\",\n                left: \"0\",\n                zIndex: \"100\",\n                display: \"none\"\n            },\n            suggestions: {\n                display: \"block\"\n            },\n            suggestion: {\n                whiteSpace: \"nowrap\",\n                cursor: \"pointer\"\n            },\n            suggestionChild: {\n                whiteSpace: \"normal\"\n            },\n            ltr: {\n                left: \"0\",\n                right: \"auto\"\n            },\n            rtl: {\n                left: \"auto\",\n                right: \" 0\"\n            }\n        };\n        if (_.isMsie()) {\n            _.mixin(css.input, {\n                backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n            });\n        }\n        if (_.isMsie() && _.isMsie() <= 7) {\n            _.mixin(css.input, {\n                marginTop: \"-1px\"\n            });\n        }\n        return css;\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace = \"typeahead:\";\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            trigger: function(type) {\n                var args = [].slice.call(arguments, 1);\n                this.$el.trigger(namespace + type, args);\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function getRegex(patterns, caseSensitive, wordsOnly) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o) {\n            var that = this, onBlur, onFocus, onKeydown, onInput;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            onBlur = _.bind(this._onBlur, this);\n            onFocus = _.bind(this._onFocus, this);\n            onKeydown = _.bind(this._onKeydown, this);\n            onInput = _.bind(this._onInput, this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input).on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n            if (!_.isMsie()) {\n                this.$input.on(\"input.tt\", onInput);\n            } else {\n                this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                    if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                        return;\n                    }\n                    _.defer(_.bind(that._onInput, that, $e));\n                });\n            }\n            this.query = this.$input.val();\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n        }\n        Input.normalizeQuery = function(str) {\n            return (str || \"\").replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._checkInputValue();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault, hintValue, inputValue;\n                switch (keyName) {\n                  case \"tab\":\n                    hintValue = this.getHint();\n                    inputValue = this.getInputValue();\n                    preventDefault = hintValue && hintValue !== inputValue && !withModifier($e);\n                    break;\n\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkInputValue: function checkInputValue() {\n                var inputValue, areEquivalent, hasDifferentWhitespace;\n                inputValue = this.getInputValue();\n                areEquivalent = areQueriesEquivalent(inputValue, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== inputValue.length : false;\n                this.query = inputValue;\n                if (!areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getQuery: function getQuery() {\n                return this.query;\n            },\n            setQuery: function setQuery(query) {\n                this.query = query;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value, silent) {\n                this.$input.val(value);\n                silent ? this.clearHint() : this._checkInputValue();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query, true);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            getLanguageDirection: function getLanguageDirection() {\n                return (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$hint = this.$input = this.$overflowHelper = null;\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var datasetKey = \"ttDataset\", valueKey = \"ttValue\", datumKey = \"ttDatum\";\n        function Dataset(o) {\n            o = o || {};\n            o.templates = o.templates || {};\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            this.query = null;\n            this.highlight = !!o.highlight;\n            this.name = o.name || _.getUniqueId();\n            this.source = o.source;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.$el = $(html.dataset.replace(\"%CLASS%\", this.name));\n        }\n        Dataset.extractDatasetName = function extractDatasetName(el) {\n            return $(el).data(datasetKey);\n        };\n        Dataset.extractValue = function extractDatum(el) {\n            return $(el).data(valueKey);\n        };\n        Dataset.extractDatum = function extractDatum(el) {\n            return $(el).data(datumKey);\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _render: function render(query, suggestions) {\n                if (!this.$el) {\n                    return;\n                }\n                var that = this, hasSuggestions;\n                this.$el.empty();\n                hasSuggestions = suggestions && suggestions.length;\n                if (!hasSuggestions && this.templates.empty) {\n                    this.$el.html(getEmptyHtml()).prepend(that.templates.header ? getHeaderHtml() : null).append(that.templates.footer ? getFooterHtml() : null);\n                } else if (hasSuggestions) {\n                    this.$el.html(getSuggestionsHtml()).prepend(that.templates.header ? getHeaderHtml() : null).append(that.templates.footer ? getFooterHtml() : null);\n                }\n                this.trigger(\"rendered\");\n                function getEmptyHtml() {\n                    return that.templates.empty({\n                        query: query,\n                        isEmpty: true\n                    });\n                }\n                function getSuggestionsHtml() {\n                    var $suggestions, nodes;\n                    $suggestions = $(html.suggestions).css(css.suggestions);\n                    nodes = _.map(suggestions, getSuggestionNode);\n                    $suggestions.append.apply($suggestions, nodes);\n                    that.highlight && highlight({\n                        className: \"tt-highlight\",\n                        node: $suggestions[0],\n                        pattern: query\n                    });\n                    return $suggestions;\n                    function getSuggestionNode(suggestion) {\n                        var $el;\n                        $el = $(html.suggestion).append(that.templates.suggestion(suggestion)).data(datasetKey, that.name).data(valueKey, that.displayFn(suggestion)).data(datumKey, suggestion);\n                        $el.children().each(function() {\n                            $(this).css(css.suggestionChild);\n                        });\n                        return $el;\n                    }\n                }\n                function getHeaderHtml() {\n                    return that.templates.header({\n                        query: query,\n                        isEmpty: !hasSuggestions\n                    });\n                }\n                function getFooterHtml() {\n                    return that.templates.footer({\n                        query: query,\n                        isEmpty: !hasSuggestions\n                    });\n                }\n            },\n            getRoot: function getRoot() {\n                return this.$el;\n            },\n            update: function update(query) {\n                var that = this;\n                this.query = query;\n                this.canceled = false;\n                this.source(query, render);\n                function render(suggestions) {\n                    if (!that.canceled && query === that.query) {\n                        that._render(query, suggestions);\n                    }\n                }\n            },\n            cancel: function cancel() {\n                this.canceled = true;\n            },\n            clear: function clear() {\n                this.cancel();\n                this.$el.empty();\n                this.trigger(\"rendered\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = null;\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || \"value\";\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                empty: templates.empty && _.templatify(templates.empty),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion || suggestionTemplate\n            };\n            function suggestionTemplate(context) {\n                return \"<p>\" + displayFn(context) + \"</p>\";\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Dropdown = function() {\n        \"use strict\";\n        function Dropdown(o) {\n            var that = this, onSuggestionClick, onSuggestionMouseEnter, onSuggestionMouseLeave;\n            o = o || {};\n            if (!o.menu) {\n                $.error(\"menu is required\");\n            }\n            this.isOpen = false;\n            this.isEmpty = true;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            onSuggestionClick = _.bind(this._onSuggestionClick, this);\n            onSuggestionMouseEnter = _.bind(this._onSuggestionMouseEnter, this);\n            onSuggestionMouseLeave = _.bind(this._onSuggestionMouseLeave, this);\n            this.$menu = $(o.menu).on(\"click.tt\", \".tt-suggestion\", onSuggestionClick).on(\"mouseenter.tt\", \".tt-suggestion\", onSuggestionMouseEnter).on(\"mouseleave.tt\", \".tt-suggestion\", onSuggestionMouseLeave);\n            _.each(this.datasets, function(dataset) {\n                that.$menu.append(dataset.getRoot());\n                dataset.onSync(\"rendered\", that._onRendered, that);\n            });\n        }\n        _.mixin(Dropdown.prototype, EventEmitter, {\n            _onSuggestionClick: function onSuggestionClick($e) {\n                this.trigger(\"suggestionClicked\", $($e.currentTarget));\n            },\n            _onSuggestionMouseEnter: function onSuggestionMouseEnter($e) {\n                this._removeCursor();\n                this._setCursor($($e.currentTarget), true);\n            },\n            _onSuggestionMouseLeave: function onSuggestionMouseLeave() {\n                this._removeCursor();\n            },\n            _onRendered: function onRendered() {\n                this.isEmpty = _.every(this.datasets, isDatasetEmpty);\n                this.isEmpty ? this._hide() : this.isOpen && this._show();\n                this.trigger(\"datasetRendered\");\n                function isDatasetEmpty(dataset) {\n                    return dataset.isEmpty();\n                }\n            },\n            _hide: function() {\n                this.$menu.hide();\n            },\n            _show: function() {\n                this.$menu.css(\"display\", \"block\");\n            },\n            _getSuggestions: function getSuggestions() {\n                return this.$menu.find(\".tt-suggestion\");\n            },\n            _getCursor: function getCursor() {\n                return this.$menu.find(\".tt-cursor\").first();\n            },\n            _setCursor: function setCursor($el, silent) {\n                $el.first().addClass(\"tt-cursor\");\n                !silent && this.trigger(\"cursorMoved\");\n            },\n            _removeCursor: function removeCursor() {\n                this._getCursor().removeClass(\"tt-cursor\");\n            },\n            _moveCursor: function moveCursor(increment) {\n                var $suggestions, $oldCursor, newCursorIndex, $newCursor;\n                if (!this.isOpen) {\n                    return;\n                }\n                $oldCursor = this._getCursor();\n                $suggestions = this._getSuggestions();\n                this._removeCursor();\n                newCursorIndex = $suggestions.index($oldCursor) + increment;\n                newCursorIndex = (newCursorIndex + 1) % ($suggestions.length + 1) - 1;\n                if (newCursorIndex === -1) {\n                    this.trigger(\"cursorRemoved\");\n                    return;\n                } else if (newCursorIndex < -1) {\n                    newCursorIndex = $suggestions.length - 1;\n                }\n                this._setCursor($newCursor = $suggestions.eq(newCursorIndex));\n                this._ensureVisible($newCursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, menuScrollTop, menuHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                menuScrollTop = this.$menu.scrollTop();\n                menuHeight = this.$menu.height() + parseInt(this.$menu.css(\"paddingTop\"), 10) + parseInt(this.$menu.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$menu.scrollTop(menuScrollTop + elTop);\n                } else if (menuHeight < elBottom) {\n                    this.$menu.scrollTop(menuScrollTop + (elBottom - menuHeight));\n                }\n            },\n            close: function close() {\n                if (this.isOpen) {\n                    this.isOpen = false;\n                    this._removeCursor();\n                    this._hide();\n                    this.trigger(\"closed\");\n                }\n            },\n            open: function open() {\n                if (!this.isOpen) {\n                    this.isOpen = true;\n                    !this.isEmpty && this._show();\n                    this.trigger(\"opened\");\n                }\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$menu.css(dir === \"ltr\" ? css.ltr : css.rtl);\n            },\n            moveCursorUp: function moveCursorUp() {\n                this._moveCursor(-1);\n            },\n            moveCursorDown: function moveCursorDown() {\n                this._moveCursor(+1);\n            },\n            getDatumForSuggestion: function getDatumForSuggestion($el) {\n                var datum = null;\n                if ($el.length) {\n                    datum = {\n                        raw: Dataset.extractDatum($el),\n                        value: Dataset.extractValue($el),\n                        datasetName: Dataset.extractDatasetName($el)\n                    };\n                }\n                return datum;\n            },\n            getDatumForCursor: function getDatumForCursor() {\n                return this.getDatumForSuggestion(this._getCursor().first());\n            },\n            getDatumForTopSuggestion: function getDatumForTopSuggestion() {\n                return this.getDatumForSuggestion(this._getSuggestions().first());\n            },\n            update: function update(query) {\n                _.each(this.datasets, updateDataset);\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.isEmpty = true;\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            isVisible: function isVisible() {\n                return this.isOpen && !this.isEmpty;\n            },\n            destroy: function destroy() {\n                this.$menu.off(\".tt\");\n                this.$menu = null;\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Dropdown;\n        function initializeDataset(oDataset) {\n            return new Dataset(oDataset);\n        }\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        var attrsKey = \"ttAttrs\";\n        function Typeahead(o) {\n            var $menu, $input, $hint;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            this.isActivated = false;\n            this.autoselect = !!o.autoselect;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.$node = buildDom(o.input, o.withHint);\n            $menu = this.$node.find(\".tt-dropdown-menu\");\n            $input = this.$node.find(\".tt-input\");\n            $hint = this.$node.find(\".tt-hint\");\n            $input.on(\"blur.tt\", function($e) {\n                var active, isActive, hasActive;\n                active = document.activeElement;\n                isActive = $menu.is(active);\n                hasActive = $menu.has(active).length > 0;\n                if (_.isMsie() && (isActive || hasActive)) {\n                    $e.preventDefault();\n                    $e.stopImmediatePropagation();\n                    _.defer(function() {\n                        $input.focus();\n                    });\n                }\n            });\n            $menu.on(\"mousedown.tt\", function($e) {\n                $e.preventDefault();\n            });\n            this.eventBus = o.eventBus || new EventBus({\n                el: $input\n            });\n            this.dropdown = new Dropdown({\n                menu: $menu,\n                datasets: o.datasets\n            }).onSync(\"suggestionClicked\", this._onSuggestionClicked, this).onSync(\"cursorMoved\", this._onCursorMoved, this).onSync(\"cursorRemoved\", this._onCursorRemoved, this).onSync(\"opened\", this._onOpened, this).onSync(\"closed\", this._onClosed, this).onAsync(\"datasetRendered\", this._onDatasetRendered, this);\n            this.input = new Input({\n                input: $input,\n                hint: $hint\n            }).onSync(\"focused\", this._onFocused, this).onSync(\"blurred\", this._onBlurred, this).onSync(\"enterKeyed\", this._onEnterKeyed, this).onSync(\"tabKeyed\", this._onTabKeyed, this).onSync(\"escKeyed\", this._onEscKeyed, this).onSync(\"upKeyed\", this._onUpKeyed, this).onSync(\"downKeyed\", this._onDownKeyed, this).onSync(\"leftKeyed\", this._onLeftKeyed, this).onSync(\"rightKeyed\", this._onRightKeyed, this).onSync(\"queryChanged\", this._onQueryChanged, this).onSync(\"whitespaceChanged\", this._onWhitespaceChanged, this);\n            this._setLanguageDirection();\n        }\n        _.mixin(Typeahead.prototype, {\n            _onSuggestionClicked: function onSuggestionClicked(type, $el) {\n                var datum;\n                if (datum = this.dropdown.getDatumForSuggestion($el)) {\n                    this._select(datum);\n                }\n            },\n            _onCursorMoved: function onCursorMoved() {\n                var datum = this.dropdown.getDatumForCursor();\n                this.input.setInputValue(datum.value, true);\n                this.eventBus.trigger(\"cursorchanged\", datum.raw, datum.datasetName);\n            },\n            _onCursorRemoved: function onCursorRemoved() {\n                this.input.resetInputValue();\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered() {\n                this._updateHint();\n            },\n            _onOpened: function onOpened() {\n                this._updateHint();\n                this.eventBus.trigger(\"opened\");\n            },\n            _onClosed: function onClosed() {\n                this.input.clearHint();\n                this.eventBus.trigger(\"closed\");\n            },\n            _onFocused: function onFocused() {\n                this.isActivated = true;\n                this.dropdown.open();\n            },\n            _onBlurred: function onBlurred() {\n                this.isActivated = false;\n                this.dropdown.empty();\n                this.dropdown.close();\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var cursorDatum, topSuggestionDatum;\n                cursorDatum = this.dropdown.getDatumForCursor();\n                topSuggestionDatum = this.dropdown.getDatumForTopSuggestion();\n                if (cursorDatum) {\n                    this._select(cursorDatum);\n                    $e.preventDefault();\n                } else if (this.autoselect && topSuggestionDatum) {\n                    this._select(topSuggestionDatum);\n                    $e.preventDefault();\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var datum;\n                if (datum = this.dropdown.getDatumForCursor()) {\n                    this._select(datum);\n                    $e.preventDefault();\n                } else {\n                    this._autocomplete(true);\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.dropdown.close();\n                this.input.resetInputValue();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                var query = this.input.getQuery();\n                this.dropdown.isEmpty && query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.moveCursorUp();\n                this.dropdown.open();\n            },\n            _onDownKeyed: function onDownKeyed() {\n                var query = this.input.getQuery();\n                this.dropdown.isEmpty && query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.moveCursorDown();\n                this.dropdown.open();\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                this.dir === \"rtl\" && this._autocomplete();\n            },\n            _onRightKeyed: function onRightKeyed() {\n                this.dir === \"ltr\" && this._autocomplete();\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this.input.clearHintIfInvalid();\n                query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.empty();\n                this.dropdown.open();\n                this._setLanguageDirection();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n                this.dropdown.open();\n            },\n            _setLanguageDirection: function setLanguageDirection() {\n                var dir;\n                if (this.dir !== (dir = this.input.getLanguageDirection())) {\n                    this.dir = dir;\n                    this.$node.css(\"direction\", dir);\n                    this.dropdown.setLanguageDirection(dir);\n                }\n            },\n            _updateHint: function updateHint() {\n                var datum, val, query, escapedQuery, frontMatchRegEx, match;\n                datum = this.dropdown.getDatumForTopSuggestion();\n                if (datum && this.dropdown.isVisible() && !this.input.hasOverflow()) {\n                    val = this.input.getInputValue();\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(datum.value);\n                    match ? this.input.setHint(val + match[1]) : this.input.clearHint();\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            _autocomplete: function autocomplete(laxCursor) {\n                var hint, query, isCursorAtEnd, datum;\n                hint = this.input.getHint();\n                query = this.input.getQuery();\n                isCursorAtEnd = laxCursor || this.input.isCursorAtEnd();\n                if (hint && query !== hint && isCursorAtEnd) {\n                    datum = this.dropdown.getDatumForTopSuggestion();\n                    datum && this.input.setInputValue(datum.value);\n                    this.eventBus.trigger(\"autocompleted\", datum.raw, datum.datasetName);\n                }\n            },\n            _select: function select(datum) {\n                this.input.setQuery(datum.value);\n                this.input.setInputValue(datum.value, true);\n                this._setLanguageDirection();\n                this.eventBus.trigger(\"selected\", datum.raw, datum.datasetName);\n                this.dropdown.close();\n                _.defer(_.bind(this.dropdown.empty, this.dropdown));\n            },\n            open: function open() {\n                this.dropdown.open();\n            },\n            close: function close() {\n                this.dropdown.close();\n            },\n            setVal: function setVal(val) {\n                val = _.toStr(val);\n                if (this.isActivated) {\n                    this.input.setInputValue(val);\n                } else {\n                    this.input.setQuery(val);\n                    this.input.setInputValue(val, true);\n                }\n                this._setLanguageDirection();\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.dropdown.destroy();\n                destroyDomStructure(this.$node);\n                this.$node = null;\n            }\n        });\n        return Typeahead;\n        function buildDom(input, withHint) {\n            var $input, $wrapper, $dropdown, $hint;\n            $input = $(input);\n            $wrapper = $(html.wrapper).css(css.wrapper);\n            $dropdown = $(html.dropdown).css(css.dropdown);\n            $hint = $input.clone().css(css.hint).css(getBackgroundStyles($input));\n            $hint.val(\"\").removeData().addClass(\"tt-hint\").removeAttr(\"id name placeholder required\").prop(\"readonly\", true).attr({\n                autocomplete: \"off\",\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n            $input.data(attrsKey, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(\"tt-input\").attr({\n                autocomplete: \"off\",\n                spellcheck: false\n            }).css(withHint ? css.input : css.inputWithNoHint);\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input.wrap($wrapper).parent().prepend(withHint ? $hint : null).append($dropdown);\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function destroyDomStructure($node) {\n            var $input = $node.find(\".tt-input\");\n            _.each($input.data(attrsKey), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.detach().removeData(attrsKey).removeClass(\"tt-input\").insertAfter($node);\n            $node.remove();\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, typeaheadKey, methods;\n        old = $.fn.typeahead;\n        typeaheadKey = \"ttTypeahead\";\n        methods = {\n            initialize: function initialize(o, datasets) {\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                return this.each(attach);\n                function attach() {\n                    var $input = $(this), eventBus, typeahead;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    typeahead = new Typeahead({\n                        input: $input,\n                        eventBus: eventBus = new EventBus({\n                            el: $input\n                        }),\n                        withHint: _.isUndefined(o.hint) ? true : !!o.hint,\n                        minLength: o.minLength,\n                        autoselect: o.autoselect,\n                        datasets: datasets\n                    });\n                    $input.data(typeaheadKey, typeahead);\n                }\n            },\n            open: function open() {\n                return this.each(openTypeahead);\n                function openTypeahead() {\n                    var $input = $(this), typeahead;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        typeahead.open();\n                    }\n                }\n            },\n            close: function close() {\n                return this.each(closeTypeahead);\n                function closeTypeahead() {\n                    var $input = $(this), typeahead;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        typeahead.close();\n                    }\n                }\n            },\n            val: function val(newVal) {\n                return !arguments.length ? getVal(this.first()) : this.each(setVal);\n                function setVal() {\n                    var $input = $(this), typeahead;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        typeahead.setVal(newVal);\n                    }\n                }\n                function getVal($input) {\n                    var typeahead, query;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        query = typeahead.getVal();\n                    }\n                    return query;\n                }\n            },\n            destroy: function destroy() {\n                return this.each(unattach);\n                function unattach() {\n                    var $input = $(this), typeahead;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        typeahead.destroy();\n                        $input.removeData(typeaheadKey);\n                    }\n                }\n            }\n        };\n        $.fn.typeahead = function(method) {\n            var tts;\n            if (methods[method] && method !== \"initialize\") {\n                tts = this.filter(function() {\n                    return !!$(this).data(typeaheadKey);\n                });\n                return methods[method].apply(tts, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n    })();\n})(window.jQuery);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/typeahead.js/dist/typeahead.bundle.js\n ** module id = 172\n ** module chunks = 4\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/timers-browserify/main.js\n ** module id = 173\n ** module chunks = 4\n **/","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/process/browser.js\n ** module id = 174\n ** module chunks = 4\n **/","/**\n* A KO component for the project creation form.\n*/\n'use strict';\n\nvar $ = require('jquery');\nrequire('select2');\nvar ko = require('knockout');\nvar bootbox = require('bootbox');\n\nvar $osf = require('js/osfHelpers');\nvar nodeCategories = require('json!built/nodeCategories.json');\n\nvar CREATE_URL = '/api/v1/project/new/';\n\n/*\n    * ViewModel for the project creation form.\n    *\n    * Template: osf-project-creat-form in component/dashboard_templates.mako\n    *\n    * Params:\n    *  - data: Data to populate the template selection input\n    */\nfunction ProjectCreatorViewModel(params) {\n    var self = this;\n    self.params = params || {};\n    self.minSearchLength = 2;\n    self.title = ko.observable('');\n    self.description = ko.observable();\n\n    self.category = ko.observable('project');\n    self.categoryMap = nodeCategories;\n    self.categories = Object.keys(nodeCategories);\n\n    self.errorMessage = ko.observable('');\n\n    self.hasFocus = params.hasFocus;\n\n    self.usingTemplate = ko.observable(false);\n    self.enableCreateBtn =  ko.observable(true);\n\n    self.disableSubmitBtn = function (){\n        self.enableCreateBtn(false);\n    };\n    self.enableSubmitBtn = function (){\n        self.enableCreateBtn(true);\n    };\n\n    self.submitForm = function () {\n        if (self.title().trim() === '') {\n            self.errorMessage('This field is required.');\n        } else {\n            self.disableSubmitBtn();\n            self.createProject();\n        }\n    };\n\n    self.createProject = function() {\n        $osf.postJSON(\n            CREATE_URL,\n            self.serialize()\n        ).done(\n            self.createSuccess\n        ).fail(\n            self.createFailure\n        );\n    };\n\n    self.createSuccess = function(data) {\n        window.location = data.projectUrl;\n    };\n\n    self.createFailure = function() {\n        self.enableSubmitBtn();\n        $osf.growl('Could not create a new project.', 'Please try again. If the problem persists, email <a href=\"mailto:support@osf.io.\">support@osf.io</a>');\n\n    };\n\n    self.serialize = function() {\n        var category = self.category();\n        var template;\n        //select behavior differently in IE from all other browser. The input tag is 1 in other browser but 3 in IE\n        if($osf.isIE()){\n            template = $('.create-node-templates')[3].value;\n        } else {\n            template = $('.create-node-templates')[1].value;\n        }\n        return {\n            title: self.title(),\n            category: category,\n            description: self.description(),\n            template: template\n        };\n    };\n    /**\n        * Query the current users projects from a local cache\n        *\n        * @method ownProjects\n        * @param {String} q a string query\n        * @return {Array} A filtered array of strings\n        */\n    self.ownProjects = function(q) {\n        if (q === '') {\n            return self.templates;\n        }\n        return self.templates.filter(function(item) {\n            return item.text.toLowerCase().indexOf(q.toLowerCase()) !== -1;\n        });\n    };\n\n    self.query = function(query) {\n        if (query.term.length > self.minSearchLength) {\n            self.fetchNodes(query.term, query.callback);\n            return;\n        }\n        query.callback({\n            results: [{\n                text: 'Your Projects',\n                children: self.ownProjects(query.term)\n            }]\n        });\n    };\n\n    /**\n        * Fetch Nodes from the search api and concat. them with the current users projects\n        *\n        * @method fetchNodes\n        * @param {String} q A string query\n        * @param {Function} cb A callback to call with the list of projects\n        * @return null\n        */\n    self.fetchNodes = function(q, cb) {\n        $osf.postJSON(\n            '/api/v1/search/node/',\n            {\n                includePublic: true,\n                query: q,\n            }\n        ).done(function(data) {\n            var results = [];\n            var local = self.ownProjects(q);\n            var fetched = self.loadNodes(data.nodes);\n\n            // Filter against local projects so that duplicates are not shown\n            fetched = fetched.filter(function(element) {\n                for (var i = 0; i < local.length; i++) {\n                    if (element.id === local[i].id) {\n                        return false;\n                    }\n                }\n                return true;\n            });\n\n            if (fetched.length > 0) {\n                results.push({\n                    text: 'Other Projects',\n                    children: fetched\n                });\n            }\n\n            if (local.length > 0) {\n                results.push({\n                    text: 'Your Projects',\n                    children: local\n                });\n            }\n\n            cb({results: results});\n        }).fail(function() {\n            //Silently error by just returning your projects\n            cb({\n                results: [{\n                    text: 'Your Projects',\n                    children: self.ownProjects(q)\n                }]\n            });\n        });\n    };\n\n    self.loadNodes = function(nodes) {\n        return ko.utils.arrayMap(nodes, function(node) {\n            return {\n                'id': node.id,\n                // TODO: Remove htmlDecode when pre-sanitized strings are no longer stored\n                'text': $osf.htmlDecode(node.title)\n            };\n        });\n    };\n\n    self.templates = self.loadNodes(params.data);\n\n    // IE won't select template with id correctly. so we replace #createNodeTemplates with .createNodeTemplates\n    // More explanation -- https://github.com/CenterForOpenScience/osf.io/pull/2858\n    $('.create-node-templates').select2({\n        allowClear: true,\n        placeholder: 'Select a project to use as a template',\n        query: self.query\n    });\n}\n\nko.components.register('osf-project-create-form', {\n    viewModel: ProjectCreatorViewModel,\n    template: {element: 'osf-project-create-form'}\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/projectCreator.js\n ** module id = 175\n ** module chunks = 4\n **/","module.exports = {\n\t\"\": \"Uncategorized\",\n\t\"project\": \"Project\",\n\t\"hypothesis\": \"Hypothesis\",\n\t\"methods and measures\": \"Methods and Measures\",\n\t\"procedure\": \"Procedure\",\n\t\"instrumentation\": \"Instrumentation\",\n\t\"data\": \"Data\",\n\t\"analysis\": \"Analysis\",\n\t\"communication\": \"Communication\",\n\t\"other\": \"Other\"\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/json-loader!../website/static/built/nodeCategories.json\n ** module id = 177\n ** module chunks = 4 31 36 37\n **/","/**\n * Renders a log feed.\n *\n */\n'use strict';\nvar ko = require('knockout');\nvar $ = require('jquery');\nvar moment = require('moment');\nvar Paginator = require('js/paginator');\nvar oop = require('js/oop');\nrequire('knockout.punches');\n\nvar $osf = require('js/osfHelpers');  // Injects 'listing' binding handler to to Knockout\nvar nodeCategories = require('json!built/nodeCategories.json');\n\nko.punches.enableAll();  // Enable knockout punches\n\n/**\n  * Log model.\n  */\nvar Log = function(params) {\n    var self = this;\n\n    $.extend(self, params);\n    self.date = new $osf.FormattableDate(params.date);\n    self.wikiUrl = ko.computed(function() {\n        return self.nodeUrl + 'wiki/' + encodeURIComponent(self.params.page);\n    });\n    self.wikiIdUrl = ko.computed(function() {\n        return self.nodeUrl + 'wiki/id/' + encodeURIComponent(self.params.page_id);\n    });\n\n    /**\n      * Given an item in self.contributors, return its anchor element representation.\n      */\n    self._asContribLink = function(person) {\n        var fullnameText = $osf.htmlEscape(person.fullname);\n        return '<a class=\"contrib-link\" href=\"/profile/' + person.id + '/\">' + fullnameText + '</a>';\n    };\n\n    /**\n      * Return whether a knockout template exists for the log.\n      */\n    self.hasTemplate = ko.computed(function() {\n        if (!self.user) {\n            return $('script#' + self.action + '_no_user').length > 0;\n        } else {\n            return $('script#' + self.action).length > 0;\n        }\n    });\n\n    self.hasUser = ko.pureComputed(function() {\n        return Boolean(self.user && self.user.fullname);\n    });\n\n    self.mapUpdates = function(key, item) {\n        if (key === 'category') {\n            return key + ' to ' + nodeCategories[item['new']];\n        }\n        else {\n            return key + ' to ' + item;\n        }\n    };\n\n    /**\n      * Return the html for a comma-delimited list of contributor links, formatted\n      * with correct list grammar.\n      * e.g. \"Dasher and Dancer\", \"Comet, Cupid, and Blitzen\"\n      */\n    self.displayContributors = ko.computed(function(){\n        var ret = '';\n        if (self.anonymous){\n            ret += '<span class=\"contributor-anonymous\">some anonymous contributor(s)</span>';\n        } else {\n            for (var i = 0; i < self.contributors.length; i++) {\n                var person = self.contributors[i];\n                if (i === self.contributors.length - 1 && self.contributors.length > 2) {\n                    ret += ' and ';\n                }\n                if (person.registered) {\n                    ret += self._asContribLink(person);\n                } else {\n                    var fullnameText = $osf.htmlEscape(person.fullname);\n                    ret += '<span>' + fullnameText + '</span>';\n                }\n                if (i < self.contributors.length - 1 && self.contributors.length > 2) {\n                    ret += ', ';\n                } else if (i < self.contributors.length - 1 && self.contributors.length === 2) {\n                    ret += ' and ';\n                }\n            }\n        }\n        return ret;\n    });\n\n    //helper function to strip the slash for file or folder in log template\n    self.stripSlash = function(path){\n        return path.replace(/(^\\/)|(\\/$)/g, '');\n    };\n\n    //helper funtion to determine the type for removing in log template\n    self.pathType = function(path){\n        return path.match(/\\/$/) ? 'folder' : 'file';\n    };\n};\n\n/**\n  * View model for a log list.\n  * @param {Log[]} logs An array of Log model objects to render.\n  * @param url the url ajax request post to\n  */\nvar LogsViewModel = oop.extend(Paginator, {\n    constructor: function(logs, url) {\n        this.super.constructor.call(this);\n        var self = this;\n        self.loading = ko.observable(false);\n        self.logs = ko.observableArray(logs);\n        self.url = url;\n        self.anonymousUserName = '<em>A user</em>';\n\n        self.tzname = ko.pureComputed(function() {\n            var logs = self.logs();\n            if (logs.length) {\n                var tz =  moment(logs[0].date.date).format('ZZ');\n                return tz;\n            }\n            return '';\n        });\n    },\n    //send request to get more logs when the more button is clicked\n    fetchResults: function(){\n        var self = this;\n        self.loading(true); // show loading indicator\n\n        return $.ajax({\n            type: 'get',\n            url: self.url,\n            data:{\n                page: self.pageToGet()\n            },\n            cache: false\n        }).done(function(response) {\n            // Initialize LogViewModel\n            var logModelObjects = createLogs(response.logs); // Array of Log model objects\n            self.logs.removeAll();\n            for (var i=0; i<logModelObjects.length; i++) {\n                self.logs.push(logModelObjects[i]);\n            }\n            self.currentPage(response.page);\n            self.numberOfPages(response.pages);\n            self.addNewPaginators();\n        }).fail(\n            $osf.handleJSONError\n        ).always( function (){\n            self.loading(false);\n        });\n\n    }\n});\n\n\n/**\n  * Create an Array of Log model objects from data returned from an endpoint\n  * @param  {Object[]} logData Log data returned from an endpoint.\n  * @return {Log[]}         Array of Log objects.\n  */\nvar createLogs = function(logData){\n    var mappedLogs = $.map(logData, function(item) {\n        return new Log({\n            anonymous: item.anonymous,\n            action: item.action,\n            date: item.date,\n            // The node type, either 'project' or 'component'\n            // NOTE: This is NOT the component category (e.g. 'hypothesis')\n            nodeType: item.node.is_registration ? 'registration': item.node.node_type,\n            nodeCategory: item.node.category,\n            contributors: item.contributors,\n            nodeUrl: item.node.url,\n            userFullName: item.user.fullname,\n            userURL: item.user.url,\n            params: item.params,\n            nodeTitle: item.node.title,\n            nodeDescription: item.params.description_new,\n            nodePath: item.node.path,\n            user: item.user\n        });\n    });\n    return mappedLogs;\n};\n\n////////////////\n// Public API //\n////////////////\n\nvar defaults = {\n    /** Selector for the progress bar. */\n    progBar: '#logProgressBar'\n};\n\n\nvar initViewModel = function(self, logs, url){\n    self.logs = createLogs(logs);\n    self.viewModel = new LogsViewModel(self.logs, url);\n    if(url) {\n        self.viewModel.fetchResults();\n    }\n    self.init();\n};\n\n/**\n  * A log list feed.\n  * @param {string} selector\n  * @param {string} url\n  * @param {object} options\n  */\nfunction LogFeed(selector, data, options) {\n    var self = this;\n    self.selector = selector;\n    self.$element = $(selector);\n    self.options = $.extend({}, defaults, options);\n    self.$progBar = $(self.options.progBar);\n    //for recent activities logs\n    if (Array.isArray(data)) { // data is an array of log object from server\n        initViewModel(self, data, self.options.url);\n    } else { // data is an URL, for watch logs and project logs\n        var noLogs =[];\n        initViewModel(self, noLogs, data);\n    }\n}\n\nLogFeed.prototype.init = function() {\n    var self = this;\n    self.$progBar.hide();\n    ko.cleanNode(self.$element[0]);\n    $osf.applyBindings(self.viewModel, self.selector);\n};\n\nmodule.exports = LogFeed;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/logFeed.js\n ** module id = 179\n ** module chunks = 4 31 36 37\n **/","/**\n * Paginator model\n */\n'use strict';\nvar ko = require('knockout');\nvar oop = require('js/oop');\nvar MAX_PAGES_ON_PAGINATOR = 7;\nvar MAX_PAGES_ON_PAGINATOR_SIDE = 5;\n\n\n\n\nvar Paginator = oop.defclass({\n    constructor: function() {\n        this.pageToGet = ko.observable(0);\n        this.numberOfPages = ko.observable(0);\n        this.currentPage = ko.observable(0);\n        this.paginators = ko.observableArray([]);\n    },\n    addNewPaginators: function() {\n        var self = this;\n        var i;\n        self.paginators.removeAll();\n        if (self.numberOfPages() > 1) {\n            self.paginators.push({\n                style: (self.currentPage() === 0) ? 'disabled' : '',\n                handler: self.previousPage.bind(self),\n                text: '&lt;'\n            }); /* jshint ignore:line */\n                /* functions defined inside loop */\n\n            self.paginators.push({\n                style: (self.currentPage() === 0) ? 'active' : '',\n                text: '1',\n                handler: function() {\n                    self.pageToGet(0);\n                    if (self.pageToGet() !== self.currentPage()) {\n                        self.fetchResults();\n                    }\n                }\n            });\n            if (self.numberOfPages() <= MAX_PAGES_ON_PAGINATOR) {\n                for (i = 1; i < self.numberOfPages() - 1; i++) {\n                    self.paginators.push({\n                        style: (self.currentPage() === i) ? 'active' : '',\n                        text: i + 1,\n                        handler: function() {\n                            self.pageToGet(parseInt(this.text) - 1);\n                            if (self.pageToGet() !== self.currentPage()) {\n                                self.fetchResults();\n                            }\n                        }\n                    });/* jshint ignore:line */\n                    // function defined inside loop\n                }\n            } else if (self.currentPage() < MAX_PAGES_ON_PAGINATOR_SIDE - 1) { // One ellipse at the end\n                for (i = 1; i < MAX_PAGES_ON_PAGINATOR_SIDE; i++) {\n                    self.paginators.push({\n                        style: (self.currentPage() === i) ? 'active' : '',\n                        text: i + 1,\n                        handler: function() {\n                            self.pageToGet(parseInt(this.text) - 1);\n                            if (self.pageToGet() !== self.currentPage()) {\n                                self.fetchResults();\n                            }\n                        }\n                    });/* jshint ignore:line */\n                    // functions defined inside loop\n\n                }\n                self.paginators.push({\n                    style: 'disabled',\n                    text: '...',\n                    handler: function() {}\n                });\n            } else if (self.currentPage() > self.numberOfPages() - MAX_PAGES_ON_PAGINATOR_SIDE) { // one ellipses at the beginning\n                self.paginators.push({\n                    style: 'disabled',\n                    text: '...',\n                    handler: function() {}\n                });\n                for (i = self.numberOfPages() - MAX_PAGES_ON_PAGINATOR_SIDE; i < self.numberOfPages() - 1; i++) {\n                    self.paginators.push({\n                        style: (self.currentPage() === i) ? 'active' : '',\n                        text: i + 1,\n                        handler: function() {\n                            self.pageToGet(parseInt(this.text) - 1);\n                            if (self.pageToGet() !== self.currentPage()) {\n                                self.fetchResults();\n                            }\n                        }\n                    });/* jshint ignore:line */\n                    // function defined inside loop\n\n                }\n            } else { // two ellipses\n                self.paginators.push({\n                    style: 'disabled',\n                    text: '...',\n                    handler: function() {}\n                });\n                for (i = self.currentPage() - 1; i <= self.currentPage() + 1; i++) {\n                    self.paginators.push({\n                        style: (self.currentPage() === i) ? 'active' : '',\n                        text: i + 1,\n                        handler: function() {\n                            self.pageToGet(parseInt(this.text) - 1);\n                            if (self.pageToGet() !== self.currentPage()) {\n                                self.fetchResults();\n                            }\n                        }\n                    });/* jshint ignore:line */\n                    // functions defined inside loop\n\n                }\n                self.paginators.push({\n                    style: 'disabled',\n                    text: '...',\n                    handler: function() {}\n                });\n            }\n            self.paginators.push({\n                style: (self.currentPage() === self.numberOfPages() - 1) ? 'active' : '',\n                text: self.numberOfPages(),\n                handler: function() {\n                    self.pageToGet(self.numberOfPages() - 1);\n                    if (self.pageToGet() !== self.currentPage()) {\n                        self.fetchResults();\n                    }\n                }\n            });\n            self.paginators.push({\n                style: (self.currentPage() === self.numberOfPages() - 1) ? 'disabled' : '',\n                handler: self.nextPage.bind(self),\n                text: '&gt;'\n            });\n        }\n    },\n    nextPage: function() {\n        this.pageToGet(this.currentPage() + 1);\n        if (this.pageToGet() < this.numberOfPages()){\n            this.fetchResults();\n        }\n    },\n    previousPage: function() {\n        this.pageToGet(this.currentPage() - 1);\n        if (this.pageToGet() >= 0) {\n            this.fetchResults();\n        }\n    },\n    fetchResults: function() {\n        throw new Error('Paginator subclass must define a \"fetchResults\" method.');\n    }\n});\n\n\nmodule.exports = Paginator;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/paginator.js\n ** module id = 180\n ** module chunks = 4 31 36 37 47\n **/","/**\n * Handles Project Organizer on dashboard page of OSF.\n * For Treebeard and _item API's check: https://github.com/caneruguz/treebeard/wiki\n */\n'use strict';\n\nvar Treebeard = require('treebeard');\n\n// CSS\nrequire('css/typeahead.css');\nrequire('css/fangorn.css');\nrequire('css/projectorganizer.css');\n\nvar $ = require('jquery');\nvar m = require('mithril');\nvar Fangorn = require('js/fangorn');\nvar bootbox = require('bootbox');\nvar Bloodhound = require('exports?Bloodhound!typeahead.js');\nvar moment = require('moment');\nvar Raven = require('raven-js');\nvar $osf = require('js/osfHelpers');\nvar iconmap = require('js/iconmap');\nvar legendView = require('js/components/legend').view;\nvar Fangorn = require('js/fangorn');\n\nvar nodeCategories = require('json!built/nodeCategories.json');\n\n// copyMode can be 'copy', 'move', 'forbidden', or null.\n// This is set at draglogic and is used as global within this module\nvar copyMode = null;\n// Initialize projectOrganizer object (separate from the ProjectOrganizer constructor at the end)\nvar projectOrganizer = {};\n\n// Link ID's used to add existing project to folder\nvar linkName;\nvar linkID;\n\n// Cross browser key codes for the Command key\nvar COMMAND_KEYS = [224, 17, 91, 93];\nvar ESCAPE_KEY = 27;\nvar ENTER_KEY = 13;\n\nvar projectOrganizerCategories = $.extend({}, {\n    collection: 'Collections',\n    smartCollection: 'Smart Collections',\n    project: 'Project',\n    link:  'Link'\n}, nodeCategories);\n\n/**\n * Bloodhound is a typeahead suggestion engine. Searches here for public projects\n * @type {Bloodhound}\n */\nprojectOrganizer.publicProjects = new Bloodhound({\n    datumTokenizer: function (d) {\n        return Bloodhound.tokenizers.whitespace(d.name);\n    },\n    queryTokenizer: Bloodhound.tokenizers.whitespace,\n    remote: {\n        url: '/api/v1/search/projects/?term=%QUERY&maxResults=20&includePublic=yes&includeContributed=no',\n        filter: function (projects) {\n            return $.map(projects, function (project) {\n                return {\n                    name: project.value,\n                    node_id: project.id,\n                    category: project.category\n                };\n            });\n        },\n        limit: 10\n    }\n});\n\n/**\n * Bloodhound is a typeahead suggestion engine. Searches here for users projects\n * @type {Bloodhound}\n */\nprojectOrganizer.myProjects = new Bloodhound({\n    datumTokenizer: function (d) {\n        return Bloodhound.tokenizers.whitespace(d.name);\n    },\n    queryTokenizer: Bloodhound.tokenizers.whitespace,\n    remote: {\n        url: '/api/v1/search/projects/?term=%QUERY&maxResults=20&includePublic=no&includeContributed=yes',\n        filter: function (projects) {\n            return $.map(projects, function (project) {\n                return {\n                    name: project.value,\n                    node_id: project.id,\n                    category: project.category\n                };\n            });\n        },\n        limit: 10\n    }\n});\n\n/**\n * Edits the template for the column titles.\n * Used here to make smart folder italicized\n * @param {Object} item A Treebeard _item object for the row involved. Node information is inside item.data\n * @this Treebeard.controller Check Treebeard API for methods available\n * @private\n */\nfunction _poTitleColumn(item) {\n    var tb = this;\n    var preventSelect = function(e){\n        e.stopImmediatePropagation();\n    };\n    var css = item.data.isSmartFolder ? 'project-smart-folder smart-folder' : '';\n    if(item.data.archiving) {\n        return  m('span', {'class': 'registration-archiving'}, item.data.name + ' [Archiving]');\n    } else if(item.data.urls.fetch){\n        return m('a.fg-file-links', { 'class' : css, href : item.data.urls.fetch, onclick : preventSelect}, item.data.name);\n    } else {\n        return  m('span', { 'class' : css}, item.data.name);\n    }\n}\n\n/**\n * Links for going to project pages on the action column\n * @param event Click event\n * @param {Object} item A Treebeard _item object for the row involved. Node information is inside item.data\n * @param {Object} col Column options\n * @this Treebeard.controller Check Treebeard API for methods available\n * @private\n */\nfunction _gotoEvent(event, item) {\n    var tb = this;\n    if (COMMAND_KEYS.indexOf(tb.pressedKey) !== -1) {\n        window.open(item.data.urls.fetch, '_blank');\n    } else {\n        window.open(item.data.urls.fetch, '_self');\n    }\n}\n\n\n/**\n * Watching for escape key press\n * @param {String} nodeID Unique ID of the node\n */\nfunction addFormKeyBindings(nodeID) {\n    $('#ptd-' + nodeID).keyup(function (e) {\n        if (e.which === 27) {\n            $('#ptd-' + nodeID).find('.cancel-button-' + nodeID).filter(':visible').click();\n            return false;\n        }\n    });\n}\n\n\nfunction triggerClickOnItem(item, force) {\n    var row = $('.tb-row[data-id=\"' + item.id + '\"]');\n    if (force) {\n        row.trigger('click');\n    }\n\n    if (row.hasClass(this.options.hoverClassMultiselect)) {\n        row.trigger('click');\n    }\n}\n\n/**\n * Saves the expand state of a folder so that it can be loaded based on that state\n * @param {Object} item Node data\n * @param {Function} callback\n */\nfunction saveExpandState(item, callback) {\n    var collapseUrl,\n        postAction,\n        expandUrl;\n    if (!item.apiURL) {\n        return;\n    }\n    if (item.expand) {\n        // turn to false\n        collapseUrl = item.apiURL + 'collapse/';\n        postAction = $osf.postJSON(collapseUrl, {});\n        postAction.done(function () {\n            item.expand = false;\n            if (callback !== undefined) {\n                callback();\n            }\n        }).fail($osf.handleJSONError);\n    } else {\n        // turn to true\n        expandUrl = item.apiURL + 'expand/';\n        postAction = $osf.postJSON(expandUrl, {});\n        postAction.done(function () {\n            item.expand = true;\n            if (callback !== undefined) {\n                callback();\n            }\n        }).fail($osf.handleJSONError);\n    }\n}\n\n/**\n * Contributors have first person's name and then number of contributors. This function returns the proper html\n * @param {Object} item A Treebeard _item object for the row involved. Node information is inside item.data\n * @returns {Object} A Mithril virtual DOM template object\n * @private\n */\nfunction _poContributors(item) {\n    if (!item.data.contributors) {\n        return '';\n    }\n\n    return item.data.contributors.map(function (person, index, arr) {\n        var comma;\n        if (index === 0) {\n            comma = '';\n        } else {\n            comma = ', ';\n        }\n        if (index > 2) {\n            return;\n        }\n        if (index === 2) {\n            return m('span', ' + ' + (arr.length - 2));\n        }\n        return m('span', comma + person.name);\n    });\n}\n\n/**\n * Displays who modified the data and when. i.e. \"6 days ago, by Uguz\"\n * @param {Object} item A Treebeard _item object for the row involved. Node information is inside item.data\n * @private\n */\nfunction _poModified(item) {\n    var personString = '';\n    var dateString = '';\n    if (item.data.modifiedDelta === 0) {\n        return m('span');\n    }\n    dateString = moment.utc(item.data.dateModified).fromNow();\n    if (item.data.modifiedBy !== '') {\n        personString = ', by ' + item.data.modifiedBy.toString();\n    }\n    return m('span', dateString + personString);\n}\n\n/**\n * Organizes all the row displays based on what that item requires.\n * @param {Object} item A Treebeard _item object for the row involved. Node information is inside item.data\n * @returns {Array} An array of columns as col objects\n * @this Treebeard.controller Check Treebeard API For available methods\n * @private\n */\nfunction _poResolveRows(item) {\n    var css = '',\n        draggable = false,\n        default_columns;\n    if (item.data.permissions) {\n        draggable = item.data.permissions.movable || item.data.permissions.copyable;\n    }\n    if(this.isMultiselected(item.id)){\n        item.css = 'fangorn-selected';\n    } else {\n        item.css = '';\n    }\n\n    if (draggable) {\n        css = 'po-draggable';\n    }\n\n    default_columns = [{\n        data : 'name',  // Data field name\n        folderIcons : true,\n        filter : true,\n        css : css,\n        custom : _poTitleColumn\n    }, {\n        data : 'contributors',\n        filter : false,\n        custom : _poContributors\n    }, {\n        data : 'dateModified',\n        filter : false,\n        custom : _poModified\n    }];\n    return default_columns;\n}\n\n/**\n * Organizes the information for Column title row.\n * @returns {Array} An array of columns with pertinent column information\n * @private\n */\nfunction _poColumnTitles() {\n    var columns = [];\n    columns.push({\n        title: 'Name',\n        width : '50%',\n        sort : true,\n        sortType : 'text'\n    }, {\n        title : 'Contributors',\n        width : '25%',\n        sort : false\n    }, {\n        title : 'Modified',\n        width : '25%',\n        sort : false\n    });\n    return columns;\n}\n\n/**\n * Checks if folder toggle is permitted (i.e. contents are private)\n * @param {Object} item A Treebeard _item object. Node information is inside item.data\n * @this Treebeard.controller\n * @returns {boolean}\n * @private\n */\nfunction _poToggleCheck(item) {\n    if (item.data.permissions.view) {\n        return true;\n    }\n    item.notify.update('Not allowed: Private folder', 'warning', 1, undefined);\n    return false;\n}\n\n/**\n * Returns custom folder toggle icons for OSF\n * @param {Object} item A Treebeard _item object. Node information is inside item.data\n * @this Treebeard.controller\n * @returns {string} Returns a mithril template with m() function, or empty string.\n * @private\n */\nfunction _poResolveToggle(item) {\n    var toggleMinus = m('i.fa.fa-minus'),\n        togglePlus = m('i.fa.fa-plus'),\n        childrenCount = item.data.childrenCount || item.children.length;\n    if (item.kind === 'folder' && childrenCount > 0 && item.depth > 1) {\n        if (item.open) {\n            return toggleMinus;\n        }\n        return togglePlus;\n    }\n    return '';\n}\n\n/**\n * Resolves lazy load url for fetching children\n * @param {Object} item A Treebeard _item object for the row involved. Node information is inside item.data\n * @this Treebeard.controller\n * @returns {String|Boolean} Returns the fetch URL in string or false if there is no url.\n * @private\n */\nfunction _poResolveLazyLoad(item) {\n\n    return '/api/v1/dashboard/' + item.data.node_id;\n}\n\n/**\n * Hook to run after lazyloading has successfully loaded\n * @param {Object} item A Treebeard _item object for the row involved. Node information is inside item.data\n * @this Treebeard.controller\n * @private\n */\nfunction expandStateLoad(item) {\n    var tb = this,\n        i;\n    if (item.children.length === 0 && item.data.childrenCount > 0){\n        item.data.childrenCount = 0;\n        tb.updateFolder(null, item);\n    }\n\n    if (item.data.isPointer && !item.data.parentIsFolder) {\n        item.data.expand = false;\n    }\n    if (item.children.length > 0 && item.depth > 0) {\n        for (i = 0; i < item.children.length; i++) {\n            if (item.children[i].data.expand) {\n                tb.updateFolder(null, item.children[i]);\n            }\n            if (tb.multiselected()[0] && item.children[i].data.node_id === tb.multiselected()[0].data.node_id) {\n                triggerClickOnItem.call(tb, item.children[i], true);\n            }\n        }\n    }\n    _cleanupMithril();\n}\n\n/**\n * Loads the children of an item that need to be expanded. Unique to Projectorganizer\n * @private\n */\nfunction _poLoadOpenChildren() {\n    var tb = this;\n    tb.treeData.children.map(function (item) {\n        if (item.data.expand) {\n            tb.updateFolder(null, item);\n        }\n    });\n}\n\n/**\n * Hook to run after multiselect is run when an item is selected.\n * @param event Browser click event object\n * @param {Object} tree A Treebeard _item object. Node information is inside item.data\n * @this Treebeard.controller\n * @private\n */\nfunction _poMultiselect(event, tree) {\n    var tb = this;\n    filterRowsNotInParent.call(tb, tb.multiselected());\n    var scrollToItem = false;\n    if (tb.toolbarMode() === 'search') {\n        _dismissToolbar.call(tb);\n        scrollToItem = true;\n        // recursively open parents of the selected item but do not lazyload;\n        Fangorn.Utils.openParentFolders.call(tb, tree);\n    }\n    if (tb.multiselected().length === 1) {\n        // temporarily remove classes until mithril redraws raws with another hover.\n        tb.inputValue(tb.multiselected()[0].data.name);\n        tb.select('#tb-tbody').removeClass('unselectable');\n        if (scrollToItem) {\n            Fangorn.Utils.scrollToFile.call(tb, tb.multiselected()[0].id);\n        }\n    } else if (tb.multiselected().length > 1) {\n        tb.select('#tb-tbody').addClass('unselectable');\n    }\n    m.redraw();\n}\n\n/**\n * Deletes pointers based on their ids from the folder specified\n * @param {String} pointerIds Unique node ids\n * @param folderToDeleteFrom  What it says\n */\nfunction deleteMultiplePointersFromFolder(pointerIds, folderToDeleteFrom) {\n    var tb = this,\n        folderNodeId,\n        url,\n        postData,\n        deleteAction;\n    if (pointerIds.length > 0) {\n        folderNodeId = folderToDeleteFrom.data.node_id;\n        url = '/api/v1/folder/' + folderNodeId + '/pointers/';\n        postData = JSON.stringify({pointerIds: pointerIds});\n        deleteAction = $.ajax({\n            type: 'DELETE',\n            url: url,\n            data: postData,\n            contentType: 'application/json',\n            dataType: 'json'\n        });\n        deleteAction.done(function () {\n            tb.updateFolder(null, folderToDeleteFrom);\n            tb.clearMultiselect();\n        });\n        deleteAction.fail(function (jqxhr, textStatus, errorThrown) {\n            $osf.growl('Error:', textStatus + '. ' + errorThrown);\n        });\n    }\n}\n\n/**\n * When multiple rows are selected remove those that are not in the parent\n * @param {Array} rows List of item objects\n * @returns {Array} newRows Returns the revised list of rows\n */\nfunction filterRowsNotInParent(rows) {\n    var tb = this;\n    if (tb.multiselected().length < 2) {\n        return tb.multiselected();\n    }\n    var i, newRows = [],\n        originalRow = tb.find(tb.multiselected()[0].id),\n        originalParent,\n        currentItem;\n    var changeColor = function() { $(this).css('background-color', ''); };\n    if (typeof originalRow !== 'undefined') {\n        originalParent = originalRow.parentID;\n        for (i = 0; i < rows.length; i++) {\n            currentItem = rows[i];\n            if (currentItem.parentID === originalParent && currentItem.id !== -1) {\n                newRows.push(rows[i]);\n            } else {\n                $('.tb-row[data-id=\"' + rows[i].id + '\"]').stop().css('background-color', '#D18C93').animate({ backgroundColor: '#fff'}, 500, changeColor);\n            }\n        }\n    }\n    tb.multiselected(newRows);\n    tb.highlightMultiselect();\n    return newRows;\n}\n\n/**\n * Hook for the drag start event on jquery\n * @param event jQuery UI drggable event object\n * @param ui jQuery UI draggable ui object\n * @private\n */\nfunction _poDragStart(event, ui) {\n    var tb = this;\n    var itemID = $(event.target).attr('data-id'),\n        item = tb.find(itemID);\n    if (tb.multiselected().length < 2) {\n        tb.multiselected([item]);\n    }\n}\n\n/**\n * Hook for the drop event of jQuery UI droppable\n * @param event jQuery UI droppable event object\n * @param ui jQuery UI droppable ui object\n * @private\n */\nfunction _poDrop(event, ui) {\n    var tb = this;\n    var items = tb.multiselected().length === 0 ? [tb.find(tb.selected)] : tb.multiselected(),\n        folder = tb.find($(event.target).attr('data-id'));\n    dropLogic.call(tb, event, items, folder);\n}\n\n/**\n * Hook for the over event of jQuery UI droppable\n * @param event jQuery UI droppable event object\n * @param ui jQuery UI droppable ui object\n * @private\n */\nfunction _poOver(event, ui) {\n    var tb = this;\n    var items = tb.multiselected().length === 0 ? [tb.find(tb.selected)] : tb.multiselected(),\n        folder = tb.find($(event.target).attr('data-id')),\n        dragState = dragLogic.call(tb, event, items, ui);\n    $('.tb-row').removeClass('tb-h-success po-hover');\n    if (dragState !== 'forbidden') {\n        $('.tb-row[data-id=\"' + folder.id + '\"]').addClass('tb-h-success');\n    } else {\n        $('.tb-row[data-id=\"' + folder.id + '\"]').addClass('po-hover');\n    }\n}\n\n// Sets the state of the alt key by listening for key presses in the document.\nvar altKey = false;\n$(document).keydown(function (e) {\n    if (e.altKey) {\n        altKey = true;\n    }\n});\n$(document).keyup(function (e) {\n    if (!e.altKey) {\n        altKey = false;\n    }\n});\n\n/**\n * Sets the copy state based on which item is being dragged on which other item\n * @param {Object} event Browser drag event\n * @param {Array} items List of items being dragged at the time. Each item is a _item object\n * @param {Object} ui jQuery UI draggable drag ui object\n * @returns {String} copyMode One of the copy states, from 'copy', 'move', 'forbidden'\n */\nfunction dragLogic(event, items, ui) {\n    var canCopy = true,\n        canMove = true,\n        folder = this.find($(event.target).attr('data-id')),\n        isSelf = false,\n        dragGhost = $('.tb-drag-ghost');\n    items.forEach(function (item) {\n        if (!isSelf) {\n            isSelf = item.id === folder.id;\n        }\n        canCopy = canCopy && item.data.permissions.copyable;\n        canMove = canMove && item.data.permissions.movable;\n    });\n    if (canAcceptDrop(items, folder) && (canMove || canCopy)) {\n        if (canMove && canCopy) {\n            if (altKey) {\n                copyMode = 'copy';\n            } else {\n                copyMode = 'move';\n            }\n        }\n        if (canMove && !canCopy) {\n            copyMode = 'move';\n        }\n        if (canCopy && !canMove) {\n            copyMode = 'copy';\n        }\n    } else {\n        copyMode = 'forbidden';\n    }\n    if (isSelf) {\n        copyMode = 'forbidden';\n    }\n    // Set the cursor to match the appropriate copy mode\n    // Remember that Treebeard is using tb-drag-ghost instead of ui.helper\n\n    switch (copyMode) {\n    case 'forbidden':\n        dragGhost.css('cursor', 'not-allowed');\n        break;\n    case 'copy':\n        dragGhost.css('cursor', 'copy');\n        break;\n    case 'move':\n        dragGhost.css('cursor', 'move');\n        break;\n    default:\n        dragGhost.css('cursor', 'default');\n    }\n    return copyMode;\n}\n\n/**\n * Checks if the folder can accept the items dropped on it\n * @param {Array} items List of items being dragged at the time. Each item is a _item object\n * @param {Object} folder Folder information as _item object, the drop target\n * @returns {boolean} canDrop Whether drop can happen\n */\nfunction canAcceptDrop(items, folder, theCopyMode) {\n    if (typeof theCopyMode === 'undefined') {\n        theCopyMode = copyMode;\n    }\n    var representativeItem,\n        itemParentNodeId,\n        hasComponents,\n        hasFolders,\n        copyable,\n        movable,\n        canDrop;\n    if (folder.data.isSmartFolder || !folder.data.isFolder) {\n        return false;\n    }\n    // if the folder is contained by the item, return false\n    representativeItem = items[0];\n    if (representativeItem.isAncestor(folder) || representativeItem.id === folder.id) {\n        return false;\n    }\n    // If trying to drop on the folder it came from originally, return false\n    itemParentNodeId = representativeItem.parent().data.node_id;\n    if (itemParentNodeId === folder.data.node_id) {\n        return false;\n    }\n    hasComponents = false;\n    hasFolders = false;\n    copyable = true;\n    movable = true;\n    canDrop = true;\n    items.forEach(function (item) {\n        hasComponents = hasComponents || item.data.isComponent;\n        hasFolders = hasFolders || item.data.isFolder;\n        copyable = copyable && item.data.permissions.copyable;\n        movable = movable && item.data.permissions.movable;\n    });\n    if (hasComponents) {\n        canDrop = canDrop && folder.data.permissions.acceptsComponents;\n    }\n    if (hasFolders) {\n        canDrop = canDrop && folder.data.permissions.acceptsFolders;\n    }\n    if (theCopyMode === 'move') {\n        canDrop = canDrop && folder.data.permissions.acceptsMoves && movable;\n    }\n    if (theCopyMode === 'copy') {\n        canDrop = canDrop && folder.data.permissions.acceptsCopies && copyable;\n    }\n    return canDrop;\n}\n\n/**\n * Where the drop actions happen\n * @param event jQuery UI drop event\n * @param {Array} items List of items being dragged at the time. Each item is a _item object\n * @param {Object} folder Folder information as _item object\n */\nfunction dropLogic(event, items, folder) {\n    var tb = this,\n        theFolderNodeID,\n        getChildrenURL,\n        folderChildren,\n        sampleItem,\n        itemParent,\n        itemParentNodeID,\n        getAction;\n    if (typeof folder !== 'undefined' && !folder.data.isSmartFolder && folder !== null && folder.data.isFolder) {\n        theFolderNodeID = folder.data.node_id;\n        getChildrenURL = folder.data.apiURL + 'get_folder_pointers/';\n        sampleItem = items[0];\n        itemParent = sampleItem.parent();\n        itemParentNodeID = itemParent.data.node_id;\n        if (itemParentNodeID !== theFolderNodeID) { // This shouldn't happen, but if it does, it's bad\n            getAction = $.getJSON(getChildrenURL, function (data) {\n                folderChildren = data;\n                var itemsToMove = [],\n                    itemsNotToMove = [],\n                    postInfo;\n                items.forEach(function (item) {\n                    if ($.inArray(item.data.node_id, folderChildren) === -1) { // pointer not in folder to be moved to\n                        itemsToMove.push(item.data.node_id);\n                    } else if (copyMode === 'move') { // Pointer is already in the folder and it's a move\n                                // We  need to make sure not to delete the folder if the item is moved to the same folder.\n                                // When we add the ability to reorganize within a folder, this will have to change.\n                        itemsNotToMove.push(item.data.node_id);\n                    }\n                });\n                postInfo = {\n                    'copy': {\n                        'url': '/api/v1/project/' + theFolderNodeID + '/pointer/',\n                        'json': {\n                            nodeIds: itemsToMove\n                        }\n                    },\n                    'move': {\n                        'url': '/api/v1/pointers/move/',\n                        'json': {\n                            pointerIds: itemsToMove,\n                            toNodeId: theFolderNodeID,\n                            fromNodeId: itemParentNodeID\n                        }\n                    }\n                };\n                if (copyMode === 'copy' || copyMode === 'move') {\n                    deleteMultiplePointersFromFolder.call(tb, itemsNotToMove, itemParent);\n                    if (itemsToMove.length > 0) {\n                        var url = postInfo[copyMode].url,\n                            postData = JSON.stringify(postInfo[copyMode].json),\n                            outerFolder = whichIsContainer.call(tb, itemParent, folder),\n                            postAction = $.ajax({\n                                type: 'POST',\n                                url: url,\n                                data: postData,\n                                contentType: 'application/json',\n                                dataType: 'json'\n                            });\n                        postAction.always(function (result) {\n                            if (copyMode === 'move') {\n                                if (!outerFolder) {\n                                    tb.updateFolder(null, itemParent);\n                                    tb.updateFolder(null, folder);\n                                } else {\n                                    // if item is closed folder save expand state to be open\n                                    if(!folder.data.expand){\n                                        saveExpandState(folder.data, function(){\n                                            tb.updateFolder(null, outerFolder);\n                                        });\n                                    } else {\n                                        tb.updateFolder(null, outerFolder);\n                                    }\n                                }\n                            } else {\n                                tb.updateFolder(null, folder);\n                            }\n                        });\n                        postAction.fail(function (jqxhr, textStatus, errorThrown) {\n                            $osf.growl('Error:', textStatus + '. ' + errorThrown);\n                        });\n                    }\n                }\n            });\n            getAction.fail(function (jqxhr, textStatus, errorThrown) {\n                $osf.growl('Error:', textStatus + '. ' + errorThrown);\n            });\n        } else {\n            Raven.captureMessage('Project dashboard: Parent node (' + itemParentNodeID + ') == Folder Node (' + theFolderNodeID + ')');\n        }\n    } else {\n        if (typeof folder === 'undefined') {\n            Raven.captureMessage('onDrop folder is undefined.');\n        }\n    }\n    $('.project-organizer-dand').css('cursor', 'default');\n}\n\n/**\n * Checks if one of the items being moved contains the other. To check for adding parents to children\n * @param {Object} itemOne Treebeard _item object, has the _item API\n * @param {Object} itemTwo Treebeard _item object, has the _item API\n * @returns {null|Object} Returns object if one is containing the other. Null if neither or both\n */\nfunction whichIsContainer(itemOne, itemTwo) {\n    var isOneAncestor = itemOne.isAncestor(itemTwo),\n        isTwoAncestor = itemTwo.isAncestor(itemOne);\n    if (isOneAncestor && isTwoAncestor) {\n        return null;\n    }\n    if (isOneAncestor) {\n        return itemOne;\n    }\n    if (isTwoAncestor) {\n        return itemTwo;\n    }\n    return null;\n}\n\nfunction _cleanupMithril() {\n    // Clean up Mithril related redraw issues\n    $('.tb-toggle-icon').each(function(){\n        var children = $(this).children('i');\n        if (children.length > 1) {\n            children.last().remove();\n        }\n    });\n}\n\nfunction _addFolderEvent() {\n    var tb = this;\n    var val = $.trim($('#addNewFolder').val());\n    if (tb.multiselected().length !== 1 || val.length < 1) {\n        tb.toolbarMode(Fangorn.Components.toolbarModes.DEFAULT);\n        return;\n    }\n    var item = tb.multiselected()[0];\n    var theItem = item.data;\n    var url = '/api/v1/folder/';\n    var postData = {\n            node_id: theItem.node_id,\n            title: val\n        };\n    theItem.expand = false;\n    saveExpandState(theItem, function () {\n        var putAction = $osf.putJSON(url, postData);\n        putAction.done(function () {\n            tb.updateFolder(null, item);\n            triggerClickOnItem.call(tb, item);\n        }).fail($osf.handleJSONError);\n\n    });\n    tb.toolbarMode(Fangorn.Components.toolbarModes.DEFAULT);\n}\n\nfunction _renameEvent() {\n    var tb = this;\n    var val = $.trim($('#renameInput').val());\n    if (tb.multiselected().length !== 1 || val.length < 1) {\n        tb.toolbarMode(Fangorn.Components.toolbarModes.DEFAULT);\n        return;\n    }\n    var item = tb.multiselected()[0];\n    var theItem = item.data;\n    var url = theItem.apiURL + 'edit/';\n    var postAction;\n    var postData = {\n            name: 'title',\n            value: val\n        };\n    postAction = $osf.postJSON(url, postData);\n    postAction.done(function () {\n        tb.updateFolder(null, tb.find(1));\n        // Also update every\n    }).fail($osf.handleJSONError);\n    tb.toolbarMode(Fangorn.Components.toolbarModes.DEFAULT);\n}\n\nfunction applyTypeahead() {\n    var tb = this;\n    var item = tb.multiselected()[0];\n    var theItem = item.data;\n    projectOrganizer.myProjects.initialize();\n    projectOrganizer.publicProjects.initialize();\n    // injecting error into search results from https://github.com/twitter/typeahead.js/issues/747\n    var mySourceWithEmptySelectable = function (q, cb) {\n        var emptyMyProjects = [{ error: 'There are no matching projects to which you contribute.' }];\n        projectOrganizer.myProjects.get(q, injectEmptySelectable);\n        function injectEmptySelectable(suggestions) {\n            if (suggestions.length === 0) {\n                cb(emptyMyProjects);\n            } else {\n                cb(suggestions);\n            }\n        }\n    };\n    var publicSourceWithEmptySelectable = function (q, cb) {\n        var emptyPublicProjects = { error: 'There are no matching public projects.' };\n        projectOrganizer.publicProjects.get(q, injectEmptySelectable);\n        function injectEmptySelectable(suggestions) {\n            if (suggestions.length === 0) {\n                cb([emptyPublicProjects]);\n            } else {\n                cb(suggestions);\n            }\n        }\n    };\n\n    if (!theItem.isSmartFolder) {\n        $('#addprojectInput').typeahead('destroy');\n        $('#addprojectInput').typeahead({\n            highlight: true\n        }, {\n            name: 'my-projects',\n            displayKey: function (data) {\n                return data.name;\n            },\n            source: mySourceWithEmptySelectable,\n            templates: {\n                header: function () {\n                    return '<h3 class=\"category\">My Projects</h3>';\n                },\n                suggestion: function (data) {\n                    if (typeof data.name !== 'undefined') {\n                        return '<p>' + data.name + '</p>';\n                    }\n                    return '<p>' + data.error + '</p>';\n                }\n            }\n        }, {\n            name: 'public-projects',\n            displayKey: function (data) {\n                return data.name;\n            },\n            source: publicSourceWithEmptySelectable,\n            templates: {\n                header: function () {\n                    return '<h3 class=\"category\">Public Projects</h3>';\n                },\n                suggestion: function (data) {\n                    if (typeof data.name !== 'undefined') {\n                        return '<p>' + data.name + '</p>';\n                    }\n                    return '<p>' + data.error + '</p>';\n                }\n            }\n        });\n        $('#addprojectInput').bind('keyup', function (event) {\n            var key = event.keyCode || event.which,\n                buttonEnabled = $('#add-link-button').hasClass('tb-disabled');\n\n            if (key === 13) {\n                if (buttonEnabled) {\n                    $('#add-link-button').click(); //submits if the control is active\n                }\n            } else {\n                $('#add-link-warning').removeClass('p-sm').text('');\n                $('#add-link-button').addClass('tb-disabled');\n                linkName = '';\n                linkID = '';\n            }\n        });\n        $('#addprojectInput').bind('typeahead:selected', function (obj, datum, name) {\n            var getChildrenURL = theItem.apiURL + 'get_folder_pointers/',\n                children;\n            $.getJSON(getChildrenURL, function (data) {\n                children = data;\n                if (children.indexOf(datum.node_id) === -1) {\n                    $('#add-link-button').removeClass('tb-disabled');\n                    linkName = datum.name;\n                    linkID = datum.node_id;\n                } else {\n                    $('#add-link-warning').addClass('p-sm').text('This project is already in the folder');\n                }\n            }).fail($osf.handleJSONError);\n        });\n    }\n\n}\n\nfunction addProjectEvent() {\n    var tb = this;\n    var item = tb.multiselected()[0];\n    var theItem = item.data;\n    var url = '/api/v1/pointer/',\n        postData = JSON.stringify({\n            pointerID: linkID,\n            toNodeID: theItem.node_id\n        });\n    theItem.expand = false;\n    saveExpandState(theItem, function () {\n        var postAction = $.ajax({\n            type: 'POST',\n            url: url,\n            data: postData,\n            contentType: 'application/json',\n            dataType: 'json'\n        });\n        postAction.done(function () {\n            tb.updateFolder(null, item);\n        });\n    });\n    triggerClickOnItem.call(tb, item);\n    tb.toolbarMode(Fangorn.Components.toolbarModes.DEFAULT);\n    tb.select('.tb-header-row .twitter-typeahead').remove();\n}\n\nfunction showLegend() {\n    var tb = this;\n    var keys = Object.keys(projectOrganizerCategories);\n    var data = keys.map(function (key) {\n        return {\n            icon: iconmap.componentIcons[key] || iconmap.projectIcons[key],\n            label: nodeCategories[key] || projectOrganizerCategories[key]\n        };\n    });\n    var repr = function (item) {\n        return [\n            m('span[style=\"width:18px\"]', {\n                className: item.icon\n            }),\n            '  ',\n            item.label\n        ];\n    };\n    var opts = {\n        footer: m('span', ['*lighter color denotes a registration (e.g. ',\n            m('span', {\n                className: iconmap.componentIcons.data + ' po-icon'\n            }),\n            ' becomes  ',\n            m('span', {\n                className: iconmap.componentIcons.data + ' po-icon-registered'\n            }),\n            ' )'\n            ])\n    };\n    var closeBtn = m('button', {\n        class:'btn btn-default',\n        type:'button',\n        onclick : function(event) { tb.modal.dismiss(); } }, 'Close');\n\n    tb.modal.update(legendView(data, repr, opts), closeBtn, m('h3.modal-title', 'Legend'));\n    tb.modal.show();\n}\n\nvar POItemButtons = {\n    view : function (ctrl, args, children) {\n        var tb = args.treebeard;\n        var item = args.item;\n        var buttons = [];\n        if (!item.data.urls) {\n            return m('div');\n        }\n        var url = item.data.urls.fetch;\n        var theItem = item.data;\n        var theParentNode = item.parent();\n        var theParentNodeID = theParentNode.data.node_id;\n        $('.fangorn-toolbar-icon').tooltip('destroy');\n        if (!item.data.isSmartFolder) {\n            if (url !== null) {\n                buttons.push(\n                    m.component(Fangorn.Components.button, {\n                        onclick: function (event) {\n                            _gotoEvent.call(tb, event, item);\n                        },\n                        icon: 'fa fa-external-link',\n                        className: 'text-primary'\n                    }, 'Open')\n                );\n            }\n        }\n        if (!item.data.isSmartFolder && (item.data.isDashboard || item.data.isFolder)) {\n            buttons.push(\n                m.component(Fangorn.Components.button, {\n                    onclick: function (event) {\n                        tb.toolbarMode(Fangorn.Components.toolbarModes.ADDFOLDER);\n                    },\n                    icon: 'fa fa-cubes',\n                    className: 'text-primary'\n                }, 'Add Collection'),\n                m.component(Fangorn.Components.button, {\n                    onclick: function (event) {\n                        tb.toolbarMode(Fangorn.Components.toolbarModes.ADDPROJECT);\n                    },\n                    icon: 'fa fa-cube',\n                    className: 'text-primary'\n                }, 'Add Existing Project')\n            );\n        }\n        if (!item.data.isFolder && item.data.parentIsFolder && !item.parent().data.isSmartFolder) {\n            buttons.push(\n                m.component(Fangorn.Components.button, {\n                    onclick: function (event) {\n                        url = '/api/v1/folder/' + theParentNodeID + '/pointer/' + theItem.node_id;\n                        var deleteAction = $.ajax({\n                            type: 'DELETE',\n                            url: url,\n                            contentType: 'application/json',\n                            dataType: 'json'\n                        });\n                        deleteAction.done(function () {\n                            tb.updateFolder(null, theParentNode);\n                            tb.clearMultiselect();\n                        });\n                        deleteAction.fail(function (xhr, status, error) {\n                            Raven.captureMessage('Remove from collection in PO failed.', {\n                                url: url,\n                                textStatus: status,\n                                error: error\n                            });\n                        });\n                    },\n                    icon: 'fa fa-minus',\n                    className: 'text-primary'\n                }, 'Remove from Collection')\n            );\n        }\n        if (!item.data.isDashboard && !item.data.isRegistration && item.data.permissions && item.data.permissions.edit) {\n            buttons.push(\n                m.component(Fangorn.Components.button, {\n                    onclick: function (event) {\n                        tb.toolbarMode(Fangorn.Components.toolbarModes.RENAME);\n                    },\n                    icon: 'fa fa-font',\n                    className: 'text-primary'\n                }, 'Rename')\n            );\n        }\n        if (item.data.isFolder && !item.data.isDashboard && !item.data.isSmartFolder) {\n            buttons.push(\n                m.component(Fangorn.Components.button, {\n                    onclick: function (event) {\n                        _deleteFolder.call(tb, item, theItem);\n                    },\n                    icon: 'fa fa-trash',\n                    className: 'text-danger'\n                }, 'Delete')\n            );\n        }\n        return m('span', buttons);\n    }\n};\n\nvar _dismissToolbar = function () {\n    var tb = this;\n    if (tb.toolbarMode() === Fangorn.Components.toolbarModes.SEARCH){\n        tb.resetFilter();\n    }\n    tb.toolbarMode(Fangorn.Components.toolbarModes.DEFAULT);\n    tb.filterText('');\n    tb.select('.tb-header-row .twitter-typeahead').remove();\n    m.redraw();\n};\n\nvar POToolbar = {\n    controller: function (args) {\n        var self = this;\n        self.tb = args.treebeard;\n        self.tb.toolbarMode = m.prop(Fangorn.Components.toolbarModes.DEFAULT);\n        self.tb.inputValue = m.prop('');\n        self.items = args.treebeard.multiselected;\n        self.mode = self.tb.toolbarMode;\n        self.helpText = m.prop('');\n        self.dismissToolbar = _dismissToolbar.bind(self.tb);\n    },\n    view: function (ctrl) {\n        var templates = {};\n        var generalButtons = [];\n        var rowButtons = [];\n        var dismissIcon = m.component(Fangorn.Components.button, {\n            onclick: ctrl.dismissToolbar,\n            icon : 'fa fa-times'\n        }, '');\n        templates[Fangorn.Components.toolbarModes.SEARCH] =  [\n            m('.col-xs-10', [\n                ctrl.tb.options.filterTemplate.call(ctrl.tb)\n            ]),\n            m('.col-xs-2.tb-buttons-col',\n                m('.fangorn-toolbar.pull-right',\n                    [\n                        m.component(Fangorn.Components.button, {\n                            onclick: ctrl.dismissToolbar,\n                            icon : 'fa fa-times'\n                        }, 'Close')\n                    ]\n                    )\n                )\n        ];\n        templates[Fangorn.Components.toolbarModes.ADDFOLDER] = [\n            m('.col-xs-9',\n                m.component(Fangorn.Components.input, {\n                    onkeypress: function (event) {\n                        if (ctrl.tb.pressedKey === ENTER_KEY) {\n                            _addFolderEvent.call(ctrl.tb);\n                        }\n                    },\n                    id : 'addNewFolder',\n                    helpTextId : 'addFolderHelp',\n                    placeholder : 'New collection name',\n                }, ctrl.helpText())\n                ),\n            m('.col-xs-3.tb-buttons-col',\n                m('.fangorn-toolbar.pull-right',\n                    [\n                        m.component(Fangorn.Components.button, {\n                            onclick: function () {\n                                _addFolderEvent.call(ctrl.tb);\n                            },\n                            icon : 'fa fa-plus',\n                            className : 'text-info'\n                        }, 'Add'),\n                        dismissIcon\n                    ]\n                    )\n                )\n        ];\n        templates[Fangorn.Components.toolbarModes.RENAME] = [\n            m('.col-xs-9',\n                m.component(Fangorn.Components.input, {\n                    onkeypress: function (event) {\n                        ctrl.tb.inputValue($(event.target).val());\n                        if (ctrl.tb.pressedKey === ENTER_KEY) {\n                            _renameEvent.call(ctrl.tb);\n                        }\n                    },\n                    id : 'renameInput',\n                    helpTextId : 'renameHelpText',\n                    placeholder : null,\n                    value : ctrl.tb.inputValue()\n                }, ctrl.helpText())\n                ),\n            m('.col-xs-3.tb-buttons-col',\n                m('.fangorn-toolbar.pull-right',\n                    [\n                        m.component(Fangorn.Components.button, {\n                            onclick: function () {\n                                _renameEvent.call(ctrl.tb);\n                            },\n                            icon : 'fa fa-pencil',\n                            className : 'text-info'\n                        }, 'Rename'),\n                        dismissIcon\n                    ]\n                    )\n                )\n        ];\n        templates[Fangorn.Components.toolbarModes.ADDPROJECT] = [\n            m('.col-xs-9', [\n                m('input#addprojectInput.tb-header-input', {\n                    config : function () {\n                        applyTypeahead.call(ctrl.tb);\n                    },\n                    onkeypress : function (event) {\n                        if (ctrl.tb.pressedKey === ENTER_KEY) {\n                            addProjectEvent.call(ctrl.tb);\n                        }\n                    },\n                    type : 'text',\n                    placeholder : 'Name of the project to find'\n                }),\n                m('#add-link-warning.text-warning')\n            ]\n                ),\n            m('.col-xs-3.tb-buttons-col',\n                m('.fangorn-toolbar.pull-right',\n                    [\n                        m.component(Fangorn.Components.button, {\n                            onclick: function () {\n                                addProjectEvent.call(ctrl.tb);\n                            },\n                            icon : 'fa fa-plus',\n                            className : 'text-info'\n                        }, 'Add'),\n                        dismissIcon\n                    ]\n                    )\n                )\n        ];\n        generalButtons.push(\n            m.component(Fangorn.Components.button, {\n                onclick: function (event) {\n                    ctrl.mode(Fangorn.Components.toolbarModes.SEARCH);\n                },\n                icon: 'fa fa-search',\n                className : 'text-primary'\n            }, 'Search'),\n            m.component(Fangorn.Components.button, {\n                onclick: function (event) {\n                    showLegend.call(ctrl.tb);\n                },\n                icon: 'fa fa-info',\n                className : 'text-info'\n            }, '')\n        );\n        if(ctrl.items().length > 1){\n            var someItemsAreFolders = false;\n            var pointerIds = [];\n            var theParentNode = ctrl.items()[0].parent();\n            ctrl.items().forEach(function (item) {\n                var thisItem = item.data;\n                someItemsAreFolders = (\n                    someItemsAreFolders ||\n                    thisItem.isFolder ||\n                    thisItem.isSmartFolder ||\n                    thisItem.parentIsSmartFolder ||\n                    !thisItem.permissions.movable\n                );\n                pointerIds.push(thisItem.node_id);\n            });\n            if(!someItemsAreFolders){\n                generalButtons.push(\n                    m.component(Fangorn.Components.button, {\n                        onclick: function (event) {\n                            deleteMultiplePointersFromFolder.call(ctrl.tb, pointerIds, theParentNode);\n                        },\n                        icon: 'fa fa-minus',\n                        className : 'text-primary'\n                    }, 'Remove All from Collection')\n                );\n            }\n        }\n        if (ctrl.items().length === 1) {\n            rowButtons = m.component(POItemButtons, {treebeard : ctrl.tb, item : ctrl.items()[0]});\n        }\n        templates[Fangorn.Components.toolbarModes.DEFAULT] = m('.col-xs-12',m('.pull-right', [rowButtons, generalButtons]));\n        return m('.row.tb-header-row', [\n            m('#headerRow', { config : function () {\n                $('#headerRow input').focus();\n            }}, [\n                templates[ctrl.mode()]\n            ])\n        ]);\n    }\n};\n\n\nfunction _deleteFolder(item) {\n    var tb = this;\n    var theItem = item.data;\n    function runDeleteFolder() {\n        var url = '/api/v1/folder/' + theItem.node_id;\n        var deleteAction = $.ajax({\n                type: 'DELETE',\n                url: url,\n                contentType: 'application/json',\n                dataType: 'json'\n            });\n        deleteAction.done(function () {\n            tb.updateFolder(null, item.parent());\n            tb.modal.dismiss();\n            tb.select('.tb-row').first().trigger('click');\n        });\n    }\n    var mithrilContent = m('div', [\n            m('p', 'Are you sure you want to delete this Collection? This will also delete any Collections ' +\n                'inside this one. You will not delete any projects in this Collection.')\n        ]);\n    var mithrilButtons = m('div', [\n            m('span.btn.btn-default', { onclick : function() { tb.modal.dismiss(); } }, 'Cancel'),\n            m('span.btn.btn-danger', { onclick : function() { runDeleteFolder(); }  }, 'Delete')\n        ]);\n    tb.modal.update(mithrilContent, mithrilButtons,  m('h3.break-word.modal-title', 'Delete \"' + theItem.name + '\"?'));\n}\n\n/**\n * OSF-specific Treebeard options common to all addons.\n * For documentation visit: https://github.com/caneruguz/treebeard/wiki\n */\nvar tbOptions = {\n    rowHeight : 35,         // user can override or get from .tb-row height\n    showTotal : 15,         // Actually this is calculated with div height, not needed. NEEDS CHECKING\n    paginate : false,       // Whether the applet starts with pagination or not.\n    paginateToggle : false, // Show the buttons that allow users to switch between scroll and paginate.\n    uploads : false,         // Turns dropzone on/off.\n    columnTitles : _poColumnTitles,\n    resolveRows : _poResolveRows,\n    showFilter : true,     // Gives the option to filter by showing the filter box.\n    title : false,          // Title of the grid, boolean, string OR function that returns a string.\n    allowMove : true,       // Turn moving on or off.\n    moveClass : 'po-draggable',\n    hoverClass : 'fangorn-hover',\n    hoverClassMultiselect : 'fangorn-selected',\n    togglecheck : _poToggleCheck,\n    sortButtonSelector : {\n        up : 'i.fa.fa-chevron-up',\n        down : 'i.fa.fa-chevron-down'\n    },\n    sortDepth : 1,\n    dragOptions : {},\n    dropOptions : {},\n    dragEvents : {\n        start : _poDragStart\n    },\n    dropEvents : {\n        drop : _poDrop,\n        over : _poOver\n    },\n    onload : function () {\n        var tb = this,\n            rowDiv = tb.select('.tb-row');\n        _poLoadOpenChildren.call(tb);\n        rowDiv.first().trigger('click');\n\n        $('.gridWrapper').on('mouseout', function () {\n            tb.select('.tb-row').removeClass('po-hover');\n        });\n    },\n    createcheck : function (item, parent) {\n        return true;\n    },\n    deletecheck : function (item) {\n        return true;\n    },\n    ontogglefolder : function (item, event) {\n        if (event) {\n            saveExpandState(item.data);\n        }\n        if (!item.open) {\n            item.load = false;\n        }\n        $('[data-toggle=\"tooltip\"]').tooltip();\n    },\n    onscrollcomplete : function () {\n        $('[data-toggle=\"tooltip\"]').tooltip();\n        _cleanupMithril();\n    },\n    onmultiselect : _poMultiselect,\n    resolveIcon : Fangorn.Utils.resolveIconView,\n    resolveToggle : _poResolveToggle,\n    resolveLazyloadUrl : _poResolveLazyLoad,\n    lazyLoadOnLoad : expandStateLoad,\n    resolveRefreshIcon : function () {\n        return m('i.fa.fa-refresh.fa-spin');\n    },\n    toolbarComponent : POToolbar,\n    naturalScrollLimit : 0,\n    removeIcon : function(){\n        return m.trust('&times;');\n    },\n};\n\n/**\n * Initialize Project organizer in the fashion of Fangorn. Prepeares an option object within ProjectOrganizer\n * @param options Treebeard type options to be extended with Treebeard default options.\n * @constructor\n */\nfunction ProjectOrganizer(options) {\n    this.options = $.extend({}, tbOptions, options);\n    this.grid = null; // Set by _initGrid\n    this.init();\n}\n/**\n * Project organizer prototype object with init functions set to Treebeard.\n * @type {{constructor: ProjectOrganizer, init: Function, _initGrid: Function}}\n */\nProjectOrganizer.prototype = {\n    constructor: ProjectOrganizer,\n    init: function () {\n        this._initGrid();\n    },\n    _initGrid: function () {\n        this.grid = new Treebeard(this.options);\n        return this.grid;\n    }\n};\n\nmodule.exports = {\n    ProjectOrganizer: ProjectOrganizer,\n    _whichIsContainer: whichIsContainer,\n    _canAcceptDrop: canAcceptDrop\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/projectorganizer.js\n ** module id = 181\n ** module chunks = 4\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/projectorganizer.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!/Users/laurenbarker/GitHub/osf.io/node_modules/style-loader/addStyles.js\")(content, {});\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tmodule.hot.accept(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/projectorganizer.css\", function() {\n\t\tvar newContent = require(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/projectorganizer.css\");\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\tupdate(newContent);\n\t});\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/css/projectorganizer.css\n ** module id = 184\n ** module chunks = 4\n **/","exports = module.exports = require(\"/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/cssToString.js\")();\nexports.push([module.id, \".po-hover-multiselect {\\n    background : lightgoldenrodyellow;\\n}\\n\\n/* @override http://localhost:5000/static/css/projectorganizer.css */\\n\\nspan.project-smart-folder.smart-folder{\\n    font-style: italic;\\n}\\n\\n/* Project organizer icons */\\nspan.project-organizer-icon-folder {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/folder.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-smart-folder {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/smart-folder.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-project {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/project.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-project:hover {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/project-hover.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-component {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/component.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-component:hover {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/component-hover.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-pointer {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/pointer.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-reg-pointer {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/reg-pointer.png');\\n    background-repeat: no-repeat;\\n}\\n\\n\\nspan.project-organizer-icon-reg-pointer:hover {\\n    background-image: url('/static/img/hgrid/pointer-hover.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-pointer:hover {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/pointer-hover.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-reg-project {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/reg-project.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-reg-project:hover {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/reg-project-hover.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-reg-component {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/reg-component.png');\\n    background-repeat: no-repeat;\\n}\\n\\nspan.project-organizer-icon-reg-component:hover {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    vertical-align: middle;\\n    background-image: url('/static/img/hgrid/reg-component-hover.png');\\n    background-repeat: no-repeat;\\n}\\n\\nbutton.project-organizer-icon-info {\\n    width: 20px;\\n    height: 20px;\\n    background-image: url('/static/img/hgrid/info.png');\\n    background-repeat: no-repeat;\\n}\\n\\nbutton.project-organizer-icon-visit {\\n    width: 20px;\\n    height: 20px;\\n    background-image: url('/static/img/hgrid/visit.png');\\n    background-repeat: no-repeat;\\n}\\n\\nbutton.hg-btn {\\n    background-color: transparent;\\n    border: 0px;\\n}\\n\\n\\n/* Preventing folders that are HGrid leaves from showing underlines when hovered over */\\n\\n.project-folder:hover {\\n    text-decoration: none !important;\\n}\\n\\nspan.project-folder {\\n    text-decoration: none;\\n}\\n\\n.hg-item-name:hover {\\n    text-decoration: none !important;\\n    cursor: default;\\n}\\n\\n/* Controls above the HGrid */\\n\\ndiv.project-grid-menu {\\n    text-align: right;\\n    margin-top: -20px;\\n}\\n\\ndiv.project-grid-menu span.pg-expand-all {\\n    color: #468cc8;\\n    text-decoration: underline;\\n    cursor: pointer;\\n    margin-right: 10px;\\n}\\n\\ndiv.project-grid-menu span.pg-collapse-all {\\n    color: #468cc8;\\n    text-decoration: underline;\\n    cursor: pointer;\\n    margin-right: 7px;\\n}\\n\\n.page-header .btn {\\n    margin-right: 5px;\\n}\\n\\n/* Project details box  */\\nspan.project-details {\\n    visibility: hidden;\\n}\\n\\n\\nspan.add-link-warning {\\n    color: #808080;\\n}\\n\\ndiv.add-folder-container {\\n    display: none;\\n\\n}\\n\\nspan.rename-container{\\n    display: none;\\n}\\n\\ndiv.project-details span.title {\\n    display: inline;\\n    overflow-x: hidden;\\n    font-size: 15px;\\n    overflow-x: hidden;\\n}\\n\\n\\n.project-action-icons img {\\n    margin-right: 4px;\\n    cursor:pointer;cursor:hand\\n}\\n\\ndiv.project-details {\\n    display: inline-block;\\n    width: 100%;\\n    background-color: #EEE;\\n    padding: 7px;\\n    margin-bottom: 10px;\\n}\\n\\ndiv.contributors {\\n    overflow-x: hidden;\\n}\\n\\n.organize-project-controls {\\n    z-index: 11;\\n}\\n\\ndiv.organize-project-controls {\\n    display: block;\\n    position: relative;\\n    bottom: 0;\\n    width: 100%;\\n    text-align: right;\\n}\\n\\n.organize-project-controls .organizeBtn.btn.btn-default {\\n    display: block;\\n    margin-right: 10px;\\n    float: left;\\n    margin-bottom: 10px;\\n}\\n\\n/* Typeahead autocomplete box */\\n\\n\\n\\n.organize-project-controls span.twitter-typeahead {\\n    width: 100%;\\n}\\n\\n/* Typeahead scaffolding */\\n/* ----------- */\\n\\n.tt-dropdown-menu,\\n.gist {\\n    text-align: left;\\n    overflow-x: hidden;\\n}\\n\\n/* Typeahead base styles */\\n/* ----------- */\\n\\n.typeahead,\\n.tt-query {\\n    width: 100%;\\n    height: 30px;\\n    font-size: 16px;\\n    border: 1px solid rgb(204, 204, 204);\\n    -webkit-border-radius: 4px;\\n    -moz-border-radius: 4px;\\n    border-radius: 4px;\\n    outline: none;\\n}\\ninput.typeahead.tt-input {\\nheight: 32px ;\\n}\\n\\n.typeahead {\\n    background-color: #fff;\\n}\\n\\n.tt-query {\\n    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\\n    -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\\n}\\n/* rgb of glow 106 176 232\\n*/\\n.tt-input, .typeahead {\\n    padding: 4px 10px;\\n}\\n\\n.tt-hint {\\n    color: #999;\\n    padding: 0px 12px 3px 8px\\n}\\nh3.category {\\n    font-size: 18px;\\n    margin-top: 4px;\\n    margin-left: 5px;\\n}\\n.tt-dropdown-menu {\\n    width: 422px;\\n    padding: 8px 0;\\n    background-color: #fff;\\n    border: 1px solid #ccc;\\n    border: 1px solid rgba(0, 0, 0, 0.2);\\n    -webkit-border-radius: 5px;\\n    -moz-border-radius: 5px;\\n    border-radius: 5px;\\n    -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, .2);\\n    -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, .2);\\n    box-shadow: 0 5px 10px rgba(0, 0, 0, .2);\\n    margin-top: 6px;\\n}\\n\\n.tt-suggestion {\\n    padding: 3px 5px;\\n    font-size: 12px;\\n    line-height: 14px;\\n}\\n\\n.tt-suggestion.tt-cursor {\\n    color: #fff;\\n    background-color: #0097cf;\\n\\n}\\n\\n/*.tt-suggestion p {\\n    margin: 0;\\n}*/\\n\\n.gist {\\n    font-size: 14px;\\n}\\n.tb-row {\\n    font-size: 13px;\\n    line-height: 30px;\\n}\\n\\n.po-hover {\\n    background : #E0EBF3;\\n}\\n\\n.tb-td {\\n    height: inherit;\\n    padding-top: 4px;\\n}\\n\\n/* Project Toolbar New Additions and Changes */\\n\\n.po-placeholder {\\n    line-height: 30px;\\n}\\n\\n#project-grid {\\n    margin-bottom: 5px;\\n}\\n\\n.organizer-legend {\\n    font-size: 13px;\\n    padding-left: 4px;\\n}\\n\\n.organizer-legend img {\\n    vertical-align: bottom;\\n    margin-right: 4px;\\n}\\n.tb-h-success {\\n    background: #B8ECC0;\\n}\\n.po-icon-registered {\\n    color: #D4D4D4;\\n}\\n.po-icon {\\n    color: #5E5E5E;\\n}\\n.fangorn-selected .po-icon-registered {\\n    color: #CCCCCC;\\n}\\n.fangorn-selected .po-icon {\\n    color: #FFFFFF;\\n}\\n.po-modal {\\n    width: auto;\\n}\\n.smaller {\\n    font-size: 75%;\\n}\\n\\n.registration-archiving {\\n    cursor: default;\\n}\", \"\"]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/css-loader!../website/static/css/projectorganizer.css\n ** module id = 185\n ** module chunks = 4\n **/","/*!\n * typeahead.js 0.10.5\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            getUniqueId: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            }(),\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            noop: function() {}\n        };\n    }();\n    var VERSION = \"0.10.5\";\n    var tokenizers = function() {\n        \"use strict\";\n        return {\n            nonword: nonword,\n            whitespace: whitespace,\n            obj: {\n                nonword: getObjTokenizer(nonword),\n                whitespace: getObjTokenizer(whitespace)\n            }\n        };\n        function whitespace(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\s+/) : [];\n        }\n        function nonword(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\W+/) : [];\n        }\n        function getObjTokenizer(tokenizer) {\n            return function setKey() {\n                var args = [].slice.call(arguments, 0);\n                return function tokenize(o) {\n                    var tokens = [];\n                    _.each(args, function(k) {\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n                    });\n                    return tokens;\n                };\n            };\n        }\n    }();\n    var LruCache = function() {\n        \"use strict\";\n        function LruCache(maxSize) {\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n            this.reset();\n            if (this.maxSize <= 0) {\n                this.set = this.get = $.noop;\n            }\n        }\n        _.mixin(LruCache.prototype, {\n            set: function set(key, val) {\n                var tailItem = this.list.tail, node;\n                if (this.size >= this.maxSize) {\n                    this.list.remove(tailItem);\n                    delete this.hash[tailItem.key];\n                }\n                if (node = this.hash[key]) {\n                    node.val = val;\n                    this.list.moveToFront(node);\n                } else {\n                    node = new Node(key, val);\n                    this.list.add(node);\n                    this.hash[key] = node;\n                    this.size++;\n                }\n            },\n            get: function get(key) {\n                var node = this.hash[key];\n                if (node) {\n                    this.list.moveToFront(node);\n                    return node.val;\n                }\n            },\n            reset: function reset() {\n                this.size = 0;\n                this.hash = {};\n                this.list = new List();\n            }\n        });\n        function List() {\n            this.head = this.tail = null;\n        }\n        _.mixin(List.prototype, {\n            add: function add(node) {\n                if (this.head) {\n                    node.next = this.head;\n                    this.head.prev = node;\n                }\n                this.head = node;\n                this.tail = this.tail || node;\n            },\n            remove: function remove(node) {\n                node.prev ? node.prev.next = node.next : this.head = node.next;\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;\n            },\n            moveToFront: function(node) {\n                this.remove(node);\n                this.add(node);\n            }\n        });\n        function Node(key, val) {\n            this.key = key;\n            this.val = val;\n            this.prev = this.next = null;\n        }\n        return LruCache;\n    }();\n    var PersistentStorage = function() {\n        \"use strict\";\n        var ls, methods;\n        try {\n            ls = window.localStorage;\n            ls.setItem(\"~~~\", \"!\");\n            ls.removeItem(\"~~~\");\n        } catch (err) {\n            ls = null;\n        }\n        function PersistentStorage(namespace) {\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");\n            this.ttlKey = \"__ttl__\";\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n        }\n        if (ls && window.JSON) {\n            methods = {\n                _prefix: function(key) {\n                    return this.prefix + key;\n                },\n                _ttlKey: function(key) {\n                    return this._prefix(key) + this.ttlKey;\n                },\n                get: function(key) {\n                    if (this.isExpired(key)) {\n                        this.remove(key);\n                    }\n                    return decode(ls.getItem(this._prefix(key)));\n                },\n                set: function(key, val, ttl) {\n                    if (_.isNumber(ttl)) {\n                        ls.setItem(this._ttlKey(key), encode(now() + ttl));\n                    } else {\n                        ls.removeItem(this._ttlKey(key));\n                    }\n                    return ls.setItem(this._prefix(key), encode(val));\n                },\n                remove: function(key) {\n                    ls.removeItem(this._ttlKey(key));\n                    ls.removeItem(this._prefix(key));\n                    return this;\n                },\n                clear: function() {\n                    var i, key, keys = [], len = ls.length;\n                    for (i = 0; i < len; i++) {\n                        if ((key = ls.key(i)).match(this.keyMatcher)) {\n                            keys.push(key.replace(this.keyMatcher, \"\"));\n                        }\n                    }\n                    for (i = keys.length; i--; ) {\n                        this.remove(keys[i]);\n                    }\n                    return this;\n                },\n                isExpired: function(key) {\n                    var ttl = decode(ls.getItem(this._ttlKey(key)));\n                    return _.isNumber(ttl) && now() > ttl ? true : false;\n                }\n            };\n        } else {\n            methods = {\n                get: _.noop,\n                set: _.noop,\n                remove: _.noop,\n                clear: _.noop,\n                isExpired: _.noop\n            };\n        }\n        _.mixin(PersistentStorage.prototype, methods);\n        return PersistentStorage;\n        function now() {\n            return new Date().getTime();\n        }\n        function encode(val) {\n            return JSON.stringify(_.isUndefined(val) ? null : val);\n        }\n        function decode(val) {\n            return JSON.parse(val);\n        }\n    }();\n    var Transport = function() {\n        \"use strict\";\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);\n        function Transport(o) {\n            o = o || {};\n            this.cancelled = false;\n            this.lastUrl = null;\n            this._send = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            this._get = o.rateLimiter ? o.rateLimiter(this._get) : this._get;\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n        }\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n            maxPendingRequests = num;\n        };\n        Transport.resetCache = function resetCache() {\n            sharedCache.reset();\n        };\n        _.mixin(Transport.prototype, {\n            _get: function(url, o, cb) {\n                var that = this, jqXhr;\n                if (this.cancelled || url !== this.lastUrl) {\n                    return;\n                }\n                if (jqXhr = pendingRequests[url]) {\n                    jqXhr.done(done).fail(fail);\n                } else if (pendingRequestsCount < maxPendingRequests) {\n                    pendingRequestsCount++;\n                    pendingRequests[url] = this._send(url, o).done(done).fail(fail).always(always);\n                } else {\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);\n                }\n                function done(resp) {\n                    cb && cb(null, resp);\n                    that._cache.set(url, resp);\n                }\n                function fail() {\n                    cb && cb(true);\n                }\n                function always() {\n                    pendingRequestsCount--;\n                    delete pendingRequests[url];\n                    if (that.onDeckRequestArgs) {\n                        that._get.apply(that, that.onDeckRequestArgs);\n                        that.onDeckRequestArgs = null;\n                    }\n                }\n            },\n            get: function(url, o, cb) {\n                var resp;\n                if (_.isFunction(o)) {\n                    cb = o;\n                    o = {};\n                }\n                this.cancelled = false;\n                this.lastUrl = url;\n                if (resp = this._cache.get(url)) {\n                    _.defer(function() {\n                        cb && cb(null, resp);\n                    });\n                } else {\n                    this._get(url, o, cb);\n                }\n                return !!resp;\n            },\n            cancel: function() {\n                this.cancelled = true;\n            }\n        });\n        return Transport;\n        function callbackToDeferred(fn) {\n            return function customSendWrapper(url, o) {\n                var deferred = $.Deferred();\n                fn(url, o, onSuccess, onError);\n                return deferred;\n                function onSuccess(resp) {\n                    _.defer(function() {\n                        deferred.resolve(resp);\n                    });\n                }\n                function onError(err) {\n                    _.defer(function() {\n                        deferred.reject(err);\n                    });\n                }\n            };\n        }\n    }();\n    var SearchIndex = function() {\n        \"use strict\";\n        function SearchIndex(o) {\n            o = o || {};\n            if (!o.datumTokenizer || !o.queryTokenizer) {\n                $.error(\"datumTokenizer and queryTokenizer are both required\");\n            }\n            this.datumTokenizer = o.datumTokenizer;\n            this.queryTokenizer = o.queryTokenizer;\n            this.reset();\n        }\n        _.mixin(SearchIndex.prototype, {\n            bootstrap: function bootstrap(o) {\n                this.datums = o.datums;\n                this.trie = o.trie;\n            },\n            add: function(data) {\n                var that = this;\n                data = _.isArray(data) ? data : [ data ];\n                _.each(data, function(datum) {\n                    var id, tokens;\n                    id = that.datums.push(datum) - 1;\n                    tokens = normalizeTokens(that.datumTokenizer(datum));\n                    _.each(tokens, function(token) {\n                        var node, chars, ch;\n                        node = that.trie;\n                        chars = token.split(\"\");\n                        while (ch = chars.shift()) {\n                            node = node.children[ch] || (node.children[ch] = newNode());\n                            node.ids.push(id);\n                        }\n                    });\n                });\n            },\n            get: function get(query) {\n                var that = this, tokens, matches;\n                tokens = normalizeTokens(this.queryTokenizer(query));\n                _.each(tokens, function(token) {\n                    var node, chars, ch, ids;\n                    if (matches && matches.length === 0) {\n                        return false;\n                    }\n                    node = that.trie;\n                    chars = token.split(\"\");\n                    while (node && (ch = chars.shift())) {\n                        node = node.children[ch];\n                    }\n                    if (node && chars.length === 0) {\n                        ids = node.ids.slice(0);\n                        matches = matches ? getIntersection(matches, ids) : ids;\n                    } else {\n                        matches = [];\n                        return false;\n                    }\n                });\n                return matches ? _.map(unique(matches), function(id) {\n                    return that.datums[id];\n                }) : [];\n            },\n            reset: function reset() {\n                this.datums = [];\n                this.trie = newNode();\n            },\n            serialize: function serialize() {\n                return {\n                    datums: this.datums,\n                    trie: this.trie\n                };\n            }\n        });\n        return SearchIndex;\n        function normalizeTokens(tokens) {\n            tokens = _.filter(tokens, function(token) {\n                return !!token;\n            });\n            tokens = _.map(tokens, function(token) {\n                return token.toLowerCase();\n            });\n            return tokens;\n        }\n        function newNode() {\n            return {\n                ids: [],\n                children: {}\n            };\n        }\n        function unique(array) {\n            var seen = {}, uniques = [];\n            for (var i = 0, len = array.length; i < len; i++) {\n                if (!seen[array[i]]) {\n                    seen[array[i]] = true;\n                    uniques.push(array[i]);\n                }\n            }\n            return uniques;\n        }\n        function getIntersection(arrayA, arrayB) {\n            var ai = 0, bi = 0, intersection = [];\n            arrayA = arrayA.sort(compare);\n            arrayB = arrayB.sort(compare);\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;\n            while (ai < lenArrayA && bi < lenArrayB) {\n                if (arrayA[ai] < arrayB[bi]) {\n                    ai++;\n                } else if (arrayA[ai] > arrayB[bi]) {\n                    bi++;\n                } else {\n                    intersection.push(arrayA[ai]);\n                    ai++;\n                    bi++;\n                }\n            }\n            return intersection;\n            function compare(a, b) {\n                return a - b;\n            }\n        }\n    }();\n    var oParser = function() {\n        \"use strict\";\n        return {\n            local: getLocal,\n            prefetch: getPrefetch,\n            remote: getRemote\n        };\n        function getLocal(o) {\n            return o.local || null;\n        }\n        function getPrefetch(o) {\n            var prefetch, defaults;\n            defaults = {\n                url: null,\n                thumbprint: \"\",\n                ttl: 24 * 60 * 60 * 1e3,\n                filter: null,\n                ajax: {}\n            };\n            if (prefetch = o.prefetch || null) {\n                prefetch = _.isString(prefetch) ? {\n                    url: prefetch\n                } : prefetch;\n                prefetch = _.mixin(defaults, prefetch);\n                prefetch.thumbprint = VERSION + prefetch.thumbprint;\n                prefetch.ajax.type = prefetch.ajax.type || \"GET\";\n                prefetch.ajax.dataType = prefetch.ajax.dataType || \"json\";\n                !prefetch.url && $.error(\"prefetch requires url to be set\");\n            }\n            return prefetch;\n        }\n        function getRemote(o) {\n            var remote, defaults;\n            defaults = {\n                url: null,\n                cache: true,\n                wildcard: \"%QUERY\",\n                replace: null,\n                rateLimitBy: \"debounce\",\n                rateLimitWait: 300,\n                send: null,\n                filter: null,\n                ajax: {}\n            };\n            if (remote = o.remote || null) {\n                remote = _.isString(remote) ? {\n                    url: remote\n                } : remote;\n                remote = _.mixin(defaults, remote);\n                remote.rateLimiter = /^throttle$/i.test(remote.rateLimitBy) ? byThrottle(remote.rateLimitWait) : byDebounce(remote.rateLimitWait);\n                remote.ajax.type = remote.ajax.type || \"GET\";\n                remote.ajax.dataType = remote.ajax.dataType || \"json\";\n                delete remote.rateLimitBy;\n                delete remote.rateLimitWait;\n                !remote.url && $.error(\"remote requires url to be set\");\n            }\n            return remote;\n            function byDebounce(wait) {\n                return function(fn) {\n                    return _.debounce(fn, wait);\n                };\n            }\n            function byThrottle(wait) {\n                return function(fn) {\n                    return _.throttle(fn, wait);\n                };\n            }\n        }\n    }();\n    (function(root) {\n        \"use strict\";\n        var old, keys;\n        old = root.Bloodhound;\n        keys = {\n            data: \"data\",\n            protocol: \"protocol\",\n            thumbprint: \"thumbprint\"\n        };\n        root.Bloodhound = Bloodhound;\n        function Bloodhound(o) {\n            if (!o || !o.local && !o.prefetch && !o.remote) {\n                $.error(\"one of local, prefetch, or remote is required\");\n            }\n            this.limit = o.limit || 5;\n            this.sorter = getSorter(o.sorter);\n            this.dupDetector = o.dupDetector || ignoreDuplicates;\n            this.local = oParser.local(o);\n            this.prefetch = oParser.prefetch(o);\n            this.remote = oParser.remote(o);\n            this.cacheKey = this.prefetch ? this.prefetch.cacheKey || this.prefetch.url : null;\n            this.index = new SearchIndex({\n                datumTokenizer: o.datumTokenizer,\n                queryTokenizer: o.queryTokenizer\n            });\n            this.storage = this.cacheKey ? new PersistentStorage(this.cacheKey) : null;\n        }\n        Bloodhound.noConflict = function noConflict() {\n            root.Bloodhound = old;\n            return Bloodhound;\n        };\n        Bloodhound.tokenizers = tokenizers;\n        _.mixin(Bloodhound.prototype, {\n            _loadPrefetch: function loadPrefetch(o) {\n                var that = this, serialized, deferred;\n                if (serialized = this._readFromStorage(o.thumbprint)) {\n                    this.index.bootstrap(serialized);\n                    deferred = $.Deferred().resolve();\n                } else {\n                    deferred = $.ajax(o.url, o.ajax).done(handlePrefetchResponse);\n                }\n                return deferred;\n                function handlePrefetchResponse(resp) {\n                    that.clear();\n                    that.add(o.filter ? o.filter(resp) : resp);\n                    that._saveToStorage(that.index.serialize(), o.thumbprint, o.ttl);\n                }\n            },\n            _getFromRemote: function getFromRemote(query, cb) {\n                var that = this, url, uriEncodedQuery;\n                if (!this.transport) {\n                    return;\n                }\n                query = query || \"\";\n                uriEncodedQuery = encodeURIComponent(query);\n                url = this.remote.replace ? this.remote.replace(this.remote.url, query) : this.remote.url.replace(this.remote.wildcard, uriEncodedQuery);\n                return this.transport.get(url, this.remote.ajax, handleRemoteResponse);\n                function handleRemoteResponse(err, resp) {\n                    err ? cb([]) : cb(that.remote.filter ? that.remote.filter(resp) : resp);\n                }\n            },\n            _cancelLastRemoteRequest: function cancelLastRemoteRequest() {\n                this.transport && this.transport.cancel();\n            },\n            _saveToStorage: function saveToStorage(data, thumbprint, ttl) {\n                if (this.storage) {\n                    this.storage.set(keys.data, data, ttl);\n                    this.storage.set(keys.protocol, location.protocol, ttl);\n                    this.storage.set(keys.thumbprint, thumbprint, ttl);\n                }\n            },\n            _readFromStorage: function readFromStorage(thumbprint) {\n                var stored = {}, isExpired;\n                if (this.storage) {\n                    stored.data = this.storage.get(keys.data);\n                    stored.protocol = this.storage.get(keys.protocol);\n                    stored.thumbprint = this.storage.get(keys.thumbprint);\n                }\n                isExpired = stored.thumbprint !== thumbprint || stored.protocol !== location.protocol;\n                return stored.data && !isExpired ? stored.data : null;\n            },\n            _initialize: function initialize() {\n                var that = this, local = this.local, deferred;\n                deferred = this.prefetch ? this._loadPrefetch(this.prefetch) : $.Deferred().resolve();\n                local && deferred.done(addLocalToIndex);\n                this.transport = this.remote ? new Transport(this.remote) : null;\n                return this.initPromise = deferred.promise();\n                function addLocalToIndex() {\n                    that.add(_.isFunction(local) ? local() : local);\n                }\n            },\n            initialize: function initialize(force) {\n                return !this.initPromise || force ? this._initialize() : this.initPromise;\n            },\n            add: function add(data) {\n                this.index.add(data);\n            },\n            get: function get(query, cb) {\n                var that = this, matches = [], cacheHit = false;\n                matches = this.index.get(query);\n                matches = this.sorter(matches).slice(0, this.limit);\n                matches.length < this.limit ? cacheHit = this._getFromRemote(query, returnRemoteMatches) : this._cancelLastRemoteRequest();\n                if (!cacheHit) {\n                    (matches.length > 0 || !this.transport) && cb && cb(matches);\n                }\n                function returnRemoteMatches(remoteMatches) {\n                    var matchesWithBackfill = matches.slice(0);\n                    _.each(remoteMatches, function(remoteMatch) {\n                        var isDuplicate;\n                        isDuplicate = _.some(matchesWithBackfill, function(match) {\n                            return that.dupDetector(remoteMatch, match);\n                        });\n                        !isDuplicate && matchesWithBackfill.push(remoteMatch);\n                        return matchesWithBackfill.length < that.limit;\n                    });\n                    cb && cb(that.sorter(matchesWithBackfill));\n                }\n            },\n            clear: function clear() {\n                this.index.reset();\n            },\n            clearPrefetchCache: function clearPrefetchCache() {\n                this.storage && this.storage.clear();\n            },\n            clearRemoteCache: function clearRemoteCache() {\n                this.transport && Transport.resetCache();\n            },\n            ttAdapter: function ttAdapter() {\n                return _.bind(this.get, this);\n            }\n        });\n        return Bloodhound;\n        function getSorter(sortFn) {\n            return _.isFunction(sortFn) ? sort : noSort;\n            function sort(array) {\n                return array.sort(sortFn);\n            }\n            function noSort(array) {\n                return array;\n            }\n        }\n        function ignoreDuplicates() {\n            return false;\n        }\n    })(this);\n    var html = function() {\n        return {\n            wrapper: '<span class=\"twitter-typeahead\"></span>',\n            dropdown: '<span class=\"tt-dropdown-menu\"></span>',\n            dataset: '<div class=\"tt-dataset-%CLASS%\"></div>',\n            suggestions: '<span class=\"tt-suggestions\"></span>',\n            suggestion: '<div class=\"tt-suggestion\"></div>'\n        };\n    }();\n    var css = function() {\n        \"use strict\";\n        var css = {\n            wrapper: {\n                position: \"relative\",\n                display: \"inline-block\"\n            },\n            hint: {\n                position: \"absolute\",\n                top: \"0\",\n                left: \"0\",\n                borderColor: \"transparent\",\n                boxShadow: \"none\",\n                opacity: \"1\"\n            },\n            input: {\n                position: \"relative\",\n                verticalAlign: \"top\",\n                backgroundColor: \"transparent\"\n            },\n            inputWithNoHint: {\n                position: \"relative\",\n                verticalAlign: \"top\"\n            },\n            dropdown: {\n                position: \"absolute\",\n                top: \"100%\",\n                left: \"0\",\n                zIndex: \"100\",\n                display: \"none\"\n            },\n            suggestions: {\n                display: \"block\"\n            },\n            suggestion: {\n                whiteSpace: \"nowrap\",\n                cursor: \"pointer\"\n            },\n            suggestionChild: {\n                whiteSpace: \"normal\"\n            },\n            ltr: {\n                left: \"0\",\n                right: \"auto\"\n            },\n            rtl: {\n                left: \"auto\",\n                right: \" 0\"\n            }\n        };\n        if (_.isMsie()) {\n            _.mixin(css.input, {\n                backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n            });\n        }\n        if (_.isMsie() && _.isMsie() <= 7) {\n            _.mixin(css.input, {\n                marginTop: \"-1px\"\n            });\n        }\n        return css;\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace = \"typeahead:\";\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            trigger: function(type) {\n                var args = [].slice.call(arguments, 1);\n                this.$el.trigger(namespace + type, args);\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function getRegex(patterns, caseSensitive, wordsOnly) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o) {\n            var that = this, onBlur, onFocus, onKeydown, onInput;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            onBlur = _.bind(this._onBlur, this);\n            onFocus = _.bind(this._onFocus, this);\n            onKeydown = _.bind(this._onKeydown, this);\n            onInput = _.bind(this._onInput, this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input).on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n            if (!_.isMsie()) {\n                this.$input.on(\"input.tt\", onInput);\n            } else {\n                this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                    if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                        return;\n                    }\n                    _.defer(_.bind(that._onInput, that, $e));\n                });\n            }\n            this.query = this.$input.val();\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n        }\n        Input.normalizeQuery = function(str) {\n            return (str || \"\").replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._checkInputValue();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault, hintValue, inputValue;\n                switch (keyName) {\n                  case \"tab\":\n                    hintValue = this.getHint();\n                    inputValue = this.getInputValue();\n                    preventDefault = hintValue && hintValue !== inputValue && !withModifier($e);\n                    break;\n\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkInputValue: function checkInputValue() {\n                var inputValue, areEquivalent, hasDifferentWhitespace;\n                inputValue = this.getInputValue();\n                areEquivalent = areQueriesEquivalent(inputValue, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== inputValue.length : false;\n                this.query = inputValue;\n                if (!areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getQuery: function getQuery() {\n                return this.query;\n            },\n            setQuery: function setQuery(query) {\n                this.query = query;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value, silent) {\n                this.$input.val(value);\n                silent ? this.clearHint() : this._checkInputValue();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query, true);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            getLanguageDirection: function getLanguageDirection() {\n                return (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$hint = this.$input = this.$overflowHelper = null;\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var datasetKey = \"ttDataset\", valueKey = \"ttValue\", datumKey = \"ttDatum\";\n        function Dataset(o) {\n            o = o || {};\n            o.templates = o.templates || {};\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            this.query = null;\n            this.highlight = !!o.highlight;\n            this.name = o.name || _.getUniqueId();\n            this.source = o.source;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.$el = $(html.dataset.replace(\"%CLASS%\", this.name));\n        }\n        Dataset.extractDatasetName = function extractDatasetName(el) {\n            return $(el).data(datasetKey);\n        };\n        Dataset.extractValue = function extractDatum(el) {\n            return $(el).data(valueKey);\n        };\n        Dataset.extractDatum = function extractDatum(el) {\n            return $(el).data(datumKey);\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _render: function render(query, suggestions) {\n                if (!this.$el) {\n                    return;\n                }\n                var that = this, hasSuggestions;\n                this.$el.empty();\n                hasSuggestions = suggestions && suggestions.length;\n                if (!hasSuggestions && this.templates.empty) {\n                    this.$el.html(getEmptyHtml()).prepend(that.templates.header ? getHeaderHtml() : null).append(that.templates.footer ? getFooterHtml() : null);\n                } else if (hasSuggestions) {\n                    this.$el.html(getSuggestionsHtml()).prepend(that.templates.header ? getHeaderHtml() : null).append(that.templates.footer ? getFooterHtml() : null);\n                }\n                this.trigger(\"rendered\");\n                function getEmptyHtml() {\n                    return that.templates.empty({\n                        query: query,\n                        isEmpty: true\n                    });\n                }\n                function getSuggestionsHtml() {\n                    var $suggestions, nodes;\n                    $suggestions = $(html.suggestions).css(css.suggestions);\n                    nodes = _.map(suggestions, getSuggestionNode);\n                    $suggestions.append.apply($suggestions, nodes);\n                    that.highlight && highlight({\n                        className: \"tt-highlight\",\n                        node: $suggestions[0],\n                        pattern: query\n                    });\n                    return $suggestions;\n                    function getSuggestionNode(suggestion) {\n                        var $el;\n                        $el = $(html.suggestion).append(that.templates.suggestion(suggestion)).data(datasetKey, that.name).data(valueKey, that.displayFn(suggestion)).data(datumKey, suggestion);\n                        $el.children().each(function() {\n                            $(this).css(css.suggestionChild);\n                        });\n                        return $el;\n                    }\n                }\n                function getHeaderHtml() {\n                    return that.templates.header({\n                        query: query,\n                        isEmpty: !hasSuggestions\n                    });\n                }\n                function getFooterHtml() {\n                    return that.templates.footer({\n                        query: query,\n                        isEmpty: !hasSuggestions\n                    });\n                }\n            },\n            getRoot: function getRoot() {\n                return this.$el;\n            },\n            update: function update(query) {\n                var that = this;\n                this.query = query;\n                this.canceled = false;\n                this.source(query, render);\n                function render(suggestions) {\n                    if (!that.canceled && query === that.query) {\n                        that._render(query, suggestions);\n                    }\n                }\n            },\n            cancel: function cancel() {\n                this.canceled = true;\n            },\n            clear: function clear() {\n                this.cancel();\n                this.$el.empty();\n                this.trigger(\"rendered\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = null;\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || \"value\";\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                empty: templates.empty && _.templatify(templates.empty),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion || suggestionTemplate\n            };\n            function suggestionTemplate(context) {\n                return \"<p>\" + displayFn(context) + \"</p>\";\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Dropdown = function() {\n        \"use strict\";\n        function Dropdown(o) {\n            var that = this, onSuggestionClick, onSuggestionMouseEnter, onSuggestionMouseLeave;\n            o = o || {};\n            if (!o.menu) {\n                $.error(\"menu is required\");\n            }\n            this.isOpen = false;\n            this.isEmpty = true;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            onSuggestionClick = _.bind(this._onSuggestionClick, this);\n            onSuggestionMouseEnter = _.bind(this._onSuggestionMouseEnter, this);\n            onSuggestionMouseLeave = _.bind(this._onSuggestionMouseLeave, this);\n            this.$menu = $(o.menu).on(\"click.tt\", \".tt-suggestion\", onSuggestionClick).on(\"mouseenter.tt\", \".tt-suggestion\", onSuggestionMouseEnter).on(\"mouseleave.tt\", \".tt-suggestion\", onSuggestionMouseLeave);\n            _.each(this.datasets, function(dataset) {\n                that.$menu.append(dataset.getRoot());\n                dataset.onSync(\"rendered\", that._onRendered, that);\n            });\n        }\n        _.mixin(Dropdown.prototype, EventEmitter, {\n            _onSuggestionClick: function onSuggestionClick($e) {\n                this.trigger(\"suggestionClicked\", $($e.currentTarget));\n            },\n            _onSuggestionMouseEnter: function onSuggestionMouseEnter($e) {\n                this._removeCursor();\n                this._setCursor($($e.currentTarget), true);\n            },\n            _onSuggestionMouseLeave: function onSuggestionMouseLeave() {\n                this._removeCursor();\n            },\n            _onRendered: function onRendered() {\n                this.isEmpty = _.every(this.datasets, isDatasetEmpty);\n                this.isEmpty ? this._hide() : this.isOpen && this._show();\n                this.trigger(\"datasetRendered\");\n                function isDatasetEmpty(dataset) {\n                    return dataset.isEmpty();\n                }\n            },\n            _hide: function() {\n                this.$menu.hide();\n            },\n            _show: function() {\n                this.$menu.css(\"display\", \"block\");\n            },\n            _getSuggestions: function getSuggestions() {\n                return this.$menu.find(\".tt-suggestion\");\n            },\n            _getCursor: function getCursor() {\n                return this.$menu.find(\".tt-cursor\").first();\n            },\n            _setCursor: function setCursor($el, silent) {\n                $el.first().addClass(\"tt-cursor\");\n                !silent && this.trigger(\"cursorMoved\");\n            },\n            _removeCursor: function removeCursor() {\n                this._getCursor().removeClass(\"tt-cursor\");\n            },\n            _moveCursor: function moveCursor(increment) {\n                var $suggestions, $oldCursor, newCursorIndex, $newCursor;\n                if (!this.isOpen) {\n                    return;\n                }\n                $oldCursor = this._getCursor();\n                $suggestions = this._getSuggestions();\n                this._removeCursor();\n                newCursorIndex = $suggestions.index($oldCursor) + increment;\n                newCursorIndex = (newCursorIndex + 1) % ($suggestions.length + 1) - 1;\n                if (newCursorIndex === -1) {\n                    this.trigger(\"cursorRemoved\");\n                    return;\n                } else if (newCursorIndex < -1) {\n                    newCursorIndex = $suggestions.length - 1;\n                }\n                this._setCursor($newCursor = $suggestions.eq(newCursorIndex));\n                this._ensureVisible($newCursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, menuScrollTop, menuHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                menuScrollTop = this.$menu.scrollTop();\n                menuHeight = this.$menu.height() + parseInt(this.$menu.css(\"paddingTop\"), 10) + parseInt(this.$menu.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$menu.scrollTop(menuScrollTop + elTop);\n                } else if (menuHeight < elBottom) {\n                    this.$menu.scrollTop(menuScrollTop + (elBottom - menuHeight));\n                }\n            },\n            close: function close() {\n                if (this.isOpen) {\n                    this.isOpen = false;\n                    this._removeCursor();\n                    this._hide();\n                    this.trigger(\"closed\");\n                }\n            },\n            open: function open() {\n                if (!this.isOpen) {\n                    this.isOpen = true;\n                    !this.isEmpty && this._show();\n                    this.trigger(\"opened\");\n                }\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$menu.css(dir === \"ltr\" ? css.ltr : css.rtl);\n            },\n            moveCursorUp: function moveCursorUp() {\n                this._moveCursor(-1);\n            },\n            moveCursorDown: function moveCursorDown() {\n                this._moveCursor(+1);\n            },\n            getDatumForSuggestion: function getDatumForSuggestion($el) {\n                var datum = null;\n                if ($el.length) {\n                    datum = {\n                        raw: Dataset.extractDatum($el),\n                        value: Dataset.extractValue($el),\n                        datasetName: Dataset.extractDatasetName($el)\n                    };\n                }\n                return datum;\n            },\n            getDatumForCursor: function getDatumForCursor() {\n                return this.getDatumForSuggestion(this._getCursor().first());\n            },\n            getDatumForTopSuggestion: function getDatumForTopSuggestion() {\n                return this.getDatumForSuggestion(this._getSuggestions().first());\n            },\n            update: function update(query) {\n                _.each(this.datasets, updateDataset);\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.isEmpty = true;\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            isVisible: function isVisible() {\n                return this.isOpen && !this.isEmpty;\n            },\n            destroy: function destroy() {\n                this.$menu.off(\".tt\");\n                this.$menu = null;\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Dropdown;\n        function initializeDataset(oDataset) {\n            return new Dataset(oDataset);\n        }\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        var attrsKey = \"ttAttrs\";\n        function Typeahead(o) {\n            var $menu, $input, $hint;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            this.isActivated = false;\n            this.autoselect = !!o.autoselect;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.$node = buildDom(o.input, o.withHint);\n            $menu = this.$node.find(\".tt-dropdown-menu\");\n            $input = this.$node.find(\".tt-input\");\n            $hint = this.$node.find(\".tt-hint\");\n            $input.on(\"blur.tt\", function($e) {\n                var active, isActive, hasActive;\n                active = document.activeElement;\n                isActive = $menu.is(active);\n                hasActive = $menu.has(active).length > 0;\n                if (_.isMsie() && (isActive || hasActive)) {\n                    $e.preventDefault();\n                    $e.stopImmediatePropagation();\n                    _.defer(function() {\n                        $input.focus();\n                    });\n                }\n            });\n            $menu.on(\"mousedown.tt\", function($e) {\n                $e.preventDefault();\n            });\n            this.eventBus = o.eventBus || new EventBus({\n                el: $input\n            });\n            this.dropdown = new Dropdown({\n                menu: $menu,\n                datasets: o.datasets\n            }).onSync(\"suggestionClicked\", this._onSuggestionClicked, this).onSync(\"cursorMoved\", this._onCursorMoved, this).onSync(\"cursorRemoved\", this._onCursorRemoved, this).onSync(\"opened\", this._onOpened, this).onSync(\"closed\", this._onClosed, this).onAsync(\"datasetRendered\", this._onDatasetRendered, this);\n            this.input = new Input({\n                input: $input,\n                hint: $hint\n            }).onSync(\"focused\", this._onFocused, this).onSync(\"blurred\", this._onBlurred, this).onSync(\"enterKeyed\", this._onEnterKeyed, this).onSync(\"tabKeyed\", this._onTabKeyed, this).onSync(\"escKeyed\", this._onEscKeyed, this).onSync(\"upKeyed\", this._onUpKeyed, this).onSync(\"downKeyed\", this._onDownKeyed, this).onSync(\"leftKeyed\", this._onLeftKeyed, this).onSync(\"rightKeyed\", this._onRightKeyed, this).onSync(\"queryChanged\", this._onQueryChanged, this).onSync(\"whitespaceChanged\", this._onWhitespaceChanged, this);\n            this._setLanguageDirection();\n        }\n        _.mixin(Typeahead.prototype, {\n            _onSuggestionClicked: function onSuggestionClicked(type, $el) {\n                var datum;\n                if (datum = this.dropdown.getDatumForSuggestion($el)) {\n                    this._select(datum);\n                }\n            },\n            _onCursorMoved: function onCursorMoved() {\n                var datum = this.dropdown.getDatumForCursor();\n                this.input.setInputValue(datum.value, true);\n                this.eventBus.trigger(\"cursorchanged\", datum.raw, datum.datasetName);\n            },\n            _onCursorRemoved: function onCursorRemoved() {\n                this.input.resetInputValue();\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered() {\n                this._updateHint();\n            },\n            _onOpened: function onOpened() {\n                this._updateHint();\n                this.eventBus.trigger(\"opened\");\n            },\n            _onClosed: function onClosed() {\n                this.input.clearHint();\n                this.eventBus.trigger(\"closed\");\n            },\n            _onFocused: function onFocused() {\n                this.isActivated = true;\n                this.dropdown.open();\n            },\n            _onBlurred: function onBlurred() {\n                this.isActivated = false;\n                this.dropdown.empty();\n                this.dropdown.close();\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var cursorDatum, topSuggestionDatum;\n                cursorDatum = this.dropdown.getDatumForCursor();\n                topSuggestionDatum = this.dropdown.getDatumForTopSuggestion();\n                if (cursorDatum) {\n                    this._select(cursorDatum);\n                    $e.preventDefault();\n                } else if (this.autoselect && topSuggestionDatum) {\n                    this._select(topSuggestionDatum);\n                    $e.preventDefault();\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var datum;\n                if (datum = this.dropdown.getDatumForCursor()) {\n                    this._select(datum);\n                    $e.preventDefault();\n                } else {\n                    this._autocomplete(true);\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.dropdown.close();\n                this.input.resetInputValue();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                var query = this.input.getQuery();\n                this.dropdown.isEmpty && query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.moveCursorUp();\n                this.dropdown.open();\n            },\n            _onDownKeyed: function onDownKeyed() {\n                var query = this.input.getQuery();\n                this.dropdown.isEmpty && query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.moveCursorDown();\n                this.dropdown.open();\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                this.dir === \"rtl\" && this._autocomplete();\n            },\n            _onRightKeyed: function onRightKeyed() {\n                this.dir === \"ltr\" && this._autocomplete();\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this.input.clearHintIfInvalid();\n                query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.empty();\n                this.dropdown.open();\n                this._setLanguageDirection();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n                this.dropdown.open();\n            },\n            _setLanguageDirection: function setLanguageDirection() {\n                var dir;\n                if (this.dir !== (dir = this.input.getLanguageDirection())) {\n                    this.dir = dir;\n                    this.$node.css(\"direction\", dir);\n                    this.dropdown.setLanguageDirection(dir);\n                }\n            },\n            _updateHint: function updateHint() {\n                var datum, val, query, escapedQuery, frontMatchRegEx, match;\n                datum = this.dropdown.getDatumForTopSuggestion();\n                if (datum && this.dropdown.isVisible() && !this.input.hasOverflow()) {\n                    val = this.input.getInputValue();\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(datum.value);\n                    match ? this.input.setHint(val + match[1]) : this.input.clearHint();\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            _autocomplete: function autocomplete(laxCursor) {\n                var hint, query, isCursorAtEnd, datum;\n                hint = this.input.getHint();\n                query = this.input.getQuery();\n                isCursorAtEnd = laxCursor || this.input.isCursorAtEnd();\n                if (hint && query !== hint && isCursorAtEnd) {\n                    datum = this.dropdown.getDatumForTopSuggestion();\n                    datum && this.input.setInputValue(datum.value);\n                    this.eventBus.trigger(\"autocompleted\", datum.raw, datum.datasetName);\n                }\n            },\n            _select: function select(datum) {\n                this.input.setQuery(datum.value);\n                this.input.setInputValue(datum.value, true);\n                this._setLanguageDirection();\n                this.eventBus.trigger(\"selected\", datum.raw, datum.datasetName);\n                this.dropdown.close();\n                _.defer(_.bind(this.dropdown.empty, this.dropdown));\n            },\n            open: function open() {\n                this.dropdown.open();\n            },\n            close: function close() {\n                this.dropdown.close();\n            },\n            setVal: function setVal(val) {\n                val = _.toStr(val);\n                if (this.isActivated) {\n                    this.input.setInputValue(val);\n                } else {\n                    this.input.setQuery(val);\n                    this.input.setInputValue(val, true);\n                }\n                this._setLanguageDirection();\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.dropdown.destroy();\n                destroyDomStructure(this.$node);\n                this.$node = null;\n            }\n        });\n        return Typeahead;\n        function buildDom(input, withHint) {\n            var $input, $wrapper, $dropdown, $hint;\n            $input = $(input);\n            $wrapper = $(html.wrapper).css(css.wrapper);\n            $dropdown = $(html.dropdown).css(css.dropdown);\n            $hint = $input.clone().css(css.hint).css(getBackgroundStyles($input));\n            $hint.val(\"\").removeData().addClass(\"tt-hint\").removeAttr(\"id name placeholder required\").prop(\"readonly\", true).attr({\n                autocomplete: \"off\",\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n            $input.data(attrsKey, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(\"tt-input\").attr({\n                autocomplete: \"off\",\n                spellcheck: false\n            }).css(withHint ? css.input : css.inputWithNoHint);\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input.wrap($wrapper).parent().prepend(withHint ? $hint : null).append($dropdown);\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function destroyDomStructure($node) {\n            var $input = $node.find(\".tt-input\");\n            _.each($input.data(attrsKey), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.detach().removeData(attrsKey).removeClass(\"tt-input\").insertAfter($node);\n            $node.remove();\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, typeaheadKey, methods;\n        old = $.fn.typeahead;\n        typeaheadKey = \"ttTypeahead\";\n        methods = {\n            initialize: function initialize(o, datasets) {\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                return this.each(attach);\n                function attach() {\n                    var $input = $(this), eventBus, typeahead;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    typeahead = new Typeahead({\n                        input: $input,\n                        eventBus: eventBus = new EventBus({\n                            el: $input\n                        }),\n                        withHint: _.isUndefined(o.hint) ? true : !!o.hint,\n                        minLength: o.minLength,\n                        autoselect: o.autoselect,\n                        datasets: datasets\n                    });\n                    $input.data(typeaheadKey, typeahead);\n                }\n            },\n            open: function open() {\n                return this.each(openTypeahead);\n                function openTypeahead() {\n                    var $input = $(this), typeahead;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        typeahead.open();\n                    }\n                }\n            },\n            close: function close() {\n                return this.each(closeTypeahead);\n                function closeTypeahead() {\n                    var $input = $(this), typeahead;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        typeahead.close();\n                    }\n                }\n            },\n            val: function val(newVal) {\n                return !arguments.length ? getVal(this.first()) : this.each(setVal);\n                function setVal() {\n                    var $input = $(this), typeahead;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        typeahead.setVal(newVal);\n                    }\n                }\n                function getVal($input) {\n                    var typeahead, query;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        query = typeahead.getVal();\n                    }\n                    return query;\n                }\n            },\n            destroy: function destroy() {\n                return this.each(unattach);\n                function unattach() {\n                    var $input = $(this), typeahead;\n                    if (typeahead = $input.data(typeaheadKey)) {\n                        typeahead.destroy();\n                        $input.removeData(typeaheadKey);\n                    }\n                }\n            }\n        };\n        $.fn.typeahead = function(method) {\n            var tts;\n            if (methods[method] && method !== \"initialize\") {\n                tts = this.filter(function() {\n                    return !!$(this).data(typeaheadKey);\n                });\n                return methods[method].apply(tts, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n    })();\n})(window.jQuery);\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = Bloodhound\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/exports-loader?Bloodhound!../~/typeahead.js/dist/typeahead.bundle.js\n ** module id = 188\n ** module chunks = 4\n **/","require('css/legend.css');\nvar m = require('mithril');\n\nmodule.exports = {\n    view: function(data, repr, opts) {\n        if(data[0].label){\n            data.sort(function(a, b) {\n                return a.label.localeCompare(b.label);\n            });\n        }\n        return [\n            m('div', {\n                className: 'legend-grid'\n            }, data.map(function(item) {\n                return m('span', {\n                    className: 'legend-grid-item'\n                }, repr(item));\n            })),\n            m('span', {className: 'pull-left'}, opts.footer || '')\n        ];\n    }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/components/legend.js\n ** module id = 189\n ** module chunks = 4\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/legend.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!/Users/laurenbarker/GitHub/osf.io/node_modules/style-loader/addStyles.js\")(content, {});\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tmodule.hot.accept(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/legend.css\", function() {\n\t\tvar newContent = require(\"!!/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/index.js!/Users/laurenbarker/GitHub/osf.io/website/static/css/legend.css\");\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\tupdate(newContent);\n\t});\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/css/legend.css\n ** module id = 190\n ** module chunks = 4\n **/","exports = module.exports = require(\"/Users/laurenbarker/GitHub/osf.io/node_modules/css-loader/cssToString.js\")();\nexports.push([module.id, \".legend-grid {\\n    -webkit-column-count: 2; /* Chrome, Safari, Opera */\\n    -moz-column-count: 2; /* Firefox */\\n    column-count: 2;\\n    margin-bottom: 5px;\\n}\\n\\n.legend-grid-item {\\n    width: 100%;\\n    padding-left: 5px;\\n    padding-right: 3px;\\n    margin-bottom: 8px;\\n    line-break: strict;\\n    display: inline-block;\\n}\\n\\n\", \"\"]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/css-loader!../website/static/css/legend.css\n ** module id = 191\n ** module chunks = 4\n **/"],"sourceRoot":""}