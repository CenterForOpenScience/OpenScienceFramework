{"version":3,"sources":["webpack:///../website/addons/s3/static/user-cfg.js","webpack:///../website/static/js/osfLanguage.js?b714*********","webpack:///../website/static/js/addonHelper.js?0153*"],"names":[],"mappings":";;;;;AAAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;AC5DD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtFA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,iC;AACA,K;AACA;AACA,CAAC","file":"s3/user-cfg.js","sourcesContent":["'use strict';\n\nvar $ = require('jquery');\nvar bootbox = require('bootbox');\nvar AddonHelper = require('js/addonHelper');\nvar language = require('js/osfLanguage').Addons.s3;\n\n$('#s3RemoveAccess').on('click', function() {\n    bootbox.confirm({\n        title: 'Disconnect S3 Account?',\n        message: language.confirmDeauth,\n        callback: function(result) {\n            if(result) {\n                deleteToken();\n            }\n        },\n        buttons:{\n            confirm:{\n                label:'Disconnect',\n                className:'btn-danger'\n            }\n        }\n    });\n});\n\nfunction deleteToken() {\n    var $this = $(this),\n    addon = $this.attr('data-addon'),\n    msgElm = $this.find('.addon-settings-message');\n    $.ajax({\n        type: 'DELETE',\n        url: '/api/v1/settings/s3/',\n        contentType: 'application/json',\n        dataType: 'json',\n        success: function(response) {\n            msgElm.text('Keys removed')\n                .removeClass('text-danger').addClass('text-success')\n                .fadeOut(100).fadeIn();\n            window.location.reload();\n        },\n        error: function(xhr) {\n            var response = JSON.parse(xhr.responseText);\n            if (response && response.message) {\n                if(response.message === 'reload')\n                    window.location.reload();\n                else\n                    message = response.message;\n            } else {\n                message = 'Error: Keys not removed';\n            }\n            msgElm.text(message)\n                .removeClass('text-success').addClass('text-danger')\n                .fadeOut(100).fadeIn();\n        }\n    });\n    return false;\n}\n\n$(document).ready(function() {\n    $(window.contextVars.addonSettingsSelector).on('submit', AddonHelper.onSubmitSettings);\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/addons/s3/static/user-cfg.js\n ** module id = 0\n ** module chunks = 43\n **/","var SUPPORT_EMAIL = 'support@osf.io';\nvar SUPPORT_LINK = '<a href=\"mailto: ' + SUPPORT_EMAIL + '\">' + SUPPORT_EMAIL + '</a>';\n\nvar REFRESH_OR_SUPPORT = 'Please refresh the page and try again or contact ' + SUPPORT_LINK + ' if the problem persists.';\n\nmodule.exports = {\n    // TODO\n    makePublic: null,\n    makePrivate: null,\n    registrations: {\n        registrationFailed: 'Registration failed. If this problem persists, please contact ' + SUPPORT_EMAIL + '.',\n        invalidEmbargoTitle: 'Invalid embargo end date',\n        invalidEmbargoMessage: 'Please choose a date more than two days, but less than four years, from today.',\n        registerConfirm: 'Are you sure you want to register this project?',\n        registerSkipAddons: 'If you choose to continue with the registration at this time we will exclude the contents of any addons that are not copyable. These files will not appear in the final registration.'\n    },\n    Addons: {\n        dataverse: {\n            userSettingsError: 'Could not retrieve settings. Please refresh the page or ' +\n                'contact <a href=\"mailto: ' + SUPPORT_EMAIL + '\">' + SUPPORT_EMAIL + '</a> if the ' +\n                'problem persists.',\n            deauthError: 'Could not disconnect the Dataverse account at this time.',\n            authError: 'Sorry, but there was a problem connecting to that instance of Dataverse. It ' +\n                'is likely that the instance hasn\\'t been upgraded to Dataverse 4.0. If you ' +\n                'have any questions or believe this to be an error, please contact ' +\n                'support@osf.io.',\n            authInvalid: 'Your Dataverse API token is invalid.',\n            authSuccess: 'Your Dataverse account was linked.',\n            datasetDeaccessioned: 'This dataset has already been deaccessioned on the Dataverse ' +\n                'and cannot be connected to the OSF.',\n            forbiddenCharacters: 'This dataset cannot be connected due to forbidden characters ' +\n                'in one or more of the dataset\\'s file names. This issue has been forwarded to our ' +\n                'development team.',\n            setDatasetError: 'Could not connect to this dataset.',\n            widgetInvalid: 'The credentials associated with this Dataverse account ' +\n                'appear to be invalid.',\n            widgetError: 'There was a problem connecting to the Dataverse.'\n        },\n        dropbox: {\n            // Shown on clicking \"Delete Access Token\" for dropbox\n            confirmDeauth: 'Are you sure you want to disconnect the Dropbox account? ' +\n                'This will revoke access to Dropbox for all projects you have ' +\n                'associated with this account.',\n            deauthError: 'Could not disconnect Dropbox account at this time',\n        },\n        figshare: {\n            confirmDeauth: 'Are you sure you want to disconnect the figshare account? ' +\n                'This will revoke access to figshare for all projects you have ' +\n                'associated with this account.',\n        },\n        // TODO\n        github: {\n            confirmDeauth: 'Are you sure you want to disconnect the GitHub account? ' +\n                'This will revoke access to GitHub for all projects you have ' +\n                'associated with this account.',\n        },\n        s3: {\n            confirmDeauth: 'Are you sure you want to disconnect the S3 account? ' +\n                'This will revoke access to S3 for all projects you have ' +\n                'associated with this account.',\n        },\n        box: {\n            // Shown on clicking \"Delete Access Token\" for dropbox\n            confirmDeauth: 'Are you sure you want to disconnect the Box account? ' +\n                'This will revoke access to Box for all projects you have ' +\n                'associated with this account.',\n            deauthError: 'Could not disconnect the Box account at this time',\n        },\n        googledrive: {\n          // Shown on clicking \"Delete Access Token\" for googledrive\n            confirmDeauth: 'Are you sure you want to disconnect the Google Drive account? ' +\n                'This will revoke access to Google Drive for all projects you have ' +\n                'associated with this account.',\n            deauthError: 'Could not disconnect the Google Drive account at this time',\n        }\n    },\n    apiOauth2Application: {\n        discardUnchanged: 'Are you sure you want to discard your unsaved changes?',\n        deactivateConfirm: 'Are you sure you want to deactivate this application for all users and revoke all access tokens? This cannot be reversed.',\n        deactivateError: 'Could not deactivate application. Please wait a few minutes and try again, or contact ' + SUPPORT_LINK + ' if the problem persists.',\n        dataFetchError: 'Data not loaded. ' + REFRESH_OR_SUPPORT,\n        dataListFetchError: 'Could not load list of developer applications at this time. ' + REFRESH_OR_SUPPORT,\n        dataSendError: 'Error sending data to the server: check that all fields are valid, or contact ' + SUPPORT_LINK + ' if the problem persists.',\n        creationSuccess: 'Successfully registered new application',\n        dataUpdated: 'Application data updated'\n    }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/osfLanguage.js\n ** module id = 164\n ** module chunks = 2 7 8 10 13 21 23 33 34 39 43\n **/","// TODO: Deprecate me\nvar $ = require('jquery');\nvar $osf = require('./osfHelpers');\n\nvar AddonHelper = (function() {\n\n    /**\n     * Convert an HTML form to a JS object.\n     *\n     * @param {jQuery} form\n     * @return {Object} The parsed data\n     */\n    function formToObj(form) {\n        var rv = {};\n        $.each($(form).serializeArray(), function(_, value) {\n            rv[value.name] = value.value;\n        });\n        return rv;\n    }\n\n    /**\n     * Submit add-on settings.\n     */\n    function onSubmitSettings() {\n        var $this = $(this);\n        var addon = $this.attr('data-addon');\n        var owner = $this.find('span[data-owner]').attr('data-owner');\n        var msgElm = $this.find('.addon-settings-message');\n\n        var url = owner === 'user' ? '/api/v1/settings/' + addon + '/' : nodeApiUrl + addon + '/settings/';\n\n        $osf.postJSON(\n            url,\n            formToObj($this)\n        ).done(function() {\n            msgElm.text('Settings updated')\n                .removeClass('text-danger').addClass('text-success')\n                .fadeOut(100).fadeIn();\n        }).fail(function(response) {\n            var message = '';\n            response = JSON.parse(response.responseText);\n            if (response && response.message) {\n                message = response.message;\n            } else {\n                message = 'Settings not updated.';\n            }\n            msgElm.text(message)\n                .removeClass('text-success').addClass('text-danger')\n                .fadeOut(100).fadeIn();\n        });\n\n        return false;\n\n    }\n\n    // Expose public methods\n    exports = {\n        formToObj: formToObj,\n        onSubmitSettings: onSubmitSettings,\n    };\n\n    if (typeof module === 'object') {\n        module.exports = exports; \n    } \n    return exports;\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/addonHelper.js\n ** module id = 359\n ** module chunks = 20 42 43\n **/"],"sourceRoot":""}