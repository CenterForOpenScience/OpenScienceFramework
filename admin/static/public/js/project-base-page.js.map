{"version":3,"sources":["webpack:///../website/static/js/pages/project-base-page.js","webpack:///../~/knockout.punches/index.js?2063******************","webpack:///../website/static/built/nodeCategories.json?d0cc*","webpack:///../website/static/js/logFeed.js?83a0*","webpack:///../website/static/js/paginator.js?6917*","webpack:///../website/static/js/project.js?2942","webpack:///../website/static/js/pointers.js","webpack:///../website/static/js/accountClaimer.js","webpack:///../website/static/js/registerNode.js"],"names":[],"mappings":";;;;;AAAA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA,6C;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA,CAAC;;;;;;;;AC3DD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,mGAAmG;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,sDAAsD;AACtD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B;AAC9B;;AAEA,wDAAwD,WAAW;AACnE;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,+BAA+B;AAClE,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,aAAa,gCAAgC;AAC7C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,qBAAqB;AACxD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,YAAY,EAAE;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,qDAAqD,EAAE,WAAW;AAClE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2EAA2E,mCAAmC;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2EAA2E,OAAO;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA,KAAK;AACL;AACA,KAAK,0BAA0B,oBAAoB;AACnD;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,6FAA6F,OAAO;AACpG;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;ACrkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAoC;AACpC;;AAEA,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,2BAA2B,8BAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA,4DAA4D;AAC5D;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA,CAAC;;;AAGD;AACA;AACA,aAAa,SAAS;AACtB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,8BAA8B;AAC9B;AACA,KAAK,OAAO;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,aAAa,EAAE;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,2BAA2B,8BAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;AACA;AACA,aAAa,iEAAiE;AAC9E,2BAA2B,iCAAiC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa,oFAAoF;AACjG;AACA;AACA;AACA;AACA,iBAAiB;AACjB,4EAA4E,8BAA8B;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;;AAEA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,gDAAgD,6BAA6B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B;AAC3B,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;;AAGD;;;;;;;;AC5JA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;AACL;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT,gHAAgH;;AAEhH;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL,CAAC;;AAED;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oFAAoF;AACpF,6DAA6D,qBAAqB,6BAA6B;AAC/G;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL,CAAC;;AAED;AACA;;;;;;;;AClUA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,6BAA6B;AAC7B,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,yBAAyB,+BAA+B;AACxD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mCAAmC;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;;AAEA;;;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL,CAAC","file":"project-base-page.js","sourcesContent":["'use strict';\nvar $ = require('jquery');\n\nvar pointers = require('js/pointers');\nvar AccountClaimer = require('js/accountClaimer.js');\nvar $osf = require('js/osfHelpers');\n\n// NodeActions is needed for rendering recent logs in nodelists (e.g. regsitrations and forks\n// pages\nrequire('js/project');\n\nrequire('js/registerNode');\nvar node = window.contextVars.node;\n\n\nnew pointers.PointerDisplay('#showLinks');\n\nif (!window.contextVars.currentUser.isContributor) {\n    new AccountClaimer('.contributor-unregistered');\n}\n\nif (node.isPublic && node.piwikSiteID) {\n    $osf.trackPiwik(node.piwikHost, node.piwikSiteID);\n}\n\n// Used for clearing backward/forward cache issues\n$(window).unload(function(){\n    return 'Unload';\n});\n$(document).ready(function() {\n    $.getJSON(node.urls.api, function(data) {    \n        $('body').trigger('nodeLoad', data);\n    });\n\n    var self = this;\n    var THRESHOLD_SCROLL_POSITION  = 50;\n    var SMALL_SCREEN_SIZE = 767;\n    var NON_NAV_TOP_MARGIN = 50;\n    var NAV_MAX_TOP_MARGIN = 95;\n    self.adjustPanelPosition = function() {\n        var bodyWidth = $(document.body).width();\n        var scrollTopPosition = $(window).scrollTop();\n        if (bodyWidth <= SMALL_SCREEN_SIZE) {\n            if (scrollTopPosition >= THRESHOLD_SCROLL_POSITION) {\n                $('.cp-handle').css('margin-top', NON_NAV_TOP_MARGIN);\n            }\n            else {\n                $('.cp-handle').css('margin-top', NAV_MAX_TOP_MARGIN - scrollTopPosition);\n            }\n        } else {\n            $('.cp-handle').css('margin-top', NAV_MAX_TOP_MARGIN);\n        }\n    };\n    var ADJUST_PANEL_DEBOUNCE = 10;\n    var RESIZE_DEBOUNCE  = 50;\n\n    self.adjustPanelPosition(); /* Init when refreshing the page*/\n    $(window).scroll($osf.debounce(self.adjustPanelPosition, ADJUST_PANEL_DEBOUNCE));\n    $(window).resize($osf.debounce(self.adjustPanelPosition, RESIZE_DEBOUNCE));\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/pages/project-base-page.js\n ** module id = 0\n ** module chunks = 36\n **/","/**\n * @license Knockout.Punches\n * Enhanced binding syntaxes for Knockout 3+\n * (c) Michael Best\n * License: MIT (http://www.opensource.org/licenses/mit-license.php)\n * Version 0.5.1\n */\nvar ko = require('knockout');\n\n// Add a preprocess function to a binding handler.\nfunction addBindingPreprocessor(bindingKeyOrHandler, preprocessFn) {\n    return chainPreprocessor(getOrCreateHandler(bindingKeyOrHandler), 'preprocess', preprocessFn);\n}\n\n// These utility functions are separated out because they're also used by\n// preprocessBindingProperty\n\n// Get the binding handler or create a new, empty one\nfunction getOrCreateHandler(bindingKeyOrHandler) {\n    return typeof bindingKeyOrHandler === 'object' ? bindingKeyOrHandler :\n        (ko.getBindingHandler(bindingKeyOrHandler) || (ko.bindingHandlers[bindingKeyOrHandler] = {}));\n}\n// Add a preprocess function\nfunction chainPreprocessor(obj, prop, fn) {\n    if (obj[prop]) {\n        // If the handler already has a preprocess function, chain the new\n        // one after the existing one. If the previous function in the chain\n        // returns a falsy value (to remove the binding), the chain ends. This\n        // method allows each function to modify and return the binding value.\n        var previousFn = obj[prop];\n        obj[prop] = function(value, binding, addBinding) {\n            value = previousFn.call(this, value, binding, addBinding);\n            if (value)\n                return fn.call(this, value, binding, addBinding);\n        };\n    } else {\n        obj[prop] = fn;\n    }\n    return obj;\n}\n\n// Add a preprocessNode function to the binding provider. If a\n// function already exists, chain the new one after it. This calls\n// each function in the chain until one modifies the node. This\n// method allows only one function to modify the node.\nfunction addNodePreprocessor(preprocessFn) {\n    var provider = ko.bindingProvider.instance;\n    if (provider.preprocessNode) {\n        var previousPreprocessFn = provider.preprocessNode;\n        provider.preprocessNode = function(node) {\n            var newNodes = previousPreprocessFn.call(this, node);\n            if (!newNodes)\n                newNodes = preprocessFn.call(this, node);\n            return newNodes;\n        };\n    } else {\n        provider.preprocessNode = preprocessFn;\n    }\n}\n\nfunction addBindingHandlerCreator(matchRegex, callbackFn) {\n    var oldGetHandler = ko.getBindingHandler;\n    ko.getBindingHandler = function(bindingKey) {\n        var match;\n        return oldGetHandler(bindingKey) || ((match = bindingKey.match(matchRegex)) && callbackFn(match, bindingKey));\n    };\n}\n\n// Create shortcuts to commonly used ko functions\nvar ko_unwrap = ko.unwrap;\n\n// Create \"punches\" object and export utility functions\nvar ko_punches = ko.punches = {\n    utils: {\n        addBindingPreprocessor: addBindingPreprocessor,\n        addNodePreprocessor: addNodePreprocessor,\n        addBindingHandlerCreator: addBindingHandlerCreator,\n\n        // previous names retained for backwards compitibility\n        setBindingPreprocessor: addBindingPreprocessor,\n        setNodePreprocessor: addNodePreprocessor\n    }\n};\n\nko_punches.enableAll = function () {\n    // Enable interpolation markup\n    enableInterpolationMarkup();\n    enableAttributeInterpolationMarkup();\n\n    // Enable auto-namspacing of attr, css, event, and style\n    enableAutoNamespacedSyntax('attr');\n    enableAutoNamespacedSyntax('css');\n    enableAutoNamespacedSyntax('event');\n    enableAutoNamespacedSyntax('style');\n\n    // Make sure that Knockout knows to bind checked after attr.value (see #40)\n    ko.bindingHandlers.checked.after.push('attr.value');\n\n    // Enable filter syntax for text, html, and attr\n    enableTextFilter('text');\n    enableTextFilter('html');\n    addDefaultNamespacedBindingPreprocessor('attr', filterPreprocessor);\n\n    // Enable wrapped callbacks for click, submit, event, optionsAfterRender, and template options\n    enableWrappedCallback('click');\n    enableWrappedCallback('submit');\n    enableWrappedCallback('optionsAfterRender');\n    addDefaultNamespacedBindingPreprocessor('event', wrappedCallbackPreprocessor);\n    addBindingPropertyPreprocessor('template', 'beforeRemove', wrappedCallbackPreprocessor);\n    addBindingPropertyPreprocessor('template', 'afterAdd', wrappedCallbackPreprocessor);\n    addBindingPropertyPreprocessor('template', 'afterRender', wrappedCallbackPreprocessor);\n};\n// Convert input in the form of `expression | filter1 | filter2:arg1:arg2` to a function call format\n// with filters accessed as ko.filters.filter1, etc.\nfunction filterPreprocessor(input) {\n    // Check if the input contains any | characters; if not, just return\n    if (input.indexOf('|') === -1)\n        return input;\n\n    // Split the input into tokens, in which | and : are individual tokens, quoted strings are ignored, and all tokens are space-trimmed\n    var tokens = input.match(/\"([^\"\\\\]|\\\\.)*\"|'([^'\\\\]|\\\\.)*'|\\|\\||[|:]|[^\\s|:\"'][^|:\"']*[^\\s|:\"']|[^\\s|:\"']/g);\n    if (tokens && tokens.length > 1) {\n        // Append a line so that we don't need a separate code block to deal with the last item\n        tokens.push('|');\n        input = tokens[0];\n        var lastToken, token, inFilters = false, nextIsFilter = false;\n        for (var i = 1, token; token = tokens[i]; ++i) {\n            if (token === '|') {\n                if (inFilters) {\n                    if (lastToken === ':')\n                        input += \"undefined\";\n                    input += ')';\n                }\n                nextIsFilter = true;\n                inFilters = true;\n            } else {\n                if (nextIsFilter) {\n                    input = \"ko.filters['\" + token + \"'](\" + input;\n                } else if (inFilters && token === ':') {\n                    if (lastToken === ':')\n                        input += \"undefined\";\n                    input += \",\";\n                } else {\n                    input += token;\n                }\n                nextIsFilter = false;\n            }\n            lastToken = token;\n        }\n    }\n    return input;\n}\n\n// Set the filter preprocessor for a specific binding\nfunction enableTextFilter(bindingKeyOrHandler) {\n    addBindingPreprocessor(bindingKeyOrHandler, filterPreprocessor);\n}\n\nvar filters = {};\n\n// Convert value to uppercase\nfilters.uppercase = function(value) {\n    return String.prototype.toUpperCase.call(ko_unwrap(value));\n};\n\n// Convert value to lowercase\nfilters.lowercase = function(value) {\n    return String.prototype.toLowerCase.call(ko_unwrap(value));\n};\n\n// Return default value if the input value is empty or null\nfilters['default'] = function (value, defaultValue) {\n    value = ko_unwrap(value);\n    if (typeof value === \"function\") {\n        return value;\n    }\n    if (typeof value === \"string\") {\n        return trim(value) === '' ? defaultValue : value;\n    }\n    return value == null || value.length == 0 ? defaultValue : value;\n};\n\n// Return the value with the search string replaced with the replacement string\nfilters.replace = function(value, search, replace) {\n    return String.prototype.replace.call(ko_unwrap(value), search, replace);\n};\n\nfilters.fit = function(value, length, replacement, trimWhere) {\n    value = ko_unwrap(value);\n    if (length && ('' + value).length > length) {\n        replacement = '' + (replacement || '...');\n        length = length - replacement.length;\n        value = '' + value;\n        switch (trimWhere) {\n            case 'left':\n                return replacement + value.slice(-length);\n            case 'middle':\n                var leftLen = Math.ceil(length / 2);\n                return value.substr(0, leftLen) + replacement + value.slice(leftLen-length);\n            default:\n                return value.substr(0, length) + replacement;\n        }\n    } else {\n        return value;\n    }\n};\n\n// Convert a model object to JSON\nfilters.json = function(rootObject, space, replacer) {     // replacer and space are optional\n    return ko.toJSON(rootObject, replacer, space);\n};\n\n// Format a number using the browser's toLocaleString\nfilters.number = function(value) {\n    return (+ko_unwrap(value)).toLocaleString();\n};\n\n// Export the filters object for general access\nko.filters = filters;\n\n// Export the preprocessor functions\nko_punches.textFilter = {\n    preprocessor: filterPreprocessor,\n    enableForBinding: enableTextFilter\n};\n// Support dynamically-created, namespaced bindings. The binding key syntax is\n// \"namespace.binding\". Within a certain namespace, we can dynamically create the\n// handler for any binding. This is particularly useful for bindings that work\n// the same way, but just set a different named value, such as for element\n// attributes or CSS classes.\nvar namespacedBindingMatch = /([^\\.]+)\\.(.+)/, namespaceDivider = '.';\naddBindingHandlerCreator(namespacedBindingMatch, function (match, bindingKey) {\n    var namespace = match[1],\n        namespaceHandler = ko.bindingHandlers[namespace];\n    if (namespaceHandler) {\n        var bindingName = match[2],\n            handlerFn = namespaceHandler.getNamespacedHandler || defaultGetNamespacedHandler,\n            handler = handlerFn.call(namespaceHandler, bindingName, namespace, bindingKey);\n        ko.bindingHandlers[bindingKey] = handler;\n        return handler;\n    }\n});\n\n// Knockout's built-in bindings \"attr\", \"event\", \"css\" and \"style\" include the idea of\n// namespaces, representing it using a single binding that takes an object map of names\n// to values. This default handler translates a binding of \"namespacedName: value\"\n// to \"namespace: {name: value}\" to automatically support those built-in bindings.\nfunction defaultGetNamespacedHandler(name, namespace, namespacedName) {\n    var handler = ko.utils.extend({}, this);\n    function setHandlerFunction(funcName) {\n        if (handler[funcName]) {\n            handler[funcName] = function(element, valueAccessor) {\n                function subValueAccessor() {\n                    var result = {};\n                    result[name] = valueAccessor();\n                    return result;\n                }\n                var args = Array.prototype.slice.call(arguments, 0);\n                args[1] = subValueAccessor;\n                return ko.bindingHandlers[namespace][funcName].apply(this, args);\n            };\n        }\n    }\n    // Set new init and update functions that wrap the originals\n    setHandlerFunction('init');\n    setHandlerFunction('update');\n    // Clear any preprocess function since preprocessing of the new binding would need to be different\n    if (handler.preprocess)\n        handler.preprocess = null;\n    if (ko.virtualElements.allowedBindings[namespace])\n        ko.virtualElements.allowedBindings[namespacedName] = true;\n    return handler;\n}\n\n// Adds a preprocess function for every generated namespace.x binding. This can\n// be called multiple times for the same binding, and the preprocess functions will\n// be chained. If the binding has a custom getNamespacedHandler method, make sure that\n// it's set before this function is used.\nfunction addDefaultNamespacedBindingPreprocessor(namespace, preprocessFn) {\n    var handler = ko.getBindingHandler(namespace);\n    if (handler) {\n        var previousHandlerFn = handler.getNamespacedHandler || defaultGetNamespacedHandler;\n        handler.getNamespacedHandler = function() {\n            return addBindingPreprocessor(previousHandlerFn.apply(this, arguments), preprocessFn);\n        };\n    }\n}\n\nfunction autoNamespacedPreprocessor(value, binding, addBinding) {\n    if (value.charAt(0) !== \"{\")\n        return value;\n\n    // Handle two-level binding specified as \"binding: {key: value}\" by parsing inner\n    // object and converting to \"binding.key: value\"\n    var subBindings = ko.expressionRewriting.parseObjectLiteral(value);\n    ko.utils.arrayForEach(subBindings, function(keyValue) {\n        addBinding(binding + namespaceDivider + keyValue.key, keyValue.value);\n    });\n}\n\n// Set the namespaced preprocessor for a specific binding\nfunction enableAutoNamespacedSyntax(bindingKeyOrHandler) {\n    addBindingPreprocessor(bindingKeyOrHandler, autoNamespacedPreprocessor);\n}\n\n// Export the preprocessor functions\nko_punches.namespacedBinding = {\n    defaultGetHandler: defaultGetNamespacedHandler,\n    setDefaultBindingPreprocessor: addDefaultNamespacedBindingPreprocessor,    // for backwards compat.\n    addDefaultBindingPreprocessor: addDefaultNamespacedBindingPreprocessor,\n    preprocessor: autoNamespacedPreprocessor,\n    enableForBinding: enableAutoNamespacedSyntax\n};\n// Wrap a callback function in an anonymous function so that it is called with the appropriate\n// \"this\" value.\nfunction wrappedCallbackPreprocessor(val) {\n    // Matches either an isolated identifier or something ending with a property accessor\n    if (/^([$_a-z][$\\w]*|.+(\\.\\s*[$_a-z][$\\w]*|\\[.+\\]))$/i.test(val)) {\n        return 'function(_x,_y,_z){return(' + val + ')(_x,_y,_z);}';\n    } else {\n        return val;\n    }\n}\n\n// Set the wrappedCallback preprocessor for a specific binding\nfunction enableWrappedCallback(bindingKeyOrHandler) {\n    addBindingPreprocessor(bindingKeyOrHandler, wrappedCallbackPreprocessor);\n}\n\n// Export the preprocessor functions\nko_punches.wrappedCallback = {\n    preprocessor: wrappedCallbackPreprocessor,\n    enableForBinding: enableWrappedCallback\n};\n// Attach a preprocess function to a specific property of a binding. This allows you to\n// preprocess binding \"options\" using the same preprocess functions that work for bindings.\nfunction addBindingPropertyPreprocessor(bindingKeyOrHandler, property, preprocessFn) {\n    var handler = getOrCreateHandler(bindingKeyOrHandler);\n    if (!handler._propertyPreprocessors) {\n        // Initialize the binding preprocessor\n        chainPreprocessor(handler, 'preprocess', propertyPreprocessor);\n        handler._propertyPreprocessors = {};\n    }\n    // Add the property preprocess function\n    chainPreprocessor(handler._propertyPreprocessors, property, preprocessFn);\n}\n\n// In order to preprocess a binding property, we have to preprocess the binding itself.\n// This preprocess function splits up the binding value and runs each property's preprocess\n// function if it's set.\nfunction propertyPreprocessor(value, binding, addBinding) {\n    if (value.charAt(0) !== \"{\")\n        return value;\n\n    var subBindings = ko.expressionRewriting.parseObjectLiteral(value),\n        resultStrings = [],\n        propertyPreprocessors = this._propertyPreprocessors || {};\n    ko.utils.arrayForEach(subBindings, function(keyValue) {\n        var prop = keyValue.key, propVal = keyValue.value;\n        if (propertyPreprocessors[prop]) {\n            propVal = propertyPreprocessors[prop](propVal, prop, addBinding);\n        }\n        if (propVal) {\n            resultStrings.push(\"'\" + prop + \"':\" + propVal);\n        }\n    });\n    return \"{\" + resultStrings.join(\",\") + \"}\";\n}\n\n// Export the preprocessor functions\nko_punches.preprocessBindingProperty = {\n    setPreprocessor: addBindingPropertyPreprocessor,     // for backwards compat.\n    addPreprocessor: addBindingPropertyPreprocessor\n};\n// Wrap an expression in an anonymous function so that it is called when the event happens\nfunction makeExpressionCallbackPreprocessor(args) {\n    return function expressionCallbackPreprocessor(val) {\n        return 'function('+args+'){return(' + val + ');}';\n    };\n}\n\nvar eventExpressionPreprocessor = makeExpressionCallbackPreprocessor(\"$data,$event\");\n\n// Set the expressionCallback preprocessor for a specific binding\nfunction enableExpressionCallback(bindingKeyOrHandler, args) {\n    var args = Array.prototype.slice.call(arguments, 1).join();\n    addBindingPreprocessor(bindingKeyOrHandler, makeExpressionCallbackPreprocessor(args));\n}\n\n// Export the preprocessor functions\nko_punches.expressionCallback = {\n    makePreprocessor: makeExpressionCallbackPreprocessor,\n    eventPreprocessor: eventExpressionPreprocessor,\n    enableForBinding: enableExpressionCallback\n};\n\n// Create an \"on\" namespace for events to use the expression method\nko.bindingHandlers.on = {\n    getNamespacedHandler: function(eventName) {\n        var handler = ko.getBindingHandler('event' + namespaceDivider + eventName);\n        return addBindingPreprocessor(handler, eventExpressionPreprocessor);\n    }\n};\n// Performance comparison at http://jsperf.com/markup-interpolation-comparison\nfunction parseInterpolationMarkup(textToParse, outerTextCallback, expressionCallback) {\n    function innerParse(text) {\n        var innerMatch = text.match(/^([\\s\\S]*)}}([\\s\\S]*?)\\{\\{([\\s\\S]*)$/);\n        if (innerMatch) {\n            innerParse(innerMatch[1]);\n            outerTextCallback(innerMatch[2]);\n            expressionCallback(innerMatch[3]);\n        } else {\n            expressionCallback(text);\n        }\n    }\n    var outerMatch = textToParse.match(/^([\\s\\S]*?)\\{\\{([\\s\\S]*)}}([\\s\\S]*)$/);\n    if (outerMatch) {\n        outerTextCallback(outerMatch[1]);\n        innerParse(outerMatch[2]);\n        outerTextCallback(outerMatch[3]);\n    }\n}\n\nfunction trim(string) {\n    return string == null ? '' :\n        string.trim ?\n            string.trim() :\n            string.toString().replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g, '');\n}\n\nfunction interpolationMarkupPreprocessor(node) {\n    // only needs to work with text nodes\n    if (node.nodeType === 3 && node.nodeValue && node.nodeValue.indexOf('{{') !== -1 && (node.parentNode || {}).nodeName != \"TEXTAREA\") {\n        var nodes = [];\n        function addTextNode(text) {\n            if (text)\n                nodes.push(document.createTextNode(text));\n        }\n        function wrapExpr(expressionText) {\n            if (expressionText)\n                nodes.push.apply(nodes, ko_punches_interpolationMarkup.wrapExpression(expressionText, node));\n        }\n        parseInterpolationMarkup(node.nodeValue, addTextNode, wrapExpr)\n\n        if (nodes.length) {\n            if (node.parentNode) {\n                for (var i = 0, n = nodes.length, parent = node.parentNode; i < n; ++i) {\n                    parent.insertBefore(nodes[i], node);\n                }\n                parent.removeChild(node);\n            }\n            return nodes;\n        }\n    }\n}\n\nif (!ko.virtualElements.allowedBindings.html) {\n    // Virtual html binding\n    // SO Question: http://stackoverflow.com/a/15348139\n    var overridden = ko.bindingHandlers.html.update;\n    ko.bindingHandlers.html.update = function (element, valueAccessor) {\n        if (element.nodeType === 8) {\n            var html = ko_unwrap(valueAccessor());\n            if (html != null) {\n                var parsedNodes = ko.utils.parseHtmlFragment('' + html);\n                ko.virtualElements.setDomNodeChildren(element, parsedNodes);\n            } else {\n                ko.virtualElements.emptyNode(element);\n            }\n        } else {\n            overridden(element, valueAccessor);\n        }\n    };\n    ko.virtualElements.allowedBindings.html = true;\n}\n\nfunction wrapExpression(expressionText, node) {\n    var ownerDocument = node ? node.ownerDocument : document,\n        closeComment = true,\n        binding,\n        expressionText = trim(expressionText),\n        firstChar = expressionText[0],\n        lastChar = expressionText[expressionText.length - 1],\n        result = [],\n        matches;\n\n    if (firstChar === '#') {\n        if (lastChar === '/') {\n            binding = expressionText.slice(1, -1);\n        } else {\n            binding = expressionText.slice(1);\n            closeComment = false;\n        }\n        if (matches = binding.match(/^([^,\"'{}()\\/:[\\]\\s]+)\\s+([^\\s:].*)/)) {\n            binding = matches[1] + ':' + matches[2];\n        }\n    } else if (firstChar === '/') {\n        // replace only with a closing comment\n    } else if (firstChar === '{' && lastChar === '}') {\n        binding = \"html:\" + trim(expressionText.slice(1, -1));\n    } else {\n        binding = \"text:\" + trim(expressionText);\n    }\n\n    if (binding)\n        result.push(ownerDocument.createComment(\"ko \" + binding));\n    if (closeComment)\n        result.push(ownerDocument.createComment(\"/ko\"));\n    return result;\n};\n\nfunction enableInterpolationMarkup() {\n    addNodePreprocessor(interpolationMarkupPreprocessor);\n}\n\n// Export the preprocessor functions\nvar ko_punches_interpolationMarkup = ko_punches.interpolationMarkup = {\n    preprocessor: interpolationMarkupPreprocessor,\n    enable: enableInterpolationMarkup,\n    wrapExpression: wrapExpression\n};\n\n\nvar dataBind = 'data-bind';\nfunction attributeInterpolationMarkerPreprocessor(node) {\n    if (node.nodeType === 1 && node.attributes.length) {\n        var dataBindAttribute = node.getAttribute(dataBind);\n        for (var attrs = ko.utils.arrayPushAll([], node.attributes), n = attrs.length, i = 0; i < n; ++i) {\n            var attr = attrs[i];\n            if (attr.specified && attr.name != dataBind && attr.value.indexOf('{{') !== -1) {\n                var parts = [], attrValue = '';\n                function addText(text) {\n                    if (text)\n                        parts.push('\"' + text.replace(/\"/g, '\\\\\"') + '\"');\n                }\n                function addExpr(expressionText) {\n                    if (expressionText) {\n                        attrValue = expressionText;\n                        parts.push('ko.unwrap(' + expressionText + ')');\n                    }\n                }\n                parseInterpolationMarkup(attr.value, addText, addExpr);\n\n                if (parts.length > 1) {\n                    attrValue = '\"\"+' + parts.join('+');\n                }\n\n                if (attrValue) {\n                    var attrName = attr.name.toLowerCase();\n                    var attrBinding = ko_punches_attributeInterpolationMarkup.attributeBinding(attrName, attrValue, node) || attributeBinding(attrName, attrValue, node);\n                    if (!dataBindAttribute) {\n                        dataBindAttribute = attrBinding\n                    } else {\n                        dataBindAttribute += ',' + attrBinding;\n                    }\n                    node.setAttribute(dataBind, dataBindAttribute);\n                    // Using removeAttribute instead of removeAttributeNode because IE clears the\n                    // class if you use removeAttributeNode to remove the id.\n                    node.removeAttribute(attr.name);\n                }\n            }\n        }\n    }\n}\n\nfunction attributeBinding(name, value, node) {\n    if (ko.getBindingHandler(name)) {\n        return name + ':' + value;\n    } else {\n        return 'attr.' + name + ':' + value;\n    }\n}\n\nfunction enableAttributeInterpolationMarkup() {\n    addNodePreprocessor(attributeInterpolationMarkerPreprocessor);\n}\n\nvar ko_punches_attributeInterpolationMarkup = ko_punches.attributeInterpolationMarkup = {\n    preprocessor: attributeInterpolationMarkerPreprocessor,\n    enable: enableAttributeInterpolationMarkup,\n    attributeBinding: attributeBinding\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/knockout.punches/index.js\n ** module id = 152\n ** module chunks = 1 2 4 6 7 8 9 10 12 17 18 22 23 24 27 29 30 31 35 36 37 42 53\n **/","module.exports = {\n\t\"\": \"Uncategorized\",\n\t\"project\": \"Project\",\n\t\"hypothesis\": \"Hypothesis\",\n\t\"methods and measures\": \"Methods and Measures\",\n\t\"procedure\": \"Procedure\",\n\t\"instrumentation\": \"Instrumentation\",\n\t\"data\": \"Data\",\n\t\"analysis\": \"Analysis\",\n\t\"communication\": \"Communication\",\n\t\"other\": \"Other\"\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/json-loader!../website/static/built/nodeCategories.json\n ** module id = 177\n ** module chunks = 4 31 36 37\n **/","/**\n * Renders a log feed.\n *\n */\n'use strict';\nvar ko = require('knockout');\nvar $ = require('jquery');\nvar moment = require('moment');\nvar Paginator = require('js/paginator');\nvar oop = require('js/oop');\nrequire('knockout.punches');\n\nvar $osf = require('js/osfHelpers');  // Injects 'listing' binding handler to to Knockout\nvar nodeCategories = require('json!built/nodeCategories.json');\n\nko.punches.enableAll();  // Enable knockout punches\n\n/**\n  * Log model.\n  */\nvar Log = function(params) {\n    var self = this;\n\n    $.extend(self, params);\n    self.date = new $osf.FormattableDate(params.date);\n    self.wikiUrl = ko.computed(function() {\n        return self.nodeUrl + 'wiki/' + encodeURIComponent(self.params.page);\n    });\n    self.wikiIdUrl = ko.computed(function() {\n        return self.nodeUrl + 'wiki/id/' + encodeURIComponent(self.params.page_id);\n    });\n\n    /**\n      * Given an item in self.contributors, return its anchor element representation.\n      */\n    self._asContribLink = function(person) {\n        var fullnameText = $osf.htmlEscape(person.fullname);\n        return '<a class=\"contrib-link\" href=\"/profile/' + person.id + '/\">' + fullnameText + '</a>';\n    };\n\n    /**\n      * Return whether a knockout template exists for the log.\n      */\n    self.hasTemplate = ko.computed(function() {\n        if (!self.user) {\n            return $('script#' + self.action + '_no_user').length > 0;\n        } else {\n            return $('script#' + self.action).length > 0;\n        }\n    });\n\n    self.hasUser = ko.pureComputed(function() {\n        return Boolean(self.user && self.user.fullname);\n    });\n\n    self.mapUpdates = function(key, item) {\n        if (key === 'category') {\n            return key + ' to ' + nodeCategories[item['new']];\n        }\n        else {\n            return key + ' to ' + item;\n        }\n    };\n\n    /**\n      * Return the html for a comma-delimited list of contributor links, formatted\n      * with correct list grammar.\n      * e.g. \"Dasher and Dancer\", \"Comet, Cupid, and Blitzen\"\n      */\n    self.displayContributors = ko.computed(function(){\n        var ret = '';\n        if (self.anonymous){\n            ret += '<span class=\"contributor-anonymous\">some anonymous contributor(s)</span>';\n        } else {\n            for (var i = 0; i < self.contributors.length; i++) {\n                var person = self.contributors[i];\n                if (i === self.contributors.length - 1 && self.contributors.length > 2) {\n                    ret += ' and ';\n                }\n                if (person.registered) {\n                    ret += self._asContribLink(person);\n                } else {\n                    var fullnameText = $osf.htmlEscape(person.fullname);\n                    ret += '<span>' + fullnameText + '</span>';\n                }\n                if (i < self.contributors.length - 1 && self.contributors.length > 2) {\n                    ret += ', ';\n                } else if (i < self.contributors.length - 1 && self.contributors.length === 2) {\n                    ret += ' and ';\n                }\n            }\n        }\n        return ret;\n    });\n\n    //helper function to strip the slash for file or folder in log template\n    self.stripSlash = function(path){\n        return path.replace(/(^\\/)|(\\/$)/g, '');\n    };\n\n    //helper funtion to determine the type for removing in log template\n    self.pathType = function(path){\n        return path.match(/\\/$/) ? 'folder' : 'file';\n    };\n};\n\n/**\n  * View model for a log list.\n  * @param {Log[]} logs An array of Log model objects to render.\n  * @param url the url ajax request post to\n  */\nvar LogsViewModel = oop.extend(Paginator, {\n    constructor: function(logs, url) {\n        this.super.constructor.call(this);\n        var self = this;\n        self.loading = ko.observable(false);\n        self.logs = ko.observableArray(logs);\n        self.url = url;\n        self.anonymousUserName = '<em>A user</em>';\n\n        self.tzname = ko.pureComputed(function() {\n            var logs = self.logs();\n            if (logs.length) {\n                var tz =  moment(logs[0].date.date).format('ZZ');\n                return tz;\n            }\n            return '';\n        });\n    },\n    //send request to get more logs when the more button is clicked\n    fetchResults: function(){\n        var self = this;\n        self.loading(true); // show loading indicator\n\n        return $.ajax({\n            type: 'get',\n            url: self.url,\n            data:{\n                page: self.pageToGet()\n            },\n            cache: false\n        }).done(function(response) {\n            // Initialize LogViewModel\n            var logModelObjects = createLogs(response.logs); // Array of Log model objects\n            self.logs.removeAll();\n            for (var i=0; i<logModelObjects.length; i++) {\n                self.logs.push(logModelObjects[i]);\n            }\n            self.currentPage(response.page);\n            self.numberOfPages(response.pages);\n            self.addNewPaginators();\n        }).fail(\n            $osf.handleJSONError\n        ).always( function (){\n            self.loading(false);\n        });\n\n    }\n});\n\n\n/**\n  * Create an Array of Log model objects from data returned from an endpoint\n  * @param  {Object[]} logData Log data returned from an endpoint.\n  * @return {Log[]}         Array of Log objects.\n  */\nvar createLogs = function(logData){\n    var mappedLogs = $.map(logData, function(item) {\n        return new Log({\n            anonymous: item.anonymous,\n            action: item.action,\n            date: item.date,\n            // The node type, either 'project' or 'component'\n            // NOTE: This is NOT the component category (e.g. 'hypothesis')\n            nodeType: item.node.is_registration ? 'registration': item.node.node_type,\n            nodeCategory: item.node.category,\n            contributors: item.contributors,\n            nodeUrl: item.node.url,\n            userFullName: item.user.fullname,\n            userURL: item.user.url,\n            params: item.params,\n            nodeTitle: item.node.title,\n            nodeDescription: item.params.description_new,\n            nodePath: item.node.path,\n            user: item.user\n        });\n    });\n    return mappedLogs;\n};\n\n////////////////\n// Public API //\n////////////////\n\nvar defaults = {\n    /** Selector for the progress bar. */\n    progBar: '#logProgressBar'\n};\n\n\nvar initViewModel = function(self, logs, url){\n    self.logs = createLogs(logs);\n    self.viewModel = new LogsViewModel(self.logs, url);\n    if(url) {\n        self.viewModel.fetchResults();\n    }\n    self.init();\n};\n\n/**\n  * A log list feed.\n  * @param {string} selector\n  * @param {string} url\n  * @param {object} options\n  */\nfunction LogFeed(selector, data, options) {\n    var self = this;\n    self.selector = selector;\n    self.$element = $(selector);\n    self.options = $.extend({}, defaults, options);\n    self.$progBar = $(self.options.progBar);\n    //for recent activities logs\n    if (Array.isArray(data)) { // data is an array of log object from server\n        initViewModel(self, data, self.options.url);\n    } else { // data is an URL, for watch logs and project logs\n        var noLogs =[];\n        initViewModel(self, noLogs, data);\n    }\n}\n\nLogFeed.prototype.init = function() {\n    var self = this;\n    self.$progBar.hide();\n    ko.cleanNode(self.$element[0]);\n    $osf.applyBindings(self.viewModel, self.selector);\n};\n\nmodule.exports = LogFeed;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/logFeed.js\n ** module id = 179\n ** module chunks = 4 31 36 37\n **/","/**\n * Paginator model\n */\n'use strict';\nvar ko = require('knockout');\nvar oop = require('js/oop');\nvar MAX_PAGES_ON_PAGINATOR = 7;\nvar MAX_PAGES_ON_PAGINATOR_SIDE = 5;\n\n\n\n\nvar Paginator = oop.defclass({\n    constructor: function() {\n        this.pageToGet = ko.observable(0);\n        this.numberOfPages = ko.observable(0);\n        this.currentPage = ko.observable(0);\n        this.paginators = ko.observableArray([]);\n    },\n    addNewPaginators: function() {\n        var self = this;\n        var i;\n        self.paginators.removeAll();\n        if (self.numberOfPages() > 1) {\n            self.paginators.push({\n                style: (self.currentPage() === 0) ? 'disabled' : '',\n                handler: self.previousPage.bind(self),\n                text: '&lt;'\n            }); /* jshint ignore:line */\n                /* functions defined inside loop */\n\n            self.paginators.push({\n                style: (self.currentPage() === 0) ? 'active' : '',\n                text: '1',\n                handler: function() {\n                    self.pageToGet(0);\n                    if (self.pageToGet() !== self.currentPage()) {\n                        self.fetchResults();\n                    }\n                }\n            });\n            if (self.numberOfPages() <= MAX_PAGES_ON_PAGINATOR) {\n                for (i = 1; i < self.numberOfPages() - 1; i++) {\n                    self.paginators.push({\n                        style: (self.currentPage() === i) ? 'active' : '',\n                        text: i + 1,\n                        handler: function() {\n                            self.pageToGet(parseInt(this.text) - 1);\n                            if (self.pageToGet() !== self.currentPage()) {\n                                self.fetchResults();\n                            }\n                        }\n                    });/* jshint ignore:line */\n                    // function defined inside loop\n                }\n            } else if (self.currentPage() < MAX_PAGES_ON_PAGINATOR_SIDE - 1) { // One ellipse at the end\n                for (i = 1; i < MAX_PAGES_ON_PAGINATOR_SIDE; i++) {\n                    self.paginators.push({\n                        style: (self.currentPage() === i) ? 'active' : '',\n                        text: i + 1,\n                        handler: function() {\n                            self.pageToGet(parseInt(this.text) - 1);\n                            if (self.pageToGet() !== self.currentPage()) {\n                                self.fetchResults();\n                            }\n                        }\n                    });/* jshint ignore:line */\n                    // functions defined inside loop\n\n                }\n                self.paginators.push({\n                    style: 'disabled',\n                    text: '...',\n                    handler: function() {}\n                });\n            } else if (self.currentPage() > self.numberOfPages() - MAX_PAGES_ON_PAGINATOR_SIDE) { // one ellipses at the beginning\n                self.paginators.push({\n                    style: 'disabled',\n                    text: '...',\n                    handler: function() {}\n                });\n                for (i = self.numberOfPages() - MAX_PAGES_ON_PAGINATOR_SIDE; i < self.numberOfPages() - 1; i++) {\n                    self.paginators.push({\n                        style: (self.currentPage() === i) ? 'active' : '',\n                        text: i + 1,\n                        handler: function() {\n                            self.pageToGet(parseInt(this.text) - 1);\n                            if (self.pageToGet() !== self.currentPage()) {\n                                self.fetchResults();\n                            }\n                        }\n                    });/* jshint ignore:line */\n                    // function defined inside loop\n\n                }\n            } else { // two ellipses\n                self.paginators.push({\n                    style: 'disabled',\n                    text: '...',\n                    handler: function() {}\n                });\n                for (i = self.currentPage() - 1; i <= self.currentPage() + 1; i++) {\n                    self.paginators.push({\n                        style: (self.currentPage() === i) ? 'active' : '',\n                        text: i + 1,\n                        handler: function() {\n                            self.pageToGet(parseInt(this.text) - 1);\n                            if (self.pageToGet() !== self.currentPage()) {\n                                self.fetchResults();\n                            }\n                        }\n                    });/* jshint ignore:line */\n                    // functions defined inside loop\n\n                }\n                self.paginators.push({\n                    style: 'disabled',\n                    text: '...',\n                    handler: function() {}\n                });\n            }\n            self.paginators.push({\n                style: (self.currentPage() === self.numberOfPages() - 1) ? 'active' : '',\n                text: self.numberOfPages(),\n                handler: function() {\n                    self.pageToGet(self.numberOfPages() - 1);\n                    if (self.pageToGet() !== self.currentPage()) {\n                        self.fetchResults();\n                    }\n                }\n            });\n            self.paginators.push({\n                style: (self.currentPage() === self.numberOfPages() - 1) ? 'disabled' : '',\n                handler: self.nextPage.bind(self),\n                text: '&gt;'\n            });\n        }\n    },\n    nextPage: function() {\n        this.pageToGet(this.currentPage() + 1);\n        if (this.pageToGet() < this.numberOfPages()){\n            this.fetchResults();\n        }\n    },\n    previousPage: function() {\n        this.pageToGet(this.currentPage() - 1);\n        if (this.pageToGet() >= 0) {\n            this.fetchResults();\n        }\n    },\n    fetchResults: function() {\n        throw new Error('Paginator subclass must define a \"fetchResults\" method.');\n    }\n});\n\n\nmodule.exports = Paginator;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/paginator.js\n ** module id = 180\n ** module chunks = 4 31 36 37 47\n **/","/////////////////////\n// Project JS      //\n/////////////////////\n'use strict';\n\nvar $ = require('jquery');\nvar bootbox = require('bootbox');\nvar Raven = require('raven-js');\n\nvar $osf = require('js/osfHelpers');\nvar LogFeed = require('js/logFeed.js');\n\nvar ctx = window.contextVars;\nvar NodeActions = {}; // Namespace for NodeActions\n\n// TODO: move me to the NodeControl or separate module\nNodeActions.beforeForkNode = function(url, done) {\n    $.ajax({\n        url: url,\n        contentType: 'application/json'\n    }).done(function(response) {\n        bootbox.confirm({\n            message: $osf.joinPrompts(response.prompts, ('<h4>Are you sure you want to fork this project?</h4>')),\n            callback: function (result) {\n                if (result) {\n                    done && done();\n                }\n            },\n            buttons:{\n                confirm:{\n                    label:'Fork'\n                }\n            }\n        });\n    }).fail(\n        $osf.handleJSONError\n    );\n};\n\nNodeActions.forkNode = function() {\n    NodeActions.beforeForkNode(ctx.node.urls.api + 'fork/before/', function() {\n        // Block page\n        $osf.block();\n        // Fork node\n        $osf.postJSON(\n            ctx.node.urls.api + 'fork/',\n            {}\n        ).done(function(response) {\n            window.location = response;\n        }).fail(function(response) {\n            $osf.unblock();\n            if (response.status === 403) {\n                $osf.growl('Sorry:', 'you do not have permission to fork this project');\n            } else {\n                $osf.growl('Error:', 'Forking failed');\n                Raven.captureMessage('Error occurred during forking');\n            }\n        });\n    });\n};\n\nNodeActions.forkPointer = function(pointerId) {\n    bootbox.confirm({\n        title: 'Fork this project?',\n        message: 'Are you sure you want to fork this project?',\n        callback: function(result) {\n            if(result) {\n                // Block page\n                $osf.block();\n\n                // Fork pointer\n                $osf.postJSON(\n                    ctx.node.urls.api + 'pointer/fork/',\n                    {pointerId: pointerId}\n                ).done(function() {\n                    window.location.reload();\n                }).fail(function() {\n                    $osf.unblock();\n                    $osf.growl('Error','Could not fork link.');\n                });\n            }\n        },\n        buttons:{\n            confirm:{\n                label:'Fork'\n            }\n        }\n    });\n};\n\nNodeActions.beforeTemplate = function(url, done) {\n    $.ajax({\n        url: url,\n        contentType: 'application/json'\n    }).success(function(response) {\n        bootbox.confirm({\n            message: $osf.joinPrompts(response.prompts,\n                ('<h4>Are you sure you want to create a new project using this project as a template?</h4>' +\n                '<p>Any add-ons configured for this project will not be authenticated in the new project.</p>')),\n                //('Are you sure you want to create a new project using this project as a template? ' +\n                //  'Any add-ons configured for this project will not be authenticated in the new project.')),\n            callback: function (result) {\n                if (result) {\n                    done && done();\n                }\n            },\n            buttons:{\n                confirm:{\n                    label:'Create'\n                }\n            }\n        });\n    });\n};\n\nNodeActions.addonFileRedirect = function(item) {\n    window.location.href = item.params.urls.view;\n    return false;\n};\n\nNodeActions.useAsTemplate = function() {\n    NodeActions.beforeTemplate('/project/new/' + ctx.node.id + '/beforeTemplate/', function () {\n        $osf.block();\n\n        $osf.postJSON(\n            '/api/v1/project/new/' + ctx.node.id + '/',\n            {}\n        ).done(function(response) {\n            window.location = response.url;\n        }).fail(function(response) {\n            $osf.unblock();\n            $osf.handleJSONError(response);\n        });\n    });\n};\n\n\n$(function() {\n\n    $('#newComponent form').on('submit', function(e) {\n\n        $('#add-component-submit')\n            .attr('disabled', 'disabled')\n            .text('Adding');\n\n        if ($.trim($('#title').val()) === '') {\n\n            $('#newComponent .modal-alert').text('This field is required.');\n\n            $('#add-component-submit')\n                .removeAttr('disabled', 'disabled')\n                .text('Add');\n\n            e.preventDefault();\n        } else if ($(e.target).find('#title').val().length > 200) {\n            $('#newComponent .modal-alert').text('The new component title cannot be more than 200 characters.'); //This alert never appears...\n\n            $('#add-component-submit')\n                .removeAttr('disabled', 'disabled')\n                .text('Add');\n\n            e.preventDefault();\n\n        }\n    });\n});\n\nNodeActions._openCloseNode = function(nodeId) {\n\n    var icon = $('#icon-' + nodeId);\n    var body = $('#body-' + nodeId);\n\n    body.toggleClass('hide');\n\n    if (body.hasClass('hide')) {\n        icon.removeClass('fa fa-angle-up');\n        icon.addClass('fa fa-angle-down');\n    } else {\n        icon.removeClass('fa fa-angle-down');\n        icon.addClass('fa fa-angle-up');\n    }\n};\n\n\nNodeActions.reorderChildren = function(idList, elm) {\n    $osf.postJSON(\n        ctx.node.urls.api + 'reorder_components/',\n        {new_list: idList}\n    ).fail(function(response) {\n        $(elm).sortable('cancel');\n        $osf.handleJSONError(response);\n    });\n};\n\nNodeActions.removePointer = function(pointerId, pointerElm) {\n    $.ajax({\n        type: 'DELETE',\n        url: ctx.node.urls.api + 'pointer/',\n        data: JSON.stringify({\n            pointerId: pointerId\n        }),\n        contentType: 'application/json',\n        dataType: 'json'\n    }).done(function() {\n        pointerElm.remove();\n    }).fail(\n        $osf.handleJSONError\n    );\n};\n\n\n/*\nDisplay recent logs for for a node on the project view page.\n*/\nNodeActions.openCloseNode = function(nodeId) {\n    var $logs = $('#logs-' + nodeId);\n    if (!$logs.hasClass('active')) {\n        if (!$logs.hasClass('served')) {\n            $.getJSON(\n                $logs.attr('data-uri'),\n                {count: 3}\n            ).done(function(response) {\n                new LogFeed('#logs-' + nodeId, response.logs);\n                $logs.addClass('served');\n            });\n        }\n        $logs.addClass('active');\n    } else {\n        $logs.removeClass('active');\n    }\n    // Hide/show the html\n    NodeActions._openCloseNode(nodeId);\n};\n\n// TODO: remove this\n$(document).ready(function() {\n    var permissionInfoHtml = '<dl>' +\n        '<dt>Read</dt><dd>View project content and comment</dd>' +\n        '<dt>Read + Write</dt><dd>Read privileges plus add and configure components; add and edit content</dd>' +\n        '<dt>Administrator</dt><dd>Read and write privileges; manage contributors; delete and register project; public-private settings</dd>' +\n        '</dl>';\n\n    $('.permission-info').attr(\n        'data-content', permissionInfoHtml\n    ).popover({\n        trigger: 'hover'\n    });\n\n    var bibliographicContribInfoHtml = 'Only bibliographic contributors will be displayed ' +\n           'in the Contributors list and in project citations. Non-bibliographic contributors ' +\n            'can read and modify the project as normal.';\n\n    $('.visibility-info').attr(\n        'data-content', bibliographicContribInfoHtml\n    ).popover({\n        trigger: 'hover'\n    });\n\n    ////////////////////\n    // Event Handlers //\n    ////////////////////\n\n    $('.remove-pointer').on('click', function() {\n        var $this = $(this);\n        bootbox.confirm({\n            title: 'Remove this link?',\n            message: 'Are you sure you want to remove this link? This will not remove the ' +\n                'project this link refers to.',\n            callback: function(result) {\n                if(result) {\n                    var pointerId = $this.attr('data-id');\n                    var pointerElm = $this.closest('.list-group-item');\n                    NodeActions.removePointer(pointerId, pointerElm);\n                }\n            },\n            buttons:{\n                    confirm:{\n                        label:'Remove',\n                        className:'btn-danger'\n                    }\n            }\n        });\n    });\n\n    $('#citation-more').on('click', function() {\n        var panel = $('#citationStylePanel');\n        panel.slideToggle(200, function() {\n            if (panel.is(':visible')) {\n                $('#citationStyleInput').select2('open');\n            }\n        });\n        return false;\n    });\n\n    $('body').on('click', '.tagsinput .tag > span', function(e) {\n        window.location = '/search/?q=(tags:' + $(e.target).text().toString().trim()+ ')';\n    });\n\n\n    // Portlet feature for the dashboard, to be implemented in later versions.\n    // $( \".osf-dash-col\" ).sortable({\n    //   connectWith: \".osf-dash-col\",\n    //   handle: \".addon-widget-header\",\n    //   cancel: \".pull-right\",\n    //   placeholder: \"osf-dash-portlet ui-corner-all\"\n    // });\n\n    // Adds active class to current menu item\n    $(function () {\n        var path = window.location.pathname;\n        $('.project-nav a').each(function () {\n            var href = $(this).attr('href');\n            if (path === href ||\n               (path.indexOf('files') > -1 && href.indexOf('files') > -1) ||\n               (path.indexOf('wiki') > -1 && href.indexOf('wiki') > -1)) {\n                $(this).closest('li').addClass('active');\n            }\n        });\n    });\n});\n\nwindow.NodeActions = NodeActions;\nmodule.exports = NodeActions;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/project.js\n ** module id = 383\n ** module chunks = 31 36 37\n **/","/**\n * Controls the \"Add Links\" modal.\n */\n'use strict';\n\nvar $ = require('jquery');\nvar ko = require('knockout');\n\nvar osfHelpers = require('js/osfHelpers');\nvar Paginator = require('js/paginator');\nvar oop = require('js/oop');\n\n// Grab nodeID from global context (mako)\nvar nodeApiUrl = window.contextVars.node.urls.api;\nvar nodeId = window.contextVars.node.id;\n\nvar SEARCH_ALL_SUBMIT_TEXT = 'Search all projects';\nvar SEARCH_MY_PROJECTS_SUBMIT_TEXT = 'Search my projects';\n\nvar AddPointerViewModel = oop.extend(Paginator, {\n    constructor: function(nodeTitle) {\n        this.super.constructor.call(this);\n        var self = this;\n        this.nodeTitle = nodeTitle;\n        this.submitEnabled = ko.observable(true);\n        this.searchAllProjectsSubmitText = ko.observable(SEARCH_ALL_SUBMIT_TEXT);\n        this.searchMyProjectsSubmitText = ko.observable(SEARCH_MY_PROJECTS_SUBMIT_TEXT);\n\n        this.query = ko.observable();\n        this.results = ko.observableArray();\n        this.selection = ko.observableArray();\n        this.errorMsg = ko.observable('');\n        this.totalPages = ko.observable(0);\n        this.includePublic = ko.observable(true);\n        this.searchWarningMsg = ko.observable('');\n        this.submitWarningMsg = ko.observable('');\n        this.loadingResults = ko.observable(false);\n\n        this.foundResults = ko.pureComputed(function() {\n            return self.query() && self.results().length;\n        });\n\n        this.noResults = ko.pureComputed(function() {\n            return self.query() && !self.results().length;\n        });\n    },\n    searchAllProjects: function() {\n        this.includePublic(true);\n        this.pageToGet(0);\n        this.searchAllProjectsSubmitText('Searching...');\n        this.fetchResults();\n    },\n    searchMyProjects: function() {\n        this.includePublic(false);\n        this.pageToGet(0);\n        this.searchMyProjectsSubmitText('Searching...');\n        this.fetchResults();\n    },\n    fetchResults: function() {\n        var self = this;\n        self.errorMsg('');\n        self.searchWarningMsg('');\n\n        if (self.query()) {\n            self.results([]); // clears page for spinner\n            self.loadingResults(true); // enables spinner\n\n            osfHelpers.postJSON(\n                '/api/v1/search/node/', {\n                    query: self.query(),\n                    nodeId: nodeId,\n                    includePublic: self.includePublic(),\n                    page: self.pageToGet()\n                }\n            ).done(function(result) {\n                if (!result.nodes.length) {\n                    self.errorMsg('No results found.');\n                }\n                self.results(result.nodes);\n                self.currentPage(result.page);\n                self.numberOfPages(result.pages);\n                self.addNewPaginators();\n            }).fail(function(xhr) {\n                    self.searchWarningMsg(xhr.responseJSON && xhr.responseJSON.message_long);\n            }).always( function (){\n                self.searchAllProjectsSubmitText(SEARCH_ALL_SUBMIT_TEXT);\n                self.searchMyProjectsSubmitText(SEARCH_MY_PROJECTS_SUBMIT_TEXT);\n                self.loadingResults(false);\n            });\n        } else {\n            self.results([]);\n            self.currentPage(0);\n            self.totalPages(0);\n            self.searchAllProjectsSubmitText(SEARCH_ALL_SUBMIT_TEXT);\n            self.searchMyProjectsSubmitText(SEARCH_MY_PROJECTS_SUBMIT_TEXT);\n        }\n    },\n    addTips: function(elements) {\n        elements.forEach(function(element) {\n            $(element).find('.contrib-button').tooltip();\n        });\n    },\n    add: function(data) {\n        this.selection.push(data);\n        // Hack: Hide and refresh tooltips\n        $('.tooltip').hide();\n        $('.contrib-button').tooltip();\n    },\n    remove: function(data) {\n        var self = this;\n        self.selection.splice(\n            self.selection.indexOf(data), 1\n        );\n        // Hack: Hide and refresh tooltips\n        $('.tooltip').hide();\n        $('.contrib-button').tooltip();\n    },\n    addAll: function() {\n        var self = this;\n        $.each(self.results(), function(idx, result) {\n            if (self.selection().indexOf(result) === -1) {\n                self.add(result);\n            }\n        });\n    },\n    removeAll: function() {\n        var self = this;\n        $.each(self.selection(), function(idx, selected) {\n            self.remove(selected);\n        });\n    },\n    selected: function(data) {\n        var self = this;\n        for (var idx = 0; idx < self.selection().length; idx++) {\n            if (data.id === self.selection()[idx].id) {\n                return true;\n            }\n        }\n        return false;\n    },\n    submit: function() {\n        var self = this;\n        self.submitEnabled(false);\n        self.submitWarningMsg('');\n\n        var nodeIds = osfHelpers.mapByProperty(self.selection(), 'id');\n\n        osfHelpers.postJSON(\n            nodeApiUrl + 'pointer/', {\n                nodeIds: nodeIds\n            }\n        ).done(function() {\n            window.location.reload();\n        }).fail(function(data) {\n            self.submitEnabled(true);\n            self.submitWarningMsg(data.responseJSON && data.responseJSON.message_long);\n        });\n    },\n    clear: function() {\n        this.query('');\n        this.results([]);\n        this.selection([]);\n        this.searchWarningMsg('');\n        this.submitWarningMsg('');\n    },\n    authorText: function(node) {\n        var rv = node.firstAuthor;\n        if (node.etal) {\n            rv += ' et al.';\n        }\n        return rv;\n    }\n});\n\nvar LinksViewModel = function($elm) {\n\n    var self = this;\n    self.links = ko.observableArray([]);\n\n    $elm.on('shown.bs.modal', function() {\n        if (self.links().length === 0) {\n            $.ajax({\n                type: 'GET',\n                url: nodeApiUrl + 'pointer/',\n                dataType: 'json'\n            }).done(function(response) {\n                self.links(response.pointed);\n            }).fail(function() {\n                $elm.modal('hide');\n                osfHelpers.growl('Error:', 'Could not get links');\n            });\n        }\n    });\n\n};\n\n////////////////\n// Public API //\n////////////////\n\nfunction PointerManager(selector, nodeName) {\n    var self = this;\n    self.selector = selector;\n    self.$element = $(self.selector);\n    self.nodeName = nodeName;\n    self.viewModel = new AddPointerViewModel(nodeName);\n    self.init();\n}\n\nPointerManager.prototype.init = function() {\n    var self = this;\n    ko.applyBindings(self.viewModel, self.$element[0]);\n    self.$element.on('hidden.bs.modal', function() {\n        self.viewModel.clear();\n    });\n};\n\nfunction PointerDisplay(selector) {\n    this.selector = selector;\n    this.$element = $(selector);\n    this.viewModel = new LinksViewModel(this.$element);\n    ko.applyBindings(this.viewModel, this.$element[0]);\n}\n\nmodule.exports = {\n    PointerManager: PointerManager,\n    PointerDisplay: PointerDisplay\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/pointers.js\n ** module id = 389\n ** module chunks = 36 37\n **/","/**\n* Module that enables account claiming on the project page. Makes unclaimed\n* usernames show popovers when clicked, where they can input their email.\n*\n* Sends HTTP requests to the claim_user_post endpoint.\n*/\n'use strict';\n\nvar $ = require('jquery');\nvar bootbox = require('bootbox');\n\nvar $osf = require('js/osfHelpers');\n\nvar currentUserId = window.contextVars.currentUser.id;\n\nfunction AccountClaimer (selector) {\n    this.selector = selector;\n    this.element = $(selector);  // Should select all span elements for\n                                // unreg contributor names\n    this.init();\n}\n\nfunction getClaimUrl() {\n    var uid = $(this).data('pk');\n    var pid = global.nodeId;\n    var viewOnlyToken = $osf.urlParams().view_only;\n    return '/api/v1/user/' + uid + '/' + pid +  '/claim/email/' + (viewOnlyToken ? '?view_only=' + viewOnlyToken : '');\n}\n\nfunction alertFinished(email) {\n    $osf.growl('Email will arrive shortly', ['Please check <em>', email, '</em>'].join(''), 'success');\n}\n\nfunction onClickIfLoggedIn() {\n    var pk = $(this).data('pk');\n    if (pk !== currentUserId) {\n        bootbox.confirm({\n            title: 'Claim as ' + global.contextVars.currentUser.username + '?',\n            message: 'If you claim this account, a contributor of this project ' +\n                    'will be emailed to confirm your identity.',\n            callback: function(confirmed) {\n                if (confirmed) {\n                    $osf.postJSON(\n                        getClaimUrl(),\n                        {\n                            claimerId: currentUserId,\n                            pk: pk\n                        }\n                    ).done(function(response) {\n                        alertFinished(response.email);\n                    }).fail(\n                        $osf.handleJSONError\n                    );\n                }\n            },\n            buttons:{\n                confirm:{\n                    label:'Claim'\n                }\n            }\n        });\n    }\n}\n\nAccountClaimer.prototype = {\n    constructor: AccountClaimer,\n    init: function() {\n        var self = this;\n        self.element.tooltip({\n            title: 'Is this you? Click to claim'\n        });\n        if (currentUserId.length) { // If user is logged in, ask for confirmation\n            self.element.on('click', onClickIfLoggedIn);\n        } else {\n            self.element.editable({\n                type: 'text',\n                value: '',\n                ajaxOptions: {\n                    type: 'post',\n                    contentType: 'application/json',\n                    dataType: 'json'  // Expect JSON response\n                },\n                success: function(data) {\n                    alertFinished(data.email);\n                },\n                error: $osf.handleJSONError,\n                display: function(value, sourceData){\n                    if (sourceData && sourceData.fullname) {\n                        $(this).text(sourceData.fullname);\n                    }\n                },\n                // Send JSON payload\n                params: function(params) {\n                    return JSON.stringify(params);\n                },\n                title: 'Claim Account',\n                placement: 'bottom',\n                placeholder: 'Enter email...',\n                validate: function(value) {\n                    var trimmed = $.trim(value);\n                    if (!$osf.isEmail(trimmed)) {\n                        return 'Not a valid email.';\n                    }\n                },\n                url: getClaimUrl.call(this),\n            });\n        }\n    }\n};\n\nmodule.exports = AccountClaimer;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/accountClaimer.js\n ** module id = 390\n ** module chunks = 36\n **/","/*\n * TODO, bring the register page up to date.\n *\n */\nvar $ = require('jquery');\nvar bootbox = require('bootbox');\n\nvar $osf = require('js/osfHelpers');\n\nvar preRegisterMessage =  function(title, parentTitle, parentUrl, category) {\n    var titleText = $osf.htmlEscape(title);\n    var parentTitleText = $osf.htmlEscape(parentTitle);\n    if (parentUrl) {\n        return 'You are about to register the ' + category + ' <b>' + titleText +\n            '</b> including all components and data within it. This will <b>not</b> register' +\n            ' its parent, <b>' + parentTitleText + '</b>.' +\n            ' If you want to register the parent, please go <a href=\"' +\n            parentUrl + '\">here.</a> After clicking Register, you will next select a registration form.';\n    } else {\n        return 'You are about to register <b>' + titleText + '</b> ' +\n            'including all components and data within it. ' +\n            'Registration creates a permanent, time-stamped, uneditable version ' +\n            'of the project. If you would prefer to register only one particular ' +\n            'component, please navigate to that component and then initiate registration. ' +\n            'After clicking Register, you will next select a registration form.';\n    }\n};\n\n$(document).ready(function() {\n    $('#registerNode').click(function(event) {\n        var node = window.contextVars.node;\n        var target = event.currentTarget.href;\n\n        event.preventDefault();\n        var title = node.title;\n        var titleText = $osf.htmlEscape(title);\n        var parentTitle = node.parentTitle;\n        var parentRegisterUrl = node.parentRegisterUrl;\n        var category = node.category;\n        var bootboxTitle = 'Register ' + titleText;\n        if (node.category !== 'project'){\n            category = 'component';\n        }\n\n        bootbox.confirm({\n            title: bootboxTitle,\n            message: preRegisterMessage(title, parentTitle, parentRegisterUrl, category),\n            callback: function (confirmed) {\n                if(confirmed) {\n                    window.location.href = target;\n                }\n            },\n            buttons:{\n                confirm:{\n                    label:'Register'\n                }\n            }\n        });\n    });\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/static/js/registerNode.js\n ** module id = 391\n ** module chunks = 36\n **/"],"sourceRoot":""}