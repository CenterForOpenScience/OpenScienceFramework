{"version":3,"sources":["webpack:///../website/addons/figshare/static/files.js","webpack:///../website/addons/figshare/static/figshareFangornConfig.js"],"names":[],"mappings":";;;;;AAAA;;;;;;;;ACAA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,2DAA2D,8BAA8B;AACzF;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;;;AAGA;AACA;AACA;AACA","file":"figshare/files.js","sourcesContent":["require('./figshareFangornConfig.js');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/addons/figshare/static/files.js\n ** module id = 0\n ** module chunks = 11\n **/","'use strict';\n\nvar m = require('mithril');\n\nvar Fangorn = require('js/fangorn');\n\n\n// Define Fangorn Button Actions\nvar _figshareItemButtons = {\n    view: function (ctrl, args, children) {\n        var buttons = [];\n        var tb = args.treebeard;\n        var item = args.item;\n        if (tb.options.placement !== 'fileview') {\n            // If File and FileRead are not defined dropzone is not supported and neither is uploads\n            if (window.File && window.FileReader && item.data.permissions && item.data.permissions.edit && item.kind === 'folder') {\n                buttons.push(\n                    m.component(Fangorn.Components.button, {\n                        onclick: function (event) {\n                            Fangorn.ButtonEvents._uploadEvent.call(tb, event, item);\n                        },\n                        icon: 'fa fa-upload',\n                        className: 'text-success'\n                    }, 'Upload')\n                );\n            }\n            if (item.kind === 'file' && item.data.extra && item.data.extra.status === 'public') {\n                buttons.push(\n                    m.component(Fangorn.Components.button, {\n                        onclick: function (event) {\n                            Fangorn.ButtonEvents._downloadEvent.call(tb, event, item);\n                        },\n                        icon: 'fa fa-download',\n                        className: 'text-primary'\n                    }, 'Download')\n                );\n            }\n            // Files can be deleted if private or if it is in a dataset that contains more than one file\n            var privateOrSiblings = (item.data.extra && item.data.extra.status !== 'public') ||\n                (!item.parent().data.isAddonRoot && item.parent().children.length > 1);\n            if (item.kind === 'file' && item.data.permissions && item.data.permissions.view) {\n                buttons.push(\n                    m.component(Fangorn.Components.button, {\n                        onclick: function (event) {\n                            Fangorn.ButtonEvents._gotoFileEvent.call(tb, item);\n                        },\n                        icon: 'fa fa-file-o',\n                        className: 'text-info'\n                    }, 'View'));\n            }\n            if (item.kind === 'file' && privateOrSiblings && item.data.permissions && item.data.permissions.edit) {\n                buttons.push(\n                    m.component(Fangorn.Components.button, {\n                        onclick: function (event) {\n                            Fangorn.ButtonEvents._removeEvent.call(tb, event, tb.multiselected());\n                        },\n                        icon: 'fa fa-trash',\n                        className: 'text-danger'\n                    }, 'Delete')\n                );\n            }\n            if (item.kind === 'file' && item.data.permissions && item.data.permissions.view && item.data.extra.status === 'public') {\n                buttons.push(\n                    m('a.text-info.fangorn-toolbar-icon', {href: item.data.extra.webView}, [\n                        m('i.fa.fa-external-link'),\n                        m('span', 'View on figshare')\n                    ])\n                );\n            }\n        }\n        return m('span', buttons); // Tell fangorn this function is used.\n    }\n};\n\n\nFangorn.config.figshare = {\n    // Fangorn options are called if functions, so return a thunk that returns the column builder\n    itemButtons: _figshareItemButtons\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../website/addons/figshare/static/figshareFangornConfig.js\n ** module id = 201\n ** module chunks = 11\n **/"],"sourceRoot":""}